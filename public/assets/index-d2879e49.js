(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function N0(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function T0(t){if(pt(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Fn(r)?FN(r):T0(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(Fn(t))return t;if(an(t))return t}}const ON=/;(?![^(]*\))/g,DN=/:([^]+)/,MN=/\/\*.*?\*\//gs;function FN(t){const e={};return t.replace(MN,"").split(ON).forEach(n=>{if(n){const r=n.split(DN);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function C0(t){let e="";if(Fn(t))e=t;else if(pt(t))for(let n=0;n<t.length;n++){const r=C0(t[n]);r&&(e+=r+" ")}else if(an(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const BN="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jN=N0(BN);function Lw(t){return!!t||t===""}const cr=t=>Fn(t)?t:t==null?"":pt(t)||an(t)&&(t.toString===Dw||!wt(t.toString))?JSON.stringify(t,Rw,2):String(t),Rw=(t,e)=>e&&e.__v_isRef?Rw(t,e.value):Pc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:Pw(e)?{[`Set(${e.size})`]:[...e.values()]}:an(e)&&!pt(e)&&!Mw(e)?String(e):e,en={},Rc=[],Di=()=>{},UN=()=>!1,qN=/^on[^a-z]/,rp=t=>qN.test(t),x0=t=>t.startsWith("onUpdate:"),_r=Object.assign,k0=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},VN=Object.prototype.hasOwnProperty,Pt=(t,e)=>VN.call(t,e),pt=Array.isArray,Pc=t=>ip(t)==="[object Map]",Pw=t=>ip(t)==="[object Set]",wt=t=>typeof t=="function",Fn=t=>typeof t=="string",L0=t=>typeof t=="symbol",an=t=>t!==null&&typeof t=="object",Ow=t=>an(t)&&wt(t.then)&&wt(t.catch),Dw=Object.prototype.toString,ip=t=>Dw.call(t),$N=t=>ip(t).slice(8,-1),Mw=t=>ip(t)==="[object Object]",R0=t=>Fn(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Gf=N0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sp=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},zN=/-(\w)/g,fs=sp(t=>t.replace(zN,(e,n)=>n?n.toUpperCase():"")),HN=/\B([A-Z])/g,al=sp(t=>t.replace(HN,"-$1").toLowerCase()),op=sp(t=>t.charAt(0).toUpperCase()+t.slice(1)),em=sp(t=>t?`on${op(t)}`:""),Du=(t,e)=>!Object.is(t,e),Kf=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},gd=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Wm=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let h5;const WN=()=>h5||(h5=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Wr;class GN{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Wr,!e&&Wr&&(this.index=(Wr.scopes||(Wr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Wr;try{return Wr=this,e()}finally{Wr=n}}}on(){Wr=this}off(){Wr=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function KN(t,e=Wr){e&&e.active&&e.effects.push(t)}function Fw(){return Wr}function YN(t){Wr&&Wr.cleanups.push(t)}const P0=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Bw=t=>(t.w&ko)>0,jw=t=>(t.n&ko)>0,QN=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ko},XN=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];Bw(i)&&!jw(i)?i.delete(t):e[n++]=i,i.w&=~ko,i.n&=~ko}e.length=n}},Gm=new WeakMap;let uu=0,ko=1;const Km=30;let xi;const fa=Symbol(""),Ym=Symbol("");class O0{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,KN(this,r)}run(){if(!this.active)return this.fn();let e=xi,n=Eo;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=xi,xi=this,Eo=!0,ko=1<<++uu,uu<=Km?QN(this):f5(this),this.fn()}finally{uu<=Km&&XN(this),ko=1<<--uu,xi=this.parent,Eo=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){xi===this?this.deferStop=!0:this.active&&(f5(this),this.onStop&&this.onStop(),this.active=!1)}}function f5(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Eo=!0;const Uw=[];function cl(){Uw.push(Eo),Eo=!1}function ll(){const t=Uw.pop();Eo=t===void 0?!0:t}function Br(t,e,n){if(Eo&&xi){let r=Gm.get(t);r||Gm.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=P0()),qw(i)}}function qw(t,e){let n=!1;uu<=Km?jw(t)||(t.n|=ko,n=!Bw(t)):n=!t.has(xi),n&&(t.add(xi),xi.deps.push(t))}function qs(t,e,n,r,i,s){const o=Gm.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&pt(t)){const c=Number(r);o.forEach((u,f)=>{(f==="length"||f>=c)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":pt(t)?R0(n)&&a.push(o.get("length")):(a.push(o.get(fa)),Pc(t)&&a.push(o.get(Ym)));break;case"delete":pt(t)||(a.push(o.get(fa)),Pc(t)&&a.push(o.get(Ym)));break;case"set":Pc(t)&&a.push(o.get(fa));break}if(a.length===1)a[0]&&Qm(a[0]);else{const c=[];for(const u of a)u&&c.push(...u);Qm(P0(c))}}function Qm(t,e){const n=pt(t)?t:[...t];for(const r of n)r.computed&&d5(r);for(const r of n)r.computed||d5(r)}function d5(t,e){(t!==xi||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const JN=N0("__proto__,__v_isRef,__isVue"),Vw=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(L0)),ZN=D0(),e4=D0(!1,!0),t4=D0(!0),p5=n4();function n4(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Dt(this);for(let s=0,o=this.length;s<o;s++)Br(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(Dt)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){cl();const r=Dt(this)[e].apply(this,n);return ll(),r}}),t}function r4(t){const e=Dt(this);return Br(e,"has",t),e.hasOwnProperty(t)}function D0(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?_4:Gw:e?Ww:Hw).get(r))return r;const o=pt(r);if(!t){if(o&&Pt(p5,i))return Reflect.get(p5,i,s);if(i==="hasOwnProperty")return r4}const a=Reflect.get(r,i,s);return(L0(i)?Vw.has(i):JN(i))||(t||Br(r,"get",i),e)?a:Dn(a)?o&&R0(i)?a:a.value:an(a)?t?Kw(a):ch(a):a}}const i4=$w(),s4=$w(!0);function $w(t=!1){return function(n,r,i,s){let o=n[r];if(Wc(o)&&Dn(o)&&!Dn(i))return!1;if(!t&&(!md(i)&&!Wc(i)&&(o=Dt(o),i=Dt(i)),!pt(n)&&Dn(o)&&!Dn(i)))return o.value=i,!0;const a=pt(n)&&R0(r)?Number(r)<n.length:Pt(n,r),c=Reflect.set(n,r,i,s);return n===Dt(s)&&(a?Du(i,o)&&qs(n,"set",r,i):qs(n,"add",r,i)),c}}function o4(t,e){const n=Pt(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&qs(t,"delete",e,void 0),r}function a4(t,e){const n=Reflect.has(t,e);return(!L0(e)||!Vw.has(e))&&Br(t,"has",e),n}function c4(t){return Br(t,"iterate",pt(t)?"length":fa),Reflect.ownKeys(t)}const zw={get:ZN,set:i4,deleteProperty:o4,has:a4,ownKeys:c4},l4={get:t4,set(t,e){return!0},deleteProperty(t,e){return!0}},u4=_r({},zw,{get:e4,set:s4}),M0=t=>t,ap=t=>Reflect.getPrototypeOf(t);function If(t,e,n=!1,r=!1){t=t.__v_raw;const i=Dt(t),s=Dt(e);n||(e!==s&&Br(i,"get",e),Br(i,"get",s));const{has:o}=ap(i),a=r?M0:n?j0:Mu;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Nf(t,e=!1){const n=this.__v_raw,r=Dt(n),i=Dt(t);return e||(t!==i&&Br(r,"has",t),Br(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Tf(t,e=!1){return t=t.__v_raw,!e&&Br(Dt(t),"iterate",fa),Reflect.get(t,"size",t)}function g5(t){t=Dt(t);const e=Dt(this);return ap(e).has.call(e,t)||(e.add(t),qs(e,"add",t,t)),this}function m5(t,e){e=Dt(e);const n=Dt(this),{has:r,get:i}=ap(n);let s=r.call(n,t);s||(t=Dt(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Du(e,o)&&qs(n,"set",t,e):qs(n,"add",t,e),this}function y5(t){const e=Dt(this),{has:n,get:r}=ap(e);let i=n.call(e,t);i||(t=Dt(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&qs(e,"delete",t,void 0),s}function v5(){const t=Dt(this),e=t.size!==0,n=t.clear();return e&&qs(t,"clear",void 0,void 0),n}function Cf(t,e){return function(r,i){const s=this,o=s.__v_raw,a=Dt(o),c=e?M0:t?j0:Mu;return!t&&Br(a,"iterate",fa),o.forEach((u,f)=>r.call(i,c(u),c(f),s))}}function xf(t,e,n){return function(...r){const i=this.__v_raw,s=Dt(i),o=Pc(s),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=i[t](...r),f=n?M0:e?j0:Mu;return!e&&Br(s,"iterate",c?Ym:fa),{next(){const{value:d,done:y}=u.next();return y?{value:d,done:y}:{value:a?[f(d[0]),f(d[1])]:f(d),done:y}},[Symbol.iterator](){return this}}}}function ho(t){return function(...e){return t==="delete"?!1:this}}function h4(){const t={get(s){return If(this,s)},get size(){return Tf(this)},has:Nf,add:g5,set:m5,delete:y5,clear:v5,forEach:Cf(!1,!1)},e={get(s){return If(this,s,!1,!0)},get size(){return Tf(this)},has:Nf,add:g5,set:m5,delete:y5,clear:v5,forEach:Cf(!1,!0)},n={get(s){return If(this,s,!0)},get size(){return Tf(this,!0)},has(s){return Nf.call(this,s,!0)},add:ho("add"),set:ho("set"),delete:ho("delete"),clear:ho("clear"),forEach:Cf(!0,!1)},r={get(s){return If(this,s,!0,!0)},get size(){return Tf(this,!0)},has(s){return Nf.call(this,s,!0)},add:ho("add"),set:ho("set"),delete:ho("delete"),clear:ho("clear"),forEach:Cf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=xf(s,!1,!1),n[s]=xf(s,!0,!1),e[s]=xf(s,!1,!0),r[s]=xf(s,!0,!0)}),[t,n,e,r]}const[f4,d4,p4,g4]=h4();function F0(t,e){const n=e?t?g4:p4:t?d4:f4;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Pt(n,i)&&i in r?n:r,i,s)}const m4={get:F0(!1,!1)},y4={get:F0(!1,!0)},v4={get:F0(!0,!1)},Hw=new WeakMap,Ww=new WeakMap,Gw=new WeakMap,_4=new WeakMap;function w4(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function b4(t){return t.__v_skip||!Object.isExtensible(t)?0:w4($N(t))}function ch(t){return Wc(t)?t:B0(t,!1,zw,m4,Hw)}function A4(t){return B0(t,!1,u4,y4,Ww)}function Kw(t){return B0(t,!0,l4,v4,Gw)}function B0(t,e,n,r,i){if(!an(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=b4(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Oc(t){return Wc(t)?Oc(t.__v_raw):!!(t&&t.__v_isReactive)}function Wc(t){return!!(t&&t.__v_isReadonly)}function md(t){return!!(t&&t.__v_isShallow)}function Yw(t){return Oc(t)||Wc(t)}function Dt(t){const e=t&&t.__v_raw;return e?Dt(e):t}function Qw(t){return gd(t,"__v_skip",!0),t}const Mu=t=>an(t)?ch(t):t,j0=t=>an(t)?Kw(t):t;function Xw(t){Eo&&xi&&(t=Dt(t),qw(t.dep||(t.dep=P0())))}function Jw(t,e){t=Dt(t);const n=t.dep;n&&Qm(n)}function Dn(t){return!!(t&&t.__v_isRef===!0)}function gr(t){return eb(t,!1)}function Zw(t){return eb(t,!0)}function eb(t,e){return Dn(t)?t:new S4(t,e)}class S4{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Dt(e),this._value=n?e:Mu(e)}get value(){return Xw(this),this._value}set value(e){const n=this.__v_isShallow||md(e)||Wc(e);e=n?e:Dt(e),Du(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Mu(e),Jw(this))}}function mt(t){return Dn(t)?t.value:t}const E4={get:(t,e,n)=>mt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Dn(i)&&!Dn(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function tb(t){return Oc(t)?t:new Proxy(t,E4)}var nb;class I4{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[nb]=!1,this._dirty=!0,this.effect=new O0(e,()=>{this._dirty||(this._dirty=!0,Jw(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Dt(this);return Xw(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}nb="__v_isReadonly";function N4(t,e,n=!1){let r,i;const s=wt(t);return s?(r=t,i=Di):(r=t.get,i=t.set),new I4(r,i,s||!i,n)}function Io(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){cp(s,e,n)}return i}function ui(t,e,n,r){if(wt(t)){const s=Io(t,e,n,r);return s&&Ow(s)&&s.catch(o=>{cp(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(ui(t[s],e,n,r));return i}function cp(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const u=s.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,o,a)===!1)return}s=s.parent}const c=e.appContext.config.errorHandler;if(c){Io(c,null,10,[t,o,a]);return}}T4(t,n,i,r)}function T4(t,e,n,r=!0){console.error(t)}let Fu=!1,Xm=!1;const dr=[];let ts=0;const Dc=[];let Ps=null,na=0;const rb=Promise.resolve();let U0=null;function ib(t){const e=U0||rb;return t?e.then(this?t.bind(this):t):e}function C4(t){let e=ts+1,n=dr.length;for(;e<n;){const r=e+n>>>1;Bu(dr[r])<t?e=r+1:n=r}return e}function q0(t){(!dr.length||!dr.includes(t,Fu&&t.allowRecurse?ts+1:ts))&&(t.id==null?dr.push(t):dr.splice(C4(t.id),0,t),sb())}function sb(){!Fu&&!Xm&&(Xm=!0,U0=rb.then(ab))}function x4(t){const e=dr.indexOf(t);e>ts&&dr.splice(e,1)}function k4(t){pt(t)?Dc.push(...t):(!Ps||!Ps.includes(t,t.allowRecurse?na+1:na))&&Dc.push(t),sb()}function _5(t,e=Fu?ts+1:0){for(;e<dr.length;e++){const n=dr[e];n&&n.pre&&(dr.splice(e,1),e--,n())}}function ob(t){if(Dc.length){const e=[...new Set(Dc)];if(Dc.length=0,Ps){Ps.push(...e);return}for(Ps=e,Ps.sort((n,r)=>Bu(n)-Bu(r)),na=0;na<Ps.length;na++)Ps[na]();Ps=null,na=0}}const Bu=t=>t.id==null?1/0:t.id,L4=(t,e)=>{const n=Bu(t)-Bu(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function ab(t){Xm=!1,Fu=!0,dr.sort(L4);const e=Di;try{for(ts=0;ts<dr.length;ts++){const n=dr[ts];n&&n.active!==!1&&Io(n,null,14)}}finally{ts=0,dr.length=0,ob(),Fu=!1,U0=null,(dr.length||Dc.length)&&ab()}}function R4(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||en;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const f=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:y}=r[f]||en;y&&(i=n.map(g=>Fn(g)?g.trim():g)),d&&(i=n.map(Wm))}let a,c=r[a=em(e)]||r[a=em(fs(e))];!c&&s&&(c=r[a=em(al(e))]),c&&ui(c,t,6,i);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ui(u,t,6,i)}}function cb(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!wt(t)){const c=u=>{const f=cb(u,e,!0);f&&(a=!0,_r(o,f))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!s&&!a?(an(t)&&r.set(t,null),null):(pt(s)?s.forEach(c=>o[c]=null):_r(o,s),an(t)&&r.set(t,o),o)}function lp(t,e){return!t||!rp(e)?!1:(e=e.slice(2).replace(/Once$/,""),Pt(t,e[0].toLowerCase()+e.slice(1))||Pt(t,al(e))||Pt(t,e))}let Gr=null,up=null;function yd(t){const e=Gr;return Gr=t,up=t&&t.type.__scopeId||null,e}function P4(t){up=t}function O4(){up=null}function Mr(t,e=Gr,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&k5(-1);const s=yd(e);let o;try{o=t(...i)}finally{yd(s),r._d&&k5(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function tm(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:c,emit:u,render:f,renderCache:d,data:y,setupState:g,ctx:w,inheritAttrs:_}=t;let T,S;const k=yd(t);try{if(n.shapeFlag&4){const Y=i||r;T=es(f.call(Y,Y,d,s,g,y,w)),S=c}else{const Y=e;T=es(Y.length>1?Y(s,{attrs:c,slots:a,emit:u}):Y(s,null)),S=e.props?c:D4(c)}}catch(Y){bu.length=0,cp(Y,t,1),T=zt(Fi)}let j=T;if(S&&_!==!1){const Y=Object.keys(S),{shapeFlag:oe}=j;Y.length&&oe&7&&(o&&Y.some(x0)&&(S=M4(S,o)),j=Lo(j,S))}return n.dirs&&(j=Lo(j),j.dirs=j.dirs?j.dirs.concat(n.dirs):n.dirs),n.transition&&(j.transition=n.transition),T=j,yd(k),T}const D4=t=>{let e;for(const n in t)(n==="class"||n==="style"||rp(n))&&((e||(e={}))[n]=t[n]);return e},M4=(t,e)=>{const n={};for(const r in t)(!x0(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function F4(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:c}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?w5(r,o,u):!!o;if(c&8){const f=e.dynamicProps;for(let d=0;d<f.length;d++){const y=f[d];if(o[y]!==r[y]&&!lp(u,y))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?w5(r,o,u):!0:!!o;return!1}function w5(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!lp(n,s))return!0}return!1}function B4({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const j4=t=>t.__isSuspense;function U4(t,e){e&&e.pendingBranch?pt(t)?e.effects.push(...t):e.effects.push(t):k4(t)}function Yf(t,e){if(bn){let n=bn.provides;const r=bn.parent&&bn.parent.provides;r===n&&(n=bn.provides=Object.create(r)),n[t]=e}}function Mi(t,e,n=!1){const r=bn||Gr;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&wt(e)?e.call(r.proxy):e}}const kf={};function _u(t,e,n){return lb(t,e,n)}function lb(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=en){const a=Fw()===(bn==null?void 0:bn.scope)?bn:null;let c,u=!1,f=!1;if(Dn(t)?(c=()=>t.value,u=md(t)):Oc(t)?(c=()=>t,r=!0):pt(t)?(f=!0,u=t.some(j=>Oc(j)||md(j)),c=()=>t.map(j=>{if(Dn(j))return j.value;if(Oc(j))return oa(j);if(wt(j))return Io(j,a,2)})):wt(t)?e?c=()=>Io(t,a,2):c=()=>{if(!(a&&a.isUnmounted))return d&&d(),ui(t,a,3,[y])}:c=Di,e&&r){const j=c;c=()=>oa(j())}let d,y=j=>{d=S.onStop=()=>{Io(j,a,4)}},g;if(Uu)if(y=Di,e?n&&ui(e,a,3,[c(),f?[]:void 0,y]):c(),i==="sync"){const j=PT();g=j.__watcherHandles||(j.__watcherHandles=[])}else return Di;let w=f?new Array(t.length).fill(kf):kf;const _=()=>{if(S.active)if(e){const j=S.run();(r||u||(f?j.some((Y,oe)=>Du(Y,w[oe])):Du(j,w)))&&(d&&d(),ui(e,a,3,[j,w===kf?void 0:f&&w[0]===kf?[]:w,y]),w=j)}else S.run()};_.allowRecurse=!!e;let T;i==="sync"?T=_:i==="post"?T=()=>Dr(_,a&&a.suspense):(_.pre=!0,a&&(_.id=a.uid),T=()=>q0(_));const S=new O0(c,T);e?n?_():w=S.run():i==="post"?Dr(S.run.bind(S),a&&a.suspense):S.run();const k=()=>{S.stop(),a&&a.scope&&k0(a.scope.effects,S)};return g&&g.push(k),k}function q4(t,e,n){const r=this.proxy,i=Fn(t)?t.includes(".")?ub(r,t):()=>r[t]:t.bind(r,r);let s;wt(e)?s=e:(s=e.handler,n=e);const o=bn;Gc(this);const a=lb(i,s.bind(r),n);return o?Gc(o):pa(),a}function ub(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function oa(t,e){if(!an(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Dn(t))oa(t.value,e);else if(pt(t))for(let n=0;n<t.length;n++)oa(t[n],e);else if(Pw(t)||Pc(t))t.forEach(n=>{oa(n,e)});else if(Mw(t))for(const n in t)oa(t[n],e);return t}function V4(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return V0(()=>{t.isMounted=!0}),gb(()=>{t.isUnmounting=!0}),t}const oi=[Function,Array],$4={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:oi,onEnter:oi,onAfterEnter:oi,onEnterCancelled:oi,onBeforeLeave:oi,onLeave:oi,onAfterLeave:oi,onLeaveCancelled:oi,onBeforeAppear:oi,onAppear:oi,onAfterAppear:oi,onAppearCancelled:oi},setup(t,{slots:e}){const n=gp(),r=V4();let i;return()=>{const s=e.default&&fb(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const _ of s)if(_.type!==Fi){o=_;break}}const a=Dt(t),{mode:c}=a;if(r.isLeaving)return nm(o);const u=b5(o);if(!u)return nm(o);const f=Jm(u,a,r,n);Zm(u,f);const d=n.subTree,y=d&&b5(d);let g=!1;const{getTransitionKey:w}=u.type;if(w){const _=w();i===void 0?i=_:_!==i&&(i=_,g=!0)}if(y&&y.type!==Fi&&(!ra(u,y)||g)){const _=Jm(y,a,r,n);if(Zm(y,_),c==="out-in")return r.isLeaving=!0,_.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},nm(o);c==="in-out"&&u.type!==Fi&&(_.delayLeave=(T,S,k)=>{const j=hb(r,y);j[String(y.key)]=y,T._leaveCb=()=>{S(),T._leaveCb=void 0,delete f.delayedLeave},f.delayedLeave=k})}return o}}},z4=$4;function hb(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Jm(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:d,onLeave:y,onAfterLeave:g,onLeaveCancelled:w,onBeforeAppear:_,onAppear:T,onAfterAppear:S,onAppearCancelled:k}=e,j=String(t.key),Y=hb(n,t),oe=(F,ge)=>{F&&ui(F,r,9,ge)},me=(F,ge)=>{const pe=ge[1];oe(F,ge),pt(F)?F.every(D=>D.length<=1)&&pe():F.length<=1&&pe()},te={mode:s,persisted:o,beforeEnter(F){let ge=a;if(!n.isMounted)if(i)ge=_||a;else return;F._leaveCb&&F._leaveCb(!0);const pe=Y[j];pe&&ra(t,pe)&&pe.el._leaveCb&&pe.el._leaveCb(),oe(ge,[F])},enter(F){let ge=c,pe=u,D=f;if(!n.isMounted)if(i)ge=T||c,pe=S||u,D=k||f;else return;let O=!1;const G=F._enterCb=H=>{O||(O=!0,H?oe(D,[F]):oe(pe,[F]),te.delayedLeave&&te.delayedLeave(),F._enterCb=void 0)};ge?me(ge,[F,G]):G()},leave(F,ge){const pe=String(t.key);if(F._enterCb&&F._enterCb(!0),n.isUnmounting)return ge();oe(d,[F]);let D=!1;const O=F._leaveCb=G=>{D||(D=!0,ge(),G?oe(w,[F]):oe(g,[F]),F._leaveCb=void 0,Y[pe]===t&&delete Y[pe])};Y[pe]=t,y?me(y,[F,O]):O()},clone(F){return Jm(F,e,n,r)}};return te}function nm(t){if(hp(t))return t=Lo(t),t.children=null,t}function b5(t){return hp(t)?t.children?t.children[0]:void 0:t}function Zm(t,e){t.shapeFlag&6&&t.component?Zm(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function fb(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===sn?(o.patchFlag&128&&i++,r=r.concat(fb(o.children,e,a))):(e||o.type!==Fi)&&r.push(a!=null?Lo(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function db(t){return wt(t)?{setup:t,name:t.name}:t}const Qf=t=>!!t.type.__asyncLoader,hp=t=>t.type.__isKeepAlive;function H4(t,e){pb(t,"a",e)}function W4(t,e){pb(t,"da",e)}function pb(t,e,n=bn){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(fp(e,r,n),n){let i=n.parent;for(;i&&i.parent;)hp(i.parent.vnode)&&G4(r,e,n,i),i=i.parent}}function G4(t,e,n,r){const i=fp(e,t,r,!0);mb(()=>{k0(r[e],i)},n)}function fp(t,e,n=bn,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;cl(),Gc(n);const a=ui(e,n,t,o);return pa(),ll(),a});return r?i.unshift(s):i.push(s),s}}const Gs=t=>(e,n=bn)=>(!Uu||t==="sp")&&fp(t,(...r)=>e(...r),n),K4=Gs("bm"),V0=Gs("m"),Y4=Gs("bu"),Q4=Gs("u"),gb=Gs("bum"),mb=Gs("um"),yb=Gs("sp"),X4=Gs("rtg"),J4=Gs("rtc");function Z4(t,e=bn){fp("ec",t,e)}function A5(t,e){const n=Gr;if(n===null)return t;const r=mp(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,c,u=en]=e[s];o&&(wt(o)&&(o={mounted:o,updated:o}),o.deep&&oa(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:c,modifiers:u}))}return t}function Qo(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let c=a.dir[r];c&&(cl(),ui(c,n,8,[t.el,a,t,e]),ll())}}const vb="components";function ba(t,e){return tT(vb,t,!0,e)||t}const eT=Symbol();function tT(t,e,n=!0,r=!1){const i=Gr||bn;if(i){const s=i.type;if(t===vb){const a=LT(s,!1);if(a&&(a===e||a===fs(e)||a===op(fs(e))))return s}const o=S5(i[t]||s[t],e)||S5(i.appContext[t],e);return!o&&r?s:o}}function S5(t,e){return t&&(t[e]||t[fs(e)]||t[op(fs(e))])}function da(t,e,n,r){let i;const s=n&&n[r];if(pt(t)||Fn(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(an(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const u=o[a];i[a]=e(t[u],u,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}const e1=t=>t?xb(t)?mp(t)||t.proxy:e1(t.parent):null,wu=_r(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>e1(t.parent),$root:t=>e1(t.root),$emit:t=>t.emit,$options:t=>$0(t),$forceUpdate:t=>t.f||(t.f=()=>q0(t.update)),$nextTick:t=>t.n||(t.n=ib.bind(t.proxy)),$watch:t=>q4.bind(t)}),rm=(t,e)=>t!==en&&!t.__isScriptSetup&&Pt(t,e),nT={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(rm(r,e))return o[e]=1,r[e];if(i!==en&&Pt(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&Pt(u,e))return o[e]=3,s[e];if(n!==en&&Pt(n,e))return o[e]=4,n[e];t1&&(o[e]=0)}}const f=wu[e];let d,y;if(f)return e==="$attrs"&&Br(t,"get",e),f(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==en&&Pt(n,e))return o[e]=4,n[e];if(y=c.config.globalProperties,Pt(y,e))return y[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return rm(i,e)?(i[e]=n,!0):r!==en&&Pt(r,e)?(r[e]=n,!0):Pt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==en&&Pt(t,o)||rm(e,o)||(a=s[0])&&Pt(a,o)||Pt(r,o)||Pt(wu,o)||Pt(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Pt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let t1=!0;function rT(t){const e=$0(t),n=t.proxy,r=t.ctx;t1=!1,e.beforeCreate&&E5(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:c,inject:u,created:f,beforeMount:d,mounted:y,beforeUpdate:g,updated:w,activated:_,deactivated:T,beforeDestroy:S,beforeUnmount:k,destroyed:j,unmounted:Y,render:oe,renderTracked:me,renderTriggered:te,errorCaptured:F,serverPrefetch:ge,expose:pe,inheritAttrs:D,components:O,directives:G,filters:H}=e;if(u&&iT(u,r,null,t.appContext.config.unwrapInjectedRef),o)for(const de in o){const ne=o[de];wt(ne)&&(r[de]=ne.bind(n))}if(i){const de=i.call(n,n);an(de)&&(t.data=ch(de))}if(t1=!0,s)for(const de in s){const ne=s[de],_e=wt(ne)?ne.bind(n,n):wt(ne.get)?ne.get.bind(n,n):Di,we=!wt(ne)&&wt(ne.set)?ne.set.bind(n):Di,Fe=ai({get:_e,set:we});Object.defineProperty(r,de,{enumerable:!0,configurable:!0,get:()=>Fe.value,set:E=>Fe.value=E})}if(a)for(const de in a)_b(a[de],r,n,de);if(c){const de=wt(c)?c.call(n):c;Reflect.ownKeys(de).forEach(ne=>{Yf(ne,de[ne])})}f&&E5(f,t,"c");function le(de,ne){pt(ne)?ne.forEach(_e=>de(_e.bind(n))):ne&&de(ne.bind(n))}if(le(K4,d),le(V0,y),le(Y4,g),le(Q4,w),le(H4,_),le(W4,T),le(Z4,F),le(J4,me),le(X4,te),le(gb,k),le(mb,Y),le(yb,ge),pt(pe))if(pe.length){const de=t.exposed||(t.exposed={});pe.forEach(ne=>{Object.defineProperty(de,ne,{get:()=>n[ne],set:_e=>n[ne]=_e})})}else t.exposed||(t.exposed={});oe&&t.render===Di&&(t.render=oe),D!=null&&(t.inheritAttrs=D),O&&(t.components=O),G&&(t.directives=G)}function iT(t,e,n=Di,r=!1){pt(t)&&(t=n1(t));for(const i in t){const s=t[i];let o;an(s)?"default"in s?o=Mi(s.from||i,s.default,!0):o=Mi(s.from||i):o=Mi(s),Dn(o)&&r?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[i]=o}}function E5(t,e,n){ui(pt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function _b(t,e,n,r){const i=r.includes(".")?ub(n,r):()=>n[r];if(Fn(t)){const s=e[t];wt(s)&&_u(i,s)}else if(wt(t))_u(i,t.bind(n));else if(an(t))if(pt(t))t.forEach(s=>_b(s,e,n,r));else{const s=wt(t.handler)?t.handler.bind(n):e[t.handler];wt(s)&&_u(i,s,t)}}function $0(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let c;return a?c=a:!i.length&&!n&&!r?c=e:(c={},i.length&&i.forEach(u=>vd(c,u,o,!0)),vd(c,e,o)),an(e)&&s.set(e,c),c}function vd(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&vd(t,s,n,!0),i&&i.forEach(o=>vd(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=sT[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const sT={data:I5,props:Jo,emits:Jo,methods:Jo,computed:Jo,beforeCreate:Sr,created:Sr,beforeMount:Sr,mounted:Sr,beforeUpdate:Sr,updated:Sr,beforeDestroy:Sr,beforeUnmount:Sr,destroyed:Sr,unmounted:Sr,activated:Sr,deactivated:Sr,errorCaptured:Sr,serverPrefetch:Sr,components:Jo,directives:Jo,watch:aT,provide:I5,inject:oT};function I5(t,e){return e?t?function(){return _r(wt(t)?t.call(this,this):t,wt(e)?e.call(this,this):e)}:e:t}function oT(t,e){return Jo(n1(t),n1(e))}function n1(t){if(pt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Sr(t,e){return t?[...new Set([].concat(t,e))]:e}function Jo(t,e){return t?_r(_r(Object.create(null),t),e):e}function aT(t,e){if(!t)return e;if(!e)return t;const n=_r(Object.create(null),t);for(const r in e)n[r]=Sr(t[r],e[r]);return n}function cT(t,e,n,r=!1){const i={},s={};gd(s,pp,1),t.propsDefaults=Object.create(null),wb(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:A4(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function lT(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Dt(i),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let d=0;d<f.length;d++){let y=f[d];if(lp(t.emitsOptions,y))continue;const g=e[y];if(c)if(Pt(s,y))g!==s[y]&&(s[y]=g,u=!0);else{const w=fs(y);i[w]=r1(c,a,w,g,t,!1)}else g!==s[y]&&(s[y]=g,u=!0)}}}else{wb(t,e,i,s)&&(u=!0);let f;for(const d in a)(!e||!Pt(e,d)&&((f=al(d))===d||!Pt(e,f)))&&(c?n&&(n[d]!==void 0||n[f]!==void 0)&&(i[d]=r1(c,a,d,void 0,t,!0)):delete i[d]);if(s!==a)for(const d in s)(!e||!Pt(e,d))&&(delete s[d],u=!0)}u&&qs(t,"set","$attrs")}function wb(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Gf(c))continue;const u=e[c];let f;i&&Pt(i,f=fs(c))?!s||!s.includes(f)?n[f]=u:(a||(a={}))[f]=u:lp(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(s){const c=Dt(n),u=a||en;for(let f=0;f<s.length;f++){const d=s[f];n[d]=r1(i,c,d,u[d],t,!Pt(u,d))}}return o}function r1(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Pt(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&wt(c)){const{propsDefaults:u}=i;n in u?r=u[n]:(Gc(i),r=u[n]=c.call(null,e),pa())}else r=c}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===al(n))&&(r=!0))}return r}function bb(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let c=!1;if(!wt(t)){const f=d=>{c=!0;const[y,g]=bb(d,e,!0);_r(o,y),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!s&&!c)return an(t)&&r.set(t,Rc),Rc;if(pt(s))for(let f=0;f<s.length;f++){const d=fs(s[f]);N5(d)&&(o[d]=en)}else if(s)for(const f in s){const d=fs(f);if(N5(d)){const y=s[f],g=o[d]=pt(y)||wt(y)?{type:y}:Object.assign({},y);if(g){const w=x5(Boolean,g.type),_=x5(String,g.type);g[0]=w>-1,g[1]=_<0||w<_,(w>-1||Pt(g,"default"))&&a.push(d)}}}const u=[o,a];return an(t)&&r.set(t,u),u}function N5(t){return t[0]!=="$"}function T5(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function C5(t,e){return T5(t)===T5(e)}function x5(t,e){return pt(e)?e.findIndex(n=>C5(n,t)):wt(e)&&C5(e,t)?0:-1}const Ab=t=>t[0]==="_"||t==="$stable",z0=t=>pt(t)?t.map(es):[es(t)],uT=(t,e,n)=>{if(e._n)return e;const r=Mr((...i)=>z0(e(...i)),n);return r._c=!1,r},Sb=(t,e,n)=>{const r=t._ctx;for(const i in t){if(Ab(i))continue;const s=t[i];if(wt(s))e[i]=uT(i,s,r);else if(s!=null){const o=z0(s);e[i]=()=>o}}},Eb=(t,e)=>{const n=z0(e);t.slots.default=()=>n},hT=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Dt(e),gd(e,"_",n)):Sb(e,t.slots={})}else t.slots={},e&&Eb(t,e);gd(t.slots,pp,1)},fT=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=en;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(_r(i,e),!n&&a===1&&delete i._):(s=!e.$stable,Sb(e,i)),o=e}else e&&(Eb(t,e),o={default:1});if(s)for(const a in i)!Ab(a)&&!(a in o)&&delete i[a]};function Ib(){return{app:null,config:{isNativeTag:UN,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let dT=0;function pT(t,e){return function(r,i=null){wt(r)||(r=Object.assign({},r)),i!=null&&!an(i)&&(i=null);const s=Ib(),o=new Set;let a=!1;const c=s.app={_uid:dT++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:OT,get config(){return s.config},set config(u){},use(u,...f){return o.has(u)||(u&&wt(u.install)?(o.add(u),u.install(c,...f)):wt(u)&&(o.add(u),u(c,...f))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,f){return f?(s.components[u]=f,c):s.components[u]},directive(u,f){return f?(s.directives[u]=f,c):s.directives[u]},mount(u,f,d){if(!a){const y=zt(r,i);return y.appContext=s,f&&e?e(y,u):t(y,u,d),a=!0,c._container=u,u.__vue_app__=c,mp(y.component)||y.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return s.provides[u]=f,c}};return c}}function i1(t,e,n,r,i=!1){if(pt(t)){t.forEach((y,g)=>i1(y,e&&(pt(e)?e[g]:e),n,r,i));return}if(Qf(r)&&!i)return;const s=r.shapeFlag&4?mp(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:c}=t,u=e&&e.r,f=a.refs===en?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==c&&(Fn(u)?(f[u]=null,Pt(d,u)&&(d[u]=null)):Dn(u)&&(u.value=null)),wt(c))Io(c,a,12,[o,f]);else{const y=Fn(c),g=Dn(c);if(y||g){const w=()=>{if(t.f){const _=y?Pt(d,c)?d[c]:f[c]:c.value;i?pt(_)&&k0(_,s):pt(_)?_.includes(s)||_.push(s):y?(f[c]=[s],Pt(d,c)&&(d[c]=f[c])):(c.value=[s],t.k&&(f[t.k]=c.value))}else y?(f[c]=o,Pt(d,c)&&(d[c]=o)):g&&(c.value=o,t.k&&(f[t.k]=o))};o?(w.id=-1,Dr(w,n)):w()}}}const Dr=U4;function gT(t){return mT(t)}function mT(t,e){const n=WN();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:c,setText:u,setElementText:f,parentNode:d,nextSibling:y,setScopeId:g=Di,insertStaticContent:w}=t,_=(R,B,re,z=null,x=null,Ie=null,be=!1,ie=null,fe=!!B.dynamicChildren)=>{if(R===B)return;R&&!ra(R,B)&&(z=W(R),E(R,x,Ie,!0),R=null),B.patchFlag===-2&&(fe=!1,B.dynamicChildren=null);const{type:ce,ref:Ae,shapeFlag:Te}=B;switch(ce){case dp:T(R,B,re,z);break;case Fi:S(R,B,re,z);break;case Xf:R==null&&k(B,re,z,be);break;case sn:O(R,B,re,z,x,Ie,be,ie,fe);break;default:Te&1?oe(R,B,re,z,x,Ie,be,ie,fe):Te&6?G(R,B,re,z,x,Ie,be,ie,fe):(Te&64||Te&128)&&ce.process(R,B,re,z,x,Ie,be,ie,fe,se)}Ae!=null&&x&&i1(Ae,R&&R.ref,Ie,B||R,!B)},T=(R,B,re,z)=>{if(R==null)r(B.el=a(B.children),re,z);else{const x=B.el=R.el;B.children!==R.children&&u(x,B.children)}},S=(R,B,re,z)=>{R==null?r(B.el=c(B.children||""),re,z):B.el=R.el},k=(R,B,re,z)=>{[R.el,R.anchor]=w(R.children,B,re,z,R.el,R.anchor)},j=({el:R,anchor:B},re,z)=>{let x;for(;R&&R!==B;)x=y(R),r(R,re,z),R=x;r(B,re,z)},Y=({el:R,anchor:B})=>{let re;for(;R&&R!==B;)re=y(R),i(R),R=re;i(B)},oe=(R,B,re,z,x,Ie,be,ie,fe)=>{be=be||B.type==="svg",R==null?me(B,re,z,x,Ie,be,ie,fe):ge(R,B,x,Ie,be,ie,fe)},me=(R,B,re,z,x,Ie,be,ie)=>{let fe,ce;const{type:Ae,props:Te,shapeFlag:Pe,transition:Me,dirs:Ve}=R;if(fe=R.el=o(R.type,Ie,Te&&Te.is,Te),Pe&8?f(fe,R.children):Pe&16&&F(R.children,fe,null,z,x,Ie&&Ae!=="foreignObject",be,ie),Ve&&Qo(R,null,z,"created"),te(fe,R,R.scopeId,be,z),Te){for(const Qe in Te)Qe!=="value"&&!Gf(Qe)&&s(fe,Qe,null,Te[Qe],Ie,R.children,z,x,$);"value"in Te&&s(fe,"value",null,Te.value),(ce=Te.onVnodeBeforeMount)&&Ji(ce,z,R)}Ve&&Qo(R,null,z,"beforeMount");const Ke=(!x||x&&!x.pendingBranch)&&Me&&!Me.persisted;Ke&&Me.beforeEnter(fe),r(fe,B,re),((ce=Te&&Te.onVnodeMounted)||Ke||Ve)&&Dr(()=>{ce&&Ji(ce,z,R),Ke&&Me.enter(fe),Ve&&Qo(R,null,z,"mounted")},x)},te=(R,B,re,z,x)=>{if(re&&g(R,re),z)for(let Ie=0;Ie<z.length;Ie++)g(R,z[Ie]);if(x){let Ie=x.subTree;if(B===Ie){const be=x.vnode;te(R,be,be.scopeId,be.slotScopeIds,x.parent)}}},F=(R,B,re,z,x,Ie,be,ie,fe=0)=>{for(let ce=fe;ce<R.length;ce++){const Ae=R[ce]=ie?yo(R[ce]):es(R[ce]);_(null,Ae,B,re,z,x,Ie,be,ie)}},ge=(R,B,re,z,x,Ie,be)=>{const ie=B.el=R.el;let{patchFlag:fe,dynamicChildren:ce,dirs:Ae}=B;fe|=R.patchFlag&16;const Te=R.props||en,Pe=B.props||en;let Me;re&&Xo(re,!1),(Me=Pe.onVnodeBeforeUpdate)&&Ji(Me,re,B,R),Ae&&Qo(B,R,re,"beforeUpdate"),re&&Xo(re,!0);const Ve=x&&B.type!=="foreignObject";if(ce?pe(R.dynamicChildren,ce,ie,re,z,Ve,Ie):be||ne(R,B,ie,null,re,z,Ve,Ie,!1),fe>0){if(fe&16)D(ie,B,Te,Pe,re,z,x);else if(fe&2&&Te.class!==Pe.class&&s(ie,"class",null,Pe.class,x),fe&4&&s(ie,"style",Te.style,Pe.style,x),fe&8){const Ke=B.dynamicProps;for(let Qe=0;Qe<Ke.length;Qe++){const We=Ke[Qe],st=Te[We],Be=Pe[We];(Be!==st||We==="value")&&s(ie,We,st,Be,x,R.children,re,z,$)}}fe&1&&R.children!==B.children&&f(ie,B.children)}else!be&&ce==null&&D(ie,B,Te,Pe,re,z,x);((Me=Pe.onVnodeUpdated)||Ae)&&Dr(()=>{Me&&Ji(Me,re,B,R),Ae&&Qo(B,R,re,"updated")},z)},pe=(R,B,re,z,x,Ie,be)=>{for(let ie=0;ie<B.length;ie++){const fe=R[ie],ce=B[ie],Ae=fe.el&&(fe.type===sn||!ra(fe,ce)||fe.shapeFlag&70)?d(fe.el):re;_(fe,ce,Ae,null,z,x,Ie,be,!0)}},D=(R,B,re,z,x,Ie,be)=>{if(re!==z){if(re!==en)for(const ie in re)!Gf(ie)&&!(ie in z)&&s(R,ie,re[ie],null,be,B.children,x,Ie,$);for(const ie in z){if(Gf(ie))continue;const fe=z[ie],ce=re[ie];fe!==ce&&ie!=="value"&&s(R,ie,ce,fe,be,B.children,x,Ie,$)}"value"in z&&s(R,"value",re.value,z.value)}},O=(R,B,re,z,x,Ie,be,ie,fe)=>{const ce=B.el=R?R.el:a(""),Ae=B.anchor=R?R.anchor:a("");let{patchFlag:Te,dynamicChildren:Pe,slotScopeIds:Me}=B;Me&&(ie=ie?ie.concat(Me):Me),R==null?(r(ce,re,z),r(Ae,re,z),F(B.children,re,Ae,x,Ie,be,ie,fe)):Te>0&&Te&64&&Pe&&R.dynamicChildren?(pe(R.dynamicChildren,Pe,re,x,Ie,be,ie),(B.key!=null||x&&B===x.subTree)&&Nb(R,B,!0)):ne(R,B,re,Ae,x,Ie,be,ie,fe)},G=(R,B,re,z,x,Ie,be,ie,fe)=>{B.slotScopeIds=ie,R==null?B.shapeFlag&512?x.ctx.activate(B,re,z,be,fe):H(B,re,z,x,Ie,be,fe):ye(R,B,fe)},H=(R,B,re,z,x,Ie,be)=>{const ie=R.component=NT(R,z,x);if(hp(R)&&(ie.ctx.renderer=se),TT(ie),ie.asyncDep){if(x&&x.registerDep(ie,le),!R.el){const fe=ie.subTree=zt(Fi);S(null,fe,B,re)}return}le(ie,R,B,re,x,Ie,be)},ye=(R,B,re)=>{const z=B.component=R.component;if(F4(R,B,re))if(z.asyncDep&&!z.asyncResolved){de(z,B,re);return}else z.next=B,x4(z.update),z.update();else B.el=R.el,z.vnode=B},le=(R,B,re,z,x,Ie,be)=>{const ie=()=>{if(R.isMounted){let{next:Ae,bu:Te,u:Pe,parent:Me,vnode:Ve}=R,Ke=Ae,Qe;Xo(R,!1),Ae?(Ae.el=Ve.el,de(R,Ae,be)):Ae=Ve,Te&&Kf(Te),(Qe=Ae.props&&Ae.props.onVnodeBeforeUpdate)&&Ji(Qe,Me,Ae,Ve),Xo(R,!0);const We=tm(R),st=R.subTree;R.subTree=We,_(st,We,d(st.el),W(st),R,x,Ie),Ae.el=We.el,Ke===null&&B4(R,We.el),Pe&&Dr(Pe,x),(Qe=Ae.props&&Ae.props.onVnodeUpdated)&&Dr(()=>Ji(Qe,Me,Ae,Ve),x)}else{let Ae;const{el:Te,props:Pe}=B,{bm:Me,m:Ve,parent:Ke}=R,Qe=Qf(B);if(Xo(R,!1),Me&&Kf(Me),!Qe&&(Ae=Pe&&Pe.onVnodeBeforeMount)&&Ji(Ae,Ke,B),Xo(R,!0),Te&&Ee){const We=()=>{R.subTree=tm(R),Ee(Te,R.subTree,R,x,null)};Qe?B.type.__asyncLoader().then(()=>!R.isUnmounted&&We()):We()}else{const We=R.subTree=tm(R);_(null,We,re,z,R,x,Ie),B.el=We.el}if(Ve&&Dr(Ve,x),!Qe&&(Ae=Pe&&Pe.onVnodeMounted)){const We=B;Dr(()=>Ji(Ae,Ke,We),x)}(B.shapeFlag&256||Ke&&Qf(Ke.vnode)&&Ke.vnode.shapeFlag&256)&&R.a&&Dr(R.a,x),R.isMounted=!0,B=re=z=null}},fe=R.effect=new O0(ie,()=>q0(ce),R.scope),ce=R.update=()=>fe.run();ce.id=R.uid,Xo(R,!0),ce()},de=(R,B,re)=>{B.component=R;const z=R.vnode.props;R.vnode=B,R.next=null,lT(R,B.props,z,re),fT(R,B.children,re),cl(),_5(),ll()},ne=(R,B,re,z,x,Ie,be,ie,fe=!1)=>{const ce=R&&R.children,Ae=R?R.shapeFlag:0,Te=B.children,{patchFlag:Pe,shapeFlag:Me}=B;if(Pe>0){if(Pe&128){we(ce,Te,re,z,x,Ie,be,ie,fe);return}else if(Pe&256){_e(ce,Te,re,z,x,Ie,be,ie,fe);return}}Me&8?(Ae&16&&$(ce,x,Ie),Te!==ce&&f(re,Te)):Ae&16?Me&16?we(ce,Te,re,z,x,Ie,be,ie,fe):$(ce,x,Ie,!0):(Ae&8&&f(re,""),Me&16&&F(Te,re,z,x,Ie,be,ie,fe))},_e=(R,B,re,z,x,Ie,be,ie,fe)=>{R=R||Rc,B=B||Rc;const ce=R.length,Ae=B.length,Te=Math.min(ce,Ae);let Pe;for(Pe=0;Pe<Te;Pe++){const Me=B[Pe]=fe?yo(B[Pe]):es(B[Pe]);_(R[Pe],Me,re,null,x,Ie,be,ie,fe)}ce>Ae?$(R,x,Ie,!0,!1,Te):F(B,re,z,x,Ie,be,ie,fe,Te)},we=(R,B,re,z,x,Ie,be,ie,fe)=>{let ce=0;const Ae=B.length;let Te=R.length-1,Pe=Ae-1;for(;ce<=Te&&ce<=Pe;){const Me=R[ce],Ve=B[ce]=fe?yo(B[ce]):es(B[ce]);if(ra(Me,Ve))_(Me,Ve,re,null,x,Ie,be,ie,fe);else break;ce++}for(;ce<=Te&&ce<=Pe;){const Me=R[Te],Ve=B[Pe]=fe?yo(B[Pe]):es(B[Pe]);if(ra(Me,Ve))_(Me,Ve,re,null,x,Ie,be,ie,fe);else break;Te--,Pe--}if(ce>Te){if(ce<=Pe){const Me=Pe+1,Ve=Me<Ae?B[Me].el:z;for(;ce<=Pe;)_(null,B[ce]=fe?yo(B[ce]):es(B[ce]),re,Ve,x,Ie,be,ie,fe),ce++}}else if(ce>Pe)for(;ce<=Te;)E(R[ce],x,Ie,!0),ce++;else{const Me=ce,Ve=ce,Ke=new Map;for(ce=Ve;ce<=Pe;ce++){const _t=B[ce]=fe?yo(B[ce]):es(B[ce]);_t.key!=null&&Ke.set(_t.key,ce)}let Qe,We=0;const st=Pe-Ve+1;let Be=!1,Ln=0;const St=new Array(st);for(ce=0;ce<st;ce++)St[ce]=0;for(ce=Me;ce<=Te;ce++){const _t=R[ce];if(We>=st){E(_t,x,Ie,!0);continue}let Nt;if(_t.key!=null)Nt=Ke.get(_t.key);else for(Qe=Ve;Qe<=Pe;Qe++)if(St[Qe-Ve]===0&&ra(_t,B[Qe])){Nt=Qe;break}Nt===void 0?E(_t,x,Ie,!0):(St[Nt-Ve]=ce+1,Nt>=Ln?Ln=Nt:Be=!0,_(_t,B[Nt],re,null,x,Ie,be,ie,fe),We++)}const Tr=Be?yT(St):Rc;for(Qe=Tr.length-1,ce=st-1;ce>=0;ce--){const _t=Ve+ce,Nt=B[_t],Ur=_t+1<Ae?B[_t+1].el:z;St[ce]===0?_(null,Nt,re,Ur,x,Ie,be,ie,fe):Be&&(Qe<0||ce!==Tr[Qe]?Fe(Nt,re,Ur,2):Qe--)}}},Fe=(R,B,re,z,x=null)=>{const{el:Ie,type:be,transition:ie,children:fe,shapeFlag:ce}=R;if(ce&6){Fe(R.component.subTree,B,re,z);return}if(ce&128){R.suspense.move(B,re,z);return}if(ce&64){be.move(R,B,re,se);return}if(be===sn){r(Ie,B,re);for(let Te=0;Te<fe.length;Te++)Fe(fe[Te],B,re,z);r(R.anchor,B,re);return}if(be===Xf){j(R,B,re);return}if(z!==2&&ce&1&&ie)if(z===0)ie.beforeEnter(Ie),r(Ie,B,re),Dr(()=>ie.enter(Ie),x);else{const{leave:Te,delayLeave:Pe,afterLeave:Me}=ie,Ve=()=>r(Ie,B,re),Ke=()=>{Te(Ie,()=>{Ve(),Me&&Me()})};Pe?Pe(Ie,Ve,Ke):Ke()}else r(Ie,B,re)},E=(R,B,re,z=!1,x=!1)=>{const{type:Ie,props:be,ref:ie,children:fe,dynamicChildren:ce,shapeFlag:Ae,patchFlag:Te,dirs:Pe}=R;if(ie!=null&&i1(ie,null,re,R,!0),Ae&256){B.ctx.deactivate(R);return}const Me=Ae&1&&Pe,Ve=!Qf(R);let Ke;if(Ve&&(Ke=be&&be.onVnodeBeforeUnmount)&&Ji(Ke,B,R),Ae&6)P(R.component,re,z);else{if(Ae&128){R.suspense.unmount(re,z);return}Me&&Qo(R,null,B,"beforeUnmount"),Ae&64?R.type.remove(R,B,re,x,se,z):ce&&(Ie!==sn||Te>0&&Te&64)?$(ce,B,re,!1,!0):(Ie===sn&&Te&384||!x&&Ae&16)&&$(fe,B,re),z&&U(R)}(Ve&&(Ke=be&&be.onVnodeUnmounted)||Me)&&Dr(()=>{Ke&&Ji(Ke,B,R),Me&&Qo(R,null,B,"unmounted")},re)},U=R=>{const{type:B,el:re,anchor:z,transition:x}=R;if(B===sn){V(re,z);return}if(B===Xf){Y(R);return}const Ie=()=>{i(re),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(R.shapeFlag&1&&x&&!x.persisted){const{leave:be,delayLeave:ie}=x,fe=()=>be(re,Ie);ie?ie(R.el,Ie,fe):fe()}else Ie()},V=(R,B)=>{let re;for(;R!==B;)re=y(R),i(R),R=re;i(B)},P=(R,B,re)=>{const{bum:z,scope:x,update:Ie,subTree:be,um:ie}=R;z&&Kf(z),x.stop(),Ie&&(Ie.active=!1,E(be,R,B,re)),ie&&Dr(ie,B),Dr(()=>{R.isUnmounted=!0},B),B&&B.pendingBranch&&!B.isUnmounted&&R.asyncDep&&!R.asyncResolved&&R.suspenseId===B.pendingId&&(B.deps--,B.deps===0&&B.resolve())},$=(R,B,re,z=!1,x=!1,Ie=0)=>{for(let be=Ie;be<R.length;be++)E(R[be],B,re,z,x)},W=R=>R.shapeFlag&6?W(R.component.subTree):R.shapeFlag&128?R.suspense.next():y(R.anchor||R.el),J=(R,B,re)=>{R==null?B._vnode&&E(B._vnode,null,null,!0):_(B._vnode||null,R,B,null,null,null,re),_5(),ob(),B._vnode=R},se={p:_,um:E,m:Fe,r:U,mt:H,mc:F,pc:ne,pbc:pe,n:W,o:t};let Le,Ee;return e&&([Le,Ee]=e(se)),{render:J,hydrate:Le,createApp:pT(J,Le)}}function Xo({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Nb(t,e,n=!1){const r=t.children,i=e.children;if(pt(r)&&pt(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=yo(i[s]),a.el=o.el),n||Nb(o,a)),a.type===dp&&(a.el=o.el)}}function yT(t){const e=t.slice(),n=[0];let r,i,s,o,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<u?s=a+1:o=a;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const vT=t=>t.__isTeleport,sn=Symbol(void 0),dp=Symbol(void 0),Fi=Symbol(void 0),Xf=Symbol(void 0),bu=[];let Ri=null;function Ze(t=!1){bu.push(Ri=t?null:[])}function _T(){bu.pop(),Ri=bu[bu.length-1]||null}let ju=1;function k5(t){ju+=t}function Tb(t){return t.dynamicChildren=ju>0?Ri||Rc:null,_T(),ju>0&&Ri&&Ri.push(t),t}function it(t,e,n,r,i,s){return Tb(Ne(t,e,n,r,i,s,!0))}function s1(t,e,n,r,i){return Tb(zt(t,e,n,r,i,!0))}function o1(t){return t?t.__v_isVNode===!0:!1}function ra(t,e){return t.type===e.type&&t.key===e.key}const pp="__vInternal",Cb=({key:t})=>t??null,Jf=({ref:t,ref_key:e,ref_for:n})=>t!=null?Fn(t)||Dn(t)||wt(t)?{i:Gr,r:t,k:e,f:!!n}:t:null;function Ne(t,e=null,n=null,r=0,i=null,s=t===sn?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Cb(e),ref:e&&Jf(e),scopeId:up,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Gr};return a?(H0(c,n),s&128&&t.normalize(c)):n&&(c.shapeFlag|=Fn(n)?8:16),ju>0&&!o&&Ri&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Ri.push(c),c}const zt=wT;function wT(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===eT)&&(t=Fi),o1(t)){const a=Lo(t,e,!0);return n&&H0(a,n),ju>0&&!s&&Ri&&(a.shapeFlag&6?Ri[Ri.indexOf(t)]=a:Ri.push(a)),a.patchFlag|=-2,a}if(RT(t)&&(t=t.__vccOpts),e){e=bT(e);let{class:a,style:c}=e;a&&!Fn(a)&&(e.class=C0(a)),an(c)&&(Yw(c)&&!pt(c)&&(c=_r({},c)),e.style=T0(c))}const o=Fn(t)?1:j4(t)?128:vT(t)?64:an(t)?4:wt(t)?2:0;return Ne(t,e,n,r,i,o,s,!0)}function bT(t){return t?Yw(t)||pp in t?_r({},t):t:null}function Lo(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?ST(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Cb(a),ref:e&&e.ref?n&&i?pt(i)?i.concat(Jf(e)):[i,Jf(e)]:Jf(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==sn?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Lo(t.ssContent),ssFallback:t.ssFallback&&Lo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function lr(t=" ",e=0){return zt(dp,null,t,e)}function AT(t,e){const n=zt(Xf,null,t);return n.staticCount=e,n}function ln(t="",e=!1){return e?(Ze(),s1(Fi,null,t)):zt(Fi,null,t)}function es(t){return t==null||typeof t=="boolean"?zt(Fi):pt(t)?zt(sn,null,t.slice()):typeof t=="object"?yo(t):zt(dp,null,String(t))}function yo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Lo(t)}function H0(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(pt(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),H0(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(pp in e)?e._ctx=Gr:i===3&&Gr&&(Gr.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else wt(e)?(e={default:e,_ctx:Gr},n=32):(e=String(e),r&64?(n=16,e=[lr(e)]):n=8);t.children=e,t.shapeFlag|=n}function ST(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=C0([e.class,r.class]));else if(i==="style")e.style=T0([e.style,r.style]);else if(rp(i)){const s=e[i],o=r[i];o&&s!==o&&!(pt(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Ji(t,e,n,r=null){ui(t,e,7,[n,r])}const ET=Ib();let IT=0;function NT(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||ET,s={uid:IT++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new GN(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bb(r,i),emitsOptions:cb(r,i),emit:null,emitted:null,propsDefaults:en,inheritAttrs:r.inheritAttrs,ctx:en,data:en,props:en,attrs:en,slots:en,refs:en,setupState:en,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=R4.bind(null,s),t.ce&&t.ce(s),s}let bn=null;const gp=()=>bn||Gr,Gc=t=>{bn=t,t.scope.on()},pa=()=>{bn&&bn.scope.off(),bn=null};function xb(t){return t.vnode.shapeFlag&4}let Uu=!1;function TT(t,e=!1){Uu=e;const{props:n,children:r}=t.vnode,i=xb(t);cT(t,n,i,e),hT(t,r);const s=i?CT(t,e):void 0;return Uu=!1,s}function CT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Qw(new Proxy(t.ctx,nT));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?kT(t):null;Gc(t),cl();const s=Io(r,t,0,[t.props,i]);if(ll(),pa(),Ow(s)){if(s.then(pa,pa),e)return s.then(o=>{L5(t,o,e)}).catch(o=>{cp(o,t,0)});t.asyncDep=s}else L5(t,s,e)}else kb(t,e)}function L5(t,e,n){wt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:an(e)&&(t.setupState=tb(e)),kb(t,n)}let R5;function kb(t,e,n){const r=t.type;if(!t.render){if(!e&&R5&&!r.render){const i=r.template||$0(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=r,u=_r(_r({isCustomElement:s,delimiters:a},o),c);r.render=R5(i,u)}}t.render=r.render||Di}Gc(t),cl(),rT(t),ll(),pa()}function xT(t){return new Proxy(t.attrs,{get(e,n){return Br(t,"get","$attrs"),e[n]}})}function kT(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=xT(t))},slots:t.slots,emit:t.emit,expose:e}}function mp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(tb(Qw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in wu)return wu[n](t)},has(e,n){return n in e||n in wu}}))}function LT(t,e=!0){return wt(t)?t.displayName||t.name:t.name||e&&t.__name}function RT(t){return wt(t)&&"__vccOpts"in t}const ai=(t,e)=>N4(t,e,Uu);function Lb(t,e,n){const r=arguments.length;return r===2?an(e)&&!pt(e)?o1(e)?zt(t,null,[e]):zt(t,e):zt(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&o1(n)&&(n=[n]),zt(t,e,n))}const Rb=Symbol(""),PT=()=>Mi(Rb),OT="3.2.47",DT="http://www.w3.org/2000/svg",ia=typeof document<"u"?document:null,P5=ia&&ia.createElement("template"),MT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?ia.createElementNS(DT,t):ia.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>ia.createTextNode(t),createComment:t=>ia.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ia.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{P5.innerHTML=r?`<svg>${t}</svg>`:t;const a=P5.content;if(r){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function FT(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function BT(t,e,n){const r=t.style,i=Fn(n);if(n&&!i){if(e&&!Fn(e))for(const s in e)n[s]==null&&a1(r,s,"");for(const s in n)a1(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const O5=/\s*!important$/;function a1(t,e,n){if(pt(n))n.forEach(r=>a1(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=jT(t,e);O5.test(n)?t.setProperty(al(r),n.replace(O5,""),"important"):t[r]=n}}const D5=["Webkit","Moz","ms"],im={};function jT(t,e){const n=im[e];if(n)return n;let r=fs(e);if(r!=="filter"&&r in t)return im[e]=r;r=op(r);for(let i=0;i<D5.length;i++){const s=D5[i]+r;if(s in t)return im[e]=s}return e}const M5="http://www.w3.org/1999/xlink";function UT(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(M5,e.slice(6,e.length)):t.setAttributeNS(M5,e,n);else{const s=jN(e);n==null||s&&!Lw(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function qT(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const c=n??"";(t.value!==c||t.tagName==="OPTION")&&(t.value=c),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Lw(n):n==null&&c==="string"?(n="",a=!0):c==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function bc(t,e,n,r){t.addEventListener(e,n,r)}function VT(t,e,n,r){t.removeEventListener(e,n,r)}function $T(t,e,n,r,i=null){const s=t._vei||(t._vei={}),o=s[e];if(r&&o)o.value=r;else{const[a,c]=zT(e);if(r){const u=s[e]=GT(r,i);bc(t,a,u,c)}else o&&(VT(t,a,o,c),s[e]=void 0)}}const F5=/(?:Once|Passive|Capture)$/;function zT(t){let e;if(F5.test(t)){e={};let r;for(;r=t.match(F5);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):al(t.slice(2)),e]}let sm=0;const HT=Promise.resolve(),WT=()=>sm||(HT.then(()=>sm=0),sm=Date.now());function GT(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ui(KT(r,n.value),e,5,[r])};return n.value=t,n.attached=WT(),n}function KT(t,e){if(pt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const B5=/^on[a-z]/,YT=(t,e,n,r,i=!1,s,o,a,c)=>{e==="class"?FT(t,r,i):e==="style"?BT(t,n,r):rp(e)?x0(e)||$T(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):QT(t,e,r,i))?qT(t,e,r,s,o,a,c):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),UT(t,e,r,i))};function QT(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&B5.test(e)&&wt(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||B5.test(e)&&Fn(n)?!1:e in t}const XT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};z4.props;const j5=t=>{const e=t.props["onUpdate:modelValue"]||!1;return pt(e)?n=>Kf(e,n):e};function JT(t){t.target.composing=!0}function U5(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const q5={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=j5(i);const s=r||i.props&&i.props.type==="number";bc(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Wm(a)),t._assign(a)}),n&&bc(t,"change",()=>{t.value=t.value.trim()}),e||(bc(t,"compositionstart",JT),bc(t,"compositionend",U5),bc(t,"change",U5))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t._assign=j5(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&Wm(t.value)===e))return;const o=e??"";t.value!==o&&(t.value=o)}},ZT=_r({patchProp:YT},MT);let V5;function eC(){return V5||(V5=gT(ZT))}const tC=(...t)=>{const e=eC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=nC(r);if(!i)return;const s=e._component;!wt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function nC(t){return Fn(t)?document.querySelector(t):t}const yp=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},rC={},Pb=t=>(P4("data-v-56d0c3cf"),t=t(),O4(),t),iC=Pb(()=>Ne("a",{href:"#"},"Politica de privacidad",-1)),sC=Pb(()=>Ne("a",{href:""},"Github",-1));function oC(t,e){const n=ba("copy");return Ze(),it("footer",null,[zt(n,null,{default:Mr(()=>[lr("Autor: David Lpez Tapias")]),_:1}),iC,sC])}const aC=yp(rC,[["render",oC],["__scopeId","data-v-56d0c3cf"]]);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e=function(t,e){if(!t)throw ul(e)},ul=function(t){return new Error("Firebase Database ("+Ob.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,f=s>>2,d=(s&3)<<4|a>>4;let y=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(y=64)),r.push(n[f],n[d],n[y],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Db(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw Error();const y=s<<2|a>>4;if(r.push(y),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const w=u<<6&192|d;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Mb=function(t){const e=Db(t);return vp.encodeByteArray(e,!0)},_d=function(t){return Mb(t).replace(/\./g,"")},wd=function(t){try{return vp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t){return Fb(void 0,t)}function Fb(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!uC(n)||(t[n]=Fb(t[n],e[n]));return t}function uC(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=()=>hC().__FIREBASE_DEFAULTS__,dC=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wd(t[1]);return e&&JSON.parse(e)},_p=()=>{try{return fC()||dC()||pC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bb=t=>{var e,n;return(n=(e=_p())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jb=t=>{const e=Bb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gC=()=>{var t;return(t=_p())===null||t===void 0?void 0:t.config},Ub=t=>{var e;return(e=_p())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[_d(JSON.stringify(n)),_d(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wr())}function mC(){var t;const e=(t=_p())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Vb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vC(){const t=wr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $b(){return Ob.NODE_ADMIN===!0}function zb(){try{return typeof indexedDB=="object"}catch{return!1}}function _C(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="FirebaseError";class ys extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wC,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hl.prototype.create)}}class hl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?bC(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ys(i,a,r)}}function bC(t,e){return t.replace(AC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const AC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){return JSON.parse(t)}function Jn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Vu(wd(s[0])||""),n=Vu(wd(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},SC=function(t){const e=Hb(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},EC=function(t){const e=Hb(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Kc(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function c1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bd(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ad(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if($5(s)&&$5(o)){if(!Ad(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $5(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const y=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(y<<1|y>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,f;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),f=1518500249):(u=s^o^a,f=1859775393):d<60?(u=s&o|a&(s|o),f=2400959708):(u=s^o^a,f=3395469782);const y=(i<<5|i>>>27)+u+c+f+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=y}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function NC(t,e){const n=new TC(t,e);return n.subscribe.bind(n)}class TC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=om),i.error===void 0&&(i.error=om),i.complete===void 0&&(i.complete=om);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function om(){}function xC(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,$e(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t){return t&&t._delegate?t._delegate:t}class Ui{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PC(e))try{this.getOrInitializeService({instanceIdentifier:Zo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zo){return this.instances.has(e)}getOptions(e=Zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zo){return this.component?this.component.multipleInstances?e:Zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RC(t){return t===Zo?void 0:t}function PC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ot||(Ot={}));const DC={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},MC=Ot.INFO,FC={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},BC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=FC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lh{constructor(e){this.name=e,this._logLevel=MC,this._logHandler=BC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...e),this._logHandler(this,Ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...e),this._logHandler(this,Ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...e),this._logHandler(this,Ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...e),this._logHandler(this,Ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...e),this._logHandler(this,Ot.ERROR,...e)}}const jC=(t,e)=>e.some(n=>t instanceof n);let z5,H5;function UC(){return z5||(z5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qC(){return H5||(H5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wb=new WeakMap,l1=new WeakMap,Gb=new WeakMap,am=new WeakMap,G0=new WeakMap;function VC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(No(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Wb.set(n,t)}).catch(()=>{}),G0.set(e,t),e}function $C(t){if(l1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});l1.set(t,e)}let u1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return l1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Gb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return No(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zC(t){u1=t(u1)}function HC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cm(this),e,...n);return Gb.set(r,e.sort?e.sort():[e]),No(r)}:qC().includes(t)?function(...e){return t.apply(cm(this),e),No(Wb.get(this))}:function(...e){return No(t.apply(cm(this),e))}}function WC(t){return typeof t=="function"?HC(t):(t instanceof IDBTransaction&&$C(t),jC(t,UC())?new Proxy(t,u1):t)}function No(t){if(t instanceof IDBRequest)return VC(t);if(am.has(t))return am.get(t);const e=WC(t);return e!==t&&(am.set(t,e),G0.set(e,t)),e}const cm=t=>G0.get(t);function GC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=No(o);return r&&o.addEventListener("upgradeneeded",c=>{r(No(o.result),c.oldVersion,c.newVersion,No(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}const KC=["get","getKey","getAll","getAllKeys","count"],YC=["put","add","delete","clear"],lm=new Map;function W5(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lm.get(e))return lm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=YC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KC.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return lm.set(e,s),s}zC(t=>({...t,get:(e,n,r)=>W5(e,n)||t.get(e,n,r),has:(e,n)=>!!W5(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const h1="@firebase/app",G5="0.9.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new lh("@firebase/app"),JC="@firebase/app-compat",ZC="@firebase/analytics-compat",ex="@firebase/analytics",tx="@firebase/app-check-compat",nx="@firebase/app-check",rx="@firebase/auth",ix="@firebase/auth-compat",sx="@firebase/database",ox="@firebase/database-compat",ax="@firebase/functions",cx="@firebase/functions-compat",lx="@firebase/installations",ux="@firebase/installations-compat",hx="@firebase/messaging",fx="@firebase/messaging-compat",dx="@firebase/performance",px="@firebase/performance-compat",gx="@firebase/remote-config",mx="@firebase/remote-config-compat",yx="@firebase/storage",vx="@firebase/storage-compat",_x="@firebase/firestore",wx="@firebase/firestore-compat",bx="firebase",Ax="9.17.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="[DEFAULT]",Sx={[h1]:"fire-core",[JC]:"fire-core-compat",[ex]:"fire-analytics",[ZC]:"fire-analytics-compat",[nx]:"fire-app-check",[tx]:"fire-app-check-compat",[rx]:"fire-auth",[ix]:"fire-auth-compat",[sx]:"fire-rtdb",[ox]:"fire-rtdb-compat",[ax]:"fire-fn",[cx]:"fire-fn-compat",[lx]:"fire-iid",[ux]:"fire-iid-compat",[hx]:"fire-fcm",[fx]:"fire-fcm-compat",[dx]:"fire-perf",[px]:"fire-perf-compat",[gx]:"fire-rc",[mx]:"fire-rc-compat",[yx]:"fire-gcs",[vx]:"fire-gcs-compat",[_x]:"fire-fst",[wx]:"fire-fst-compat","fire-js":"fire-js",[bx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=new Map,d1=new Map;function Ex(t,e){try{t.container.addComponent(e)}catch(n){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ds(t){const e=t.name;if(d1.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;d1.set(e,t);for(const n of Sd.values())Ex(n,t);return!0}function bp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},To=new hl("app","Firebase",Ix);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw To.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=Ax;function Kb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:f1,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw To.create("bad-app-name",{appName:String(i)});if(n||(n=gC()),!n)throw To.create("no-options");const s=Sd.get(i);if(s){if(Ad(n,s.options)&&Ad(r,s.config))return s;throw To.create("duplicate-app",{appName:i})}const o=new OC(i);for(const c of d1.values())o.addComponent(c);const a=new Nx(n,r,o);return Sd.set(i,a),a}function Ap(t=f1){const e=Sd.get(t);if(!e&&t===f1)return Kb();if(!e)throw To.create("no-app",{appName:t});return e}function Yr(t,e,n){var r;let i=(r=Sx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Aa.warn(a.join(" "));return}ds(new Ui(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="firebase-heartbeat-database",Cx=1,$u="firebase-heartbeat-store";let um=null;function Yb(){return um||(um=GC(Tx,Cx,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($u)}}}).catch(t=>{throw To.create("idb-open",{originalErrorMessage:t.message})})),um}async function xx(t){try{return(await Yb()).transaction($u).objectStore($u).get(Qb(t))}catch(e){if(e instanceof ys)Aa.warn(e.message);else{const n=To.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Aa.warn(n.message)}}}async function K5(t,e){try{const r=(await Yb()).transaction($u,"readwrite");return await r.objectStore($u).put(e,Qb(t)),r.done}catch(n){if(n instanceof ys)Aa.warn(n.message);else{const r=To.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Aa.warn(r.message)}}}function Qb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=1024,Lx=30*24*60*60*1e3;class Rx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ox(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Y5();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=Lx}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Y5(),{heartbeatsToSend:n,unsentEntries:r}=Px(this._heartbeatsCache.heartbeats),i=_d(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Y5(){return new Date().toISOString().substring(0,10)}function Px(t,e=kx){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Q5(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Q5(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ox{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zb()?_C().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await xx(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return K5(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return K5(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Q5(t){return _d(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t){ds(new Ui("platform-logger",e=>new QC(e),"PRIVATE")),ds(new Ui("heartbeat",e=>new Rx(e),"PRIVATE")),Yr(h1,G5,t),Yr(h1,G5,"esm2017"),Yr("fire-js","")}Dx("");function K0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Xb(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mx=Xb,Jb=new hl("auth","Firebase",Xb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5=new lh("@firebase/auth");function Zf(t,...e){X5.logLevel<=Ot.ERROR&&X5.error(`Auth (${Oa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t,...e){throw Y0(t,...e)}function os(t,...e){return Y0(t,...e)}function Zb(t,e,n){const r=Object.assign(Object.assign({},Mx()),{[e]:n});return new hl("auth","Firebase",r).create(e,{appName:t.name})}function Fx(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&hi(t,"argument-error"),Zb(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Y0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Jb.create(t,...e)}function at(t,e,...n){if(!t)throw Y0(e,...n)}function Os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zf(e),new Error(e)}function Vs(t,e){t||Os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=new Map;function Ds(t){Vs(t instanceof Function,"Expected a class definition");let e=J5.get(t);return e?(Vs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,J5.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e){const n=bp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ad(s,e??{}))return i;hi(i,"already-initialized")}return n.initialize({options:e})}function jx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ds);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ux(){return Z5()==="http:"||Z5()==="https:"}function Z5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ux()||yC()||"connection"in navigator)?navigator.onLine:!0}function Vx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vs(n>e,"Short delay should be less than long delay!"),this.isMobile=W0()||Vb()}get(){return qx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t,e){Vs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new uh(3e4,6e4);function hh(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function fh(t,e,n,r,i={}){return tA(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=fl(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),eA.fetch()(nA(t,t.config.apiHost,n,a),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function tA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$x),e);try{const i=new Hx(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Lf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Lf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Lf(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Zb(t,f,u);hi(t,f)}}catch(i){if(i instanceof ys)throw i;hi(t,"network-request-failed")}}async function dh(t,e,n,r,i={}){const s=await fh(t,e,n,r,i);return"mfaPendingCredential"in s&&hi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function nA(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Q0(t.config,i):`${t.config.apiScheme}://${i}`}class Hx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(os(this.auth,"network-request-failed")),zx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=os(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wx(t,e){return fh(t,"POST","/v1/accounts:delete",e)}async function Gx(t,e){return fh(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Kx(t,e=!1){const n=Bn(t),r=await n.getIdToken(e),i=X0(r);at(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Au(hm(i.auth_time)),issuedAtTime:Au(hm(i.iat)),expirationTime:Au(hm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function hm(t){return Number(t)*1e3}function X0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zf("JWT malformed, contained fewer than 3 sections"),null;try{const i=wd(n);return i?JSON.parse(i):(Zf("Failed to decode base64 JWT payload"),null)}catch(i){return Zf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Yx(t){const e=X0(t);return at(e,"internal-error"),at(typeof e.exp<"u","internal-error"),at(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ys&&Qx(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Qx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(t){var e;const n=t.auth,r=await t.getIdToken(),i=await zu(t,Gx(n,{idToken:r}));at(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ek(s.providerUserInfo):[],a=Zx(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),f=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new rA(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,d)}async function Jx(t){const e=Bn(t);await Ed(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Zx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ek(t){return t.map(e=>{var{providerId:n}=e,r=K0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(t,e){const n=await tA(t,{},async()=>{const r=fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=nA(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",eA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){at(e.idToken,"internal-error"),at(typeof e.idToken<"u","internal-error"),at(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return at(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await tk(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Hu;return r&&(at(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(at(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(at(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hu,this.toJSON())}_performRefresh(){return Os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t,e){at(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ga{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=K0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new rA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await zu(this,this.stsTokenManager.getToken(this.auth,e));return at(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Kx(this,e)}reload(){return Jx(this)}_assign(e){this!==e&&(at(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ga(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){at(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ed(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await zu(this,Wx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,f;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(u=n.createdAt)!==null&&u!==void 0?u:void 0,k=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:j,emailVerified:Y,isAnonymous:oe,providerData:me,stsTokenManager:te}=n;at(j&&te,e,"internal-error");const F=Hu.fromJSON(this.name,te);at(typeof j=="string",e,"internal-error"),fo(d,e.name),fo(y,e.name),at(typeof Y=="boolean",e,"internal-error"),at(typeof oe=="boolean",e,"internal-error"),fo(g,e.name),fo(w,e.name),fo(_,e.name),fo(T,e.name),fo(S,e.name),fo(k,e.name);const ge=new ga({uid:j,auth:e,email:y,emailVerified:Y,displayName:d,isAnonymous:oe,photoURL:w,phoneNumber:g,tenantId:_,stsTokenManager:F,createdAt:S,lastLoginAt:k});return me&&Array.isArray(me)&&(ge.providerData=me.map(pe=>Object.assign({},pe))),T&&(ge._redirectEventId=T),ge}static async _fromIdTokenResponse(e,n,r=!1){const i=new Hu;i.updateFromServerResponse(n);const s=new ga({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ed(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iA.type="NONE";const ev=iA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t,e,n){return`firebase:${t}:${e}:${n}`}class Mc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ed(this.userKey,i.apiKey,s),this.fullPersistenceKey=ed("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ga._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Mc(Ds(ev),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ds(ev);const o=ed(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const f=await u._get(o);if(f){const d=ga._fromJSON(e,f);u!==s&&(a=d),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Mc(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Mc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lA(e))return"Blackberry";if(uA(e))return"Webos";if(J0(e))return"Safari";if((e.includes("chrome/")||oA(e))&&!e.includes("edge/"))return"Chrome";if(cA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sA(t=wr()){return/firefox\//i.test(t)}function J0(t=wr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oA(t=wr()){return/crios\//i.test(t)}function aA(t=wr()){return/iemobile/i.test(t)}function cA(t=wr()){return/android/i.test(t)}function lA(t=wr()){return/blackberry/i.test(t)}function uA(t=wr()){return/webos/i.test(t)}function Sp(t=wr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nk(t=wr()){var e;return Sp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rk(){return vC()&&document.documentMode===10}function hA(t=wr()){return Sp(t)||cA(t)||uA(t)||lA(t)||/windows phone/i.test(t)||aA(t)}function ik(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t,e=[]){let n;switch(t){case"Browser":n=tv(wr());break;case"Worker":n=`${tv(wr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Oa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nv(this),this.idTokenSubscription=new nv(this),this.beforeStateQueue=new sk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jb,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ds(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Mc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return at(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ed(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Vx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Bn(e):null;return n&&at(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&at(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ds(e)||this._popupRedirectResolver;at(n,this,"argument-error"),this.redirectPersistenceManager=await Mc.create(this,[Ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return at(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return at(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function dl(t){return Bn(t)}class nv{constructor(e){this.auth=e,this.observer=null,this.addObserver=NC(n=>this.observer=n)}get next(){return at(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ak(t,e,n){const r=dl(t);at(r._canInitEmulator,r,"emulator-config-failed"),at(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=dA(e),{host:o,port:a}=ck(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||lk()}function dA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ck(t){const e=dA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:rv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:rv(o)}}}function rv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Os("not implemented")}_getIdTokenResponse(e){return Os("not implemented")}_linkToIdToken(e,n){return Os("not implemented")}_getReauthenticationResolver(e){return Os("not implemented")}}async function uk(t,e){return fh(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hk(t,e){return dh(t,"POST","/v1/accounts:signInWithPassword",hh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e){return dh(t,"POST","/v1/accounts:signInWithEmailLink",hh(t,e))}async function dk(t,e){return dh(t,"POST","/v1/accounts:signInWithEmailLink",hh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends Z0{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Wu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return hk(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return fk(e,{email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return uk(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return dk(e,{idToken:n,email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(t,e){return dh(t,"POST","/v1/accounts:signInWithIdp",hh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="http://localhost";class Sa extends Z0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=K0(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Sa(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Fc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fc(e,n)}buildRequest(){const e={requestUri:pk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mk(t){const e=hu(fu(t)).link,n=e?hu(fu(e)).deep_link_id:null,r=hu(fu(t)).deep_link_id;return(r?hu(fu(r)).link:null)||r||n||e||t}class e2{constructor(e){var n,r,i,s,o,a;const c=hu(fu(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,d=gk((i=c.mode)!==null&&i!==void 0?i:null);at(u&&f&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=f,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=mk(e);try{return new e2(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.providerId=pl.PROVIDER_ID}static credential(e,n){return Wu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=e2.parseLink(n);return at(r,"argument-error"),Wu._fromEmailAndCode(e,r.code,r.tenantId)}}pl.PROVIDER_ID="password";pl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph extends t2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends ph{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _o.credential(e.oauthAccessToken)}catch{return null}}}_o.FACEBOOK_SIGN_IN_METHOD="facebook.com";_o.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends ph{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Sa._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ki.credential(n,r)}catch{return null}}}ki.GOOGLE_SIGN_IN_METHOD="google.com";ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends ph{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wo.credential(e.oauthAccessToken)}catch{return null}}}wo.GITHUB_SIGN_IN_METHOD="github.com";wo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo extends ph{constructor(){super("twitter.com")}static credential(e,n){return Sa._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return bo.credential(n,r)}catch{return null}}}bo.TWITTER_SIGN_IN_METHOD="twitter.com";bo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,e){return dh(t,"POST","/v1/accounts:signUp",hh(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ga._fromIdTokenResponse(e,r,i),o=iv(r);return new Ea({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=iv(r);return new Ea({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function iv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends ys{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Id.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Id(e,n,r,i)}}function pA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Id._fromErrorAndOperation(t,s,e,r):s})}async function vk(t,e,n=!1){const r=await zu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ea._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await zu(t,pA(r,i,e,t),n);at(s.idToken,r,"internal-error");const o=X0(s.idToken);at(o,r,"internal-error");const{sub:a}=o;return at(t.uid===a,r,"user-mismatch"),Ea._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&hi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t,e,n=!1){const r="signIn",i=await pA(t,r,e),s=await Ea._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function wk(t,e){return gA(dl(t),e)}async function bk(t,e,n){const r=dl(t),i=await yk(r,{returnSecureToken:!0,email:e,password:n}),s=await Ea._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function Ak(t,e,n){return wk(Bn(t),pl.credential(e,n))}function Sk(t,e,n,r){return Bn(t).onIdTokenChanged(e,n,r)}function Ek(t,e,n){return Bn(t).beforeAuthStateChanged(e,n)}function Da(t,e,n,r){return Bn(t).onAuthStateChanged(e,n,r)}function Ik(t){return Bn(t).signOut()}const Nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(){const t=wr();return J0(t)||Sp(t)}const Tk=1e3,Ck=10;class yA extends mA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Nk()&&ik(),this.fallbackToPolling=hA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);rk()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Ck):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Tk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yA.type="LOCAL";const xk=yA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA extends mA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vA.type="SESSION";const _A=vA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ep(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),c=await kk(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ep.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const u=n2("",20);i.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const y=d;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(y.data.response);break;default:clearTimeout(f),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(){return window}function Rk(t){as().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(){return typeof as().WorkerGlobalScope<"u"&&typeof as().importScripts=="function"}async function Pk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ok(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Dk(){return wA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="firebaseLocalStorageDb",Mk=1,Td="firebaseLocalStorage",AA="fbase_key";class gh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ip(t,e){return t.transaction([Td],e?"readwrite":"readonly").objectStore(Td)}function Fk(){const t=indexedDB.deleteDatabase(bA);return new gh(t).toPromise()}function g1(){const t=indexedDB.open(bA,Mk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Td,{keyPath:AA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Td)?e(r):(r.close(),await Fk(),e(await g1()))})})}async function sv(t,e,n){const r=Ip(t,!0).put({[AA]:e,value:n});return new gh(r).toPromise()}async function Bk(t,e){const n=Ip(t,!1).get(e),r=await new gh(n).toPromise();return r===void 0?null:r.value}function ov(t,e){const n=Ip(t,!0).delete(e);return new gh(n).toPromise()}const jk=800,Uk=3;class SA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await g1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Uk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ep._getInstance(Dk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Pk(),!this.activeServiceWorker)return;this.sender=new Lk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ok()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await g1();return await sv(e,Nd,"1"),await ov(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Bk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ov(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ip(i,!1).getAll();return new gh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SA.type="LOCAL";const qk=SA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function $k(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=os("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Vk().appendChild(r)})}function zk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new uh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e){return e?Ds(e):(at(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2 extends Z0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Hk(t){return gA(t.auth,new r2(t),t.bypassAuthState)}function Wk(t){const{auth:e,user:n}=t;return at(n,e,"internal-error"),_k(n,new r2(t),t.bypassAuthState)}async function Gk(t){const{auth:e,user:n}=t;return at(n,e,"internal-error"),vk(n,new r2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hk;case"linkViaPopup":case"linkViaRedirect":return Gk;case"reauthViaPopup":case"reauthViaRedirect":return Wk;default:hi(this.auth,"internal-error")}}resolve(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new uh(2e3,1e4);async function Yk(t,e,n){const r=dl(t);Fx(t,e,t2);const i=EA(r,n);return new aa(r,"signInViaPopup",e,i).executeNotNull()}class aa extends IA{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,aa.currentPopupAction&&aa.currentPopupAction.cancel(),aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return at(e,this.auth,"internal-error"),e}async onExecution(){Vs(this.filter.length===1,"Popup operations only handle one event");const e=n2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(os(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(os(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(os(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,Kk.get())};e()}}aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="pendingRedirect",td=new Map;class Xk extends IA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=td.get(this.auth._key());if(!e){try{const r=await Jk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}td.set(this.auth._key(),e)}return this.bypassAuthState||td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jk(t,e){const n=tL(e),r=eL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Zk(t,e){td.set(t._key(),e)}function eL(t){return Ds(t._redirectPersistence)}function tL(t){return ed(Qk,t.config.apiKey,t.name)}async function nL(t,e,n=!1){const r=dl(t),i=EA(r,e),o=await new Xk(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=10*60*1e3;class iL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!NA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(os(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rL&&this.cachedEventUids.clear(),this.cachedEventUids.has(av(e))}saveEventToCache(e){this.cachedEventUids.add(av(e)),this.lastProcessedEventTime=Date.now()}}function av(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(t,e={}){return fh(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cL=/^https?/;async function lL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oL(t);for(const n of e)try{if(uL(n))return}catch{}hi(t,"unauthorized-domain")}function uL(t){const e=p1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cL.test(n))return!1;if(aL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new uh(3e4,6e4);function cv(){const t=as().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fL(t){return new Promise((e,n)=>{var r,i,s;function o(){cv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cv(),n(os(t,"network-request-failed"))},timeout:hL.get()})}if(!((i=(r=as().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=as().gapi)===null||s===void 0)&&s.load)o();else{const a=zk("iframefcb");return as()[a]=()=>{gapi.load?o():n(os(t,"network-request-failed"))},$k(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw nd=null,e})}let nd=null;function dL(t){return nd=nd||fL(t),nd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=new uh(5e3,15e3),gL="__/auth/iframe",mL="emulator/auth/iframe",yL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _L(t){const e=t.config;at(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Q0(e,mL):`https://${t.config.authDomain}/${gL}`,r={apiKey:e.apiKey,appName:t.name,v:Oa},i=vL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${fl(r).slice(1)}`}async function wL(t){const e=await dL(t),n=as().gapi;return at(n,t,"internal-error"),e.open({where:document.body,url:_L(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=os(t,"network-request-failed"),a=as().setTimeout(()=>{s(o)},pL.get());function c(){as().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AL=500,SL=600,EL="_blank",IL="http://localhost";class lv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NL(t,e,n,r=AL,i=SL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},bL),{width:r.toString(),height:i.toString(),top:s,left:o}),u=wr().toLowerCase();n&&(a=oA(u)?EL:n),sA(u)&&(e=e||IL,c.scrollbars="yes");const f=Object.entries(c).reduce((y,[g,w])=>`${y}${g}=${w},`,"");if(nk(u)&&a!=="_self")return TL(e||"",a),new lv(null);const d=window.open(e||"",a,f);at(d,t,"popup-blocked");try{d.focus()}catch{}return new lv(d)}function TL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="__/auth/handler",xL="emulator/auth/handler";function uv(t,e,n,r,i,s){at(t.config.authDomain,t,"auth-domain-config-required"),at(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Oa,eventId:i};if(e instanceof t2){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",c1(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,u]of Object.entries(s||{}))o[c]=u}if(e instanceof ph){const c=e.getScopes().filter(u=>u!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];return`${kL(t)}?${fl(a).slice(1)}`}function kL({config:t}){return t.emulator?Q0(t,xL):`https://${t.authDomain}/${CL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="webStorageSupport";class LL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_A,this._completeRedirectFn=nL,this._overrideRedirectResult=Zk}async _openPopup(e,n,r,i){var s;Vs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=uv(e,n,r,p1(),i);return NL(e,o,n2())}async _openRedirect(e,n,r,i){return await this._originValidation(e),Rk(uv(e,n,r,p1(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Vs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wL(e),r=new iL(e);return n.register("authEvent",i=>(at(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fm,{type:fm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[fm];o!==void 0&&n(!!o),hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hA()||J0()||Sp()}}const RL=LL;var hv="@firebase/auth",fv="0.21.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){at(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function DL(t){ds(new Ui("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,c)=>{at(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),at(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const u={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fA(t)},f=new ok(a,c,u);return jx(f,n),f})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ds(new Ui("auth-internal",e=>{const n=dl(e.getProvider("auth").getImmediate());return(r=>new PL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yr(hv,fv,OL(t)),Yr(hv,fv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=5*60,FL=Ub("authIdTokenMaxAge")||ML;let dv=null;const BL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>FL)return;const i=n==null?void 0:n.token;dv!==i&&(dv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jL(t=Ap()){const e=bp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Bx(t,{popupRedirectResolver:RL,persistence:[qk,xk,_A]}),r=Ub("authTokenSyncURL");if(r){const s=BL(r);Ek(n,s,()=>s(n.currentUser)),Sk(n,o=>s(o))}const i=Bb("auth");return i&&ak(n,`http://${i}`),n}DL("Browser");var UL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ye,i2=i2||{},ht=UL||self;function Cd(){}function Np(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function mh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function qL(t){return Object.prototype.hasOwnProperty.call(t,dm)&&t[dm]||(t[dm]=++VL)}var dm="closure_uid_"+(1e9*Math.random()>>>0),VL=0;function $L(t,e,n){return t.call.apply(t.bind,arguments)}function zL(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function mr(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?mr=$L:mr=zL,mr.apply(null,arguments)}function Rf(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function er(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Bo(){this.s=this.s,this.o=this.o}var HL=0;Bo.prototype.s=!1;Bo.prototype.na=function(){!this.s&&(this.s=!0,this.M(),HL!=0)&&qL(this)};Bo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const TA=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function s2(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function pv(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Np(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function yr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}yr.prototype.h=function(){this.defaultPrevented=!0};var WL=function(){if(!ht.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ht.addEventListener("test",Cd,e),ht.removeEventListener("test",Cd,e)}catch{}return t}();function xd(t){return/^[\s\xa0]*$/.test(t)}var gv=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function pm(t,e){return t<e?-1:t>e?1:0}function Tp(){var t=ht.navigator;return t&&(t=t.userAgent)?t:""}function ns(t){return Tp().indexOf(t)!=-1}function o2(t){return o2[" "](t),t}o2[" "]=Cd;function GL(t){var e=QL;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var KL=ns("Opera"),Yc=ns("Trident")||ns("MSIE"),CA=ns("Edge"),m1=CA||Yc,xA=ns("Gecko")&&!(Tp().toLowerCase().indexOf("webkit")!=-1&&!ns("Edge"))&&!(ns("Trident")||ns("MSIE"))&&!ns("Edge"),YL=Tp().toLowerCase().indexOf("webkit")!=-1&&!ns("Edge");function kA(){var t=ht.document;return t?t.documentMode:void 0}var kd;e:{var gm="",mm=function(){var t=Tp();if(xA)return/rv:([^\);]+)(\)|;)/.exec(t);if(CA)return/Edge\/([\d\.]+)/.exec(t);if(Yc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(YL)return/WebKit\/(\S+)/.exec(t);if(KL)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(mm&&(gm=mm?mm[1]:""),Yc){var ym=kA();if(ym!=null&&ym>parseFloat(gm)){kd=String(ym);break e}}kd=gm}var QL={};function XL(){return GL(function(){let t=0;const e=gv(String(kd)).split("."),n=gv("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=pm(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||pm(i[2].length==0,s[2].length==0)||pm(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var y1;if(ht.document&&Yc){var mv=kA();y1=mv||parseInt(kd,10)||void 0}else y1=void 0;var JL=y1;function Gu(t,e){if(yr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(xA){e:{try{o2(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:ZL[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Gu.X.h.call(this)}}er(Gu,yr);var ZL={2:"touch",3:"pen",4:"mouse"};Gu.prototype.h=function(){Gu.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var yh="closure_listenable_"+(1e6*Math.random()|0),e6=0;function t6(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++e6,this.ba=this.ea=!1}function Cp(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function a2(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function LA(t){const e={};for(const n in t)e[n]=t[n];return e}const yv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function RA(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<yv.length;s++)n=yv[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function xp(t){this.src=t,this.g={},this.h=0}xp.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=_1(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new t6(e,this.src,s,!!r,i),e.ea=n,t.push(e)),e};function v1(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=TA(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Cp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function _1(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}var c2="closure_lm_"+(1e6*Math.random()|0),vm={};function PA(t,e,n,r,i){if(r&&r.once)return DA(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)PA(t,e[s],n,r,i);return null}return n=h2(n),t&&t[yh]?t.N(e,n,mh(r)?!!r.capture:!!r,i):OA(t,e,n,!1,r,i)}function OA(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=mh(i)?!!i.capture:!!i,a=u2(t);if(a||(t[c2]=a=new xp(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=n6(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)WL||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(FA(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function n6(){function t(n){return e.call(t.src,t.listener,n)}const e=r6;return t}function DA(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)DA(t,e[s],n,r,i);return null}return n=h2(n),t&&t[yh]?t.O(e,n,mh(r)?!!r.capture:!!r,i):OA(t,e,n,!0,r,i)}function MA(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)MA(t,e[s],n,r,i);else r=mh(r)?!!r.capture:!!r,n=h2(n),t&&t[yh]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=_1(s,n,r,i),-1<n&&(Cp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=u2(t))&&(e=t.g[e.toString()],t=-1,e&&(t=_1(e,n,r,i)),(n=-1<t?e[t]:null)&&l2(n))}function l2(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[yh])v1(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(FA(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=u2(e))?(v1(n,t),n.h==0&&(n.src=null,e[c2]=null)):Cp(t)}}}function FA(t){return t in vm?vm[t]:vm[t]="on"+t}function r6(t,e){if(t.ba)t=!0;else{e=new Gu(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&l2(t),t=n.call(r,e)}return t}function u2(t){return t=t[c2],t instanceof xp?t:null}var _m="__closure_events_fn_"+(1e9*Math.random()>>>0);function h2(t){return typeof t=="function"?t:(t[_m]||(t[_m]=function(e){return t.handleEvent(e)}),t[_m])}function Kn(){Bo.call(this),this.i=new xp(this),this.P=this,this.I=null}er(Kn,Bo);Kn.prototype[yh]=!0;Kn.prototype.removeEventListener=function(t,e,n,r){MA(this,t,e,n,r)};function Zn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new yr(e,t);else if(e instanceof yr)e.target=e.target||t;else{var i=e;e=new yr(r,t),RA(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Pf(o,r,!0,e)&&i}if(o=e.g=t,i=Pf(o,r,!0,e)&&i,i=Pf(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Pf(o,r,!1,e)&&i}Kn.prototype.M=function(){if(Kn.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Cp(n[r]);delete t.g[e],t.h--}}this.I=null};Kn.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Kn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Pf(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,c=o.ha||o.src;o.ea&&v1(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var f2=ht.JSON.stringify;function i6(){var t=UA;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class s6{constructor(){this.h=this.g=null}add(e,n){const r=BA.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var BA=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new o6,t=>t.reset());class o6{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function a6(t){ht.setTimeout(()=>{throw t},0)}function jA(t,e){w1||c6(),b1||(w1(),b1=!0),UA.add(t,e)}var w1;function c6(){var t=ht.Promise.resolve(void 0);w1=function(){t.then(l6)}}var b1=!1,UA=new s6;function l6(){for(var t;t=i6();){try{t.h.call(t.g)}catch(n){a6(n)}var e=BA;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}b1=!1}function kp(t,e){Kn.call(this),this.h=t||1,this.g=e||ht,this.j=mr(this.lb,this),this.l=Date.now()}er(kp,Kn);Ye=kp.prototype;Ye.ca=!1;Ye.R=null;Ye.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Zn(this,"tick"),this.ca&&(d2(this),this.start()))}};Ye.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function d2(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}Ye.M=function(){kp.X.M.call(this),d2(this),delete this.g};function p2(t,e,n){if(typeof t=="function")n&&(t=mr(t,n));else if(t&&typeof t.handleEvent=="function")t=mr(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ht.setTimeout(t,e||0)}function qA(t){t.g=p2(()=>{t.g=null,t.i&&(t.i=!1,qA(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class u6 extends Bo{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:qA(this)}M(){super.M(),this.g&&(ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ku(t){Bo.call(this),this.h=t,this.g={}}er(Ku,Bo);var vv=[];function VA(t,e,n,r){Array.isArray(n)||(n&&(vv[0]=n.toString()),n=vv);for(var i=0;i<n.length;i++){var s=PA(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function $A(t){a2(t.g,function(e,n){this.g.hasOwnProperty(n)&&l2(e)},t),t.g={}}Ku.prototype.M=function(){Ku.X.M.call(this),$A(this)};Ku.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Lp(){this.g=!0}Lp.prototype.Aa=function(){this.g=!1};function h6(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var f=u[0];u=u[1];var d=f.split("_");o=2<=d.length&&d[1]=="type"?o+(f+"="+u+"&"):o+(f+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function f6(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Cc(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+p6(t,n)+(r?" "+r:"")})}function d6(t,e){t.info(function(){return"TIMEOUT: "+e})}Lp.prototype.info=function(){};function p6(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return f2(n)}catch{return e}}var Ma={},_v=null;function Rp(){return _v=_v||new Kn}Ma.Pa="serverreachability";function zA(t){yr.call(this,Ma.Pa,t)}er(zA,yr);function Yu(t){const e=Rp();Zn(e,new zA(e))}Ma.STAT_EVENT="statevent";function HA(t,e){yr.call(this,Ma.STAT_EVENT,t),this.stat=e}er(HA,yr);function Er(t){const e=Rp();Zn(e,new HA(e,t))}Ma.Qa="timingevent";function WA(t,e){yr.call(this,Ma.Qa,t),this.size=e}er(WA,yr);function vh(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ht.setTimeout(function(){t()},e)}var Pp={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},GA={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function g2(){}g2.prototype.h=null;function wv(t){return t.h||(t.h=t.i())}function KA(){}var _h={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function m2(){yr.call(this,"d")}er(m2,yr);function y2(){yr.call(this,"c")}er(y2,yr);var A1;function Op(){}er(Op,g2);Op.prototype.g=function(){return new XMLHttpRequest};Op.prototype.i=function(){return{}};A1=new Op;function wh(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Ku(this),this.O=g6,t=m1?125:void 0,this.T=new kp(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new YA}function YA(){this.i=null,this.g="",this.h=!1}var g6=45e3,S1={},Ld={};Ye=wh.prototype;Ye.setTimeout=function(t){this.O=t};function E1(t,e,n){t.K=1,t.v=Mp($s(e)),t.s=n,t.P=!0,QA(t,null)}function QA(t,e){t.F=Date.now(),bh(t),t.A=$s(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),iS(n.i,"t",r),t.C=0,n=t.l.H,t.h=new YA,t.g=IS(t.l,n?e:null,!t.s),0<t.N&&(t.L=new u6(mr(t.La,t,t.g),t.N)),VA(t.S,t.g,"readystatechange",t.ib),e=t.H?LA(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Yu(),h6(t.j,t.u,t.A,t.m,t.U,t.s)}Ye.ib=function(t){t=t.target;const e=this.L;e&&Ms(t)==3?e.l():this.La(t)};Ye.La=function(t){try{if(t==this.g)e:{const f=Ms(this.g);var e=this.g.Ea();const d=this.g.aa();if(!(3>f)&&(f!=3||m1||this.g&&(this.h.h||this.g.fa()||Ev(this.g)))){this.I||f!=4||e==7||(e==8||0>=d?Yu(3):Yu(2)),Dp(this);var n=this.g.aa();this.Y=n;t:if(XA(this)){var r=Ev(this.g);t="";var i=r.length,s=Ms(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ca(this),Su(this);var o="";break t}this.h.i=new ht.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,f6(this.j,this.u,this.A,this.m,this.U,f,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xd(a)){var u=a;break t}}u=null}if(n=u)Cc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,I1(this,n);else{this.i=!1,this.o=3,Er(12),ca(this),Su(this);break e}}this.P?(JA(this,f,o),m1&&this.i&&f==3&&(VA(this.S,this.T,"tick",this.hb),this.T.start())):(Cc(this.j,this.m,o,null),I1(this,o)),f==4&&ca(this),this.i&&!this.I&&(f==4?bS(this.l,this):(this.i=!1,bh(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Er(12)):(this.o=0,Er(13)),ca(this),Su(this)}}}catch{}finally{}};function XA(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function JA(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=m6(t,n),i==Ld){e==4&&(t.o=4,Er(14),r=!1),Cc(t.j,t.m,null,"[Incomplete Response]");break}else if(i==S1){t.o=4,Er(15),Cc(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Cc(t.j,t.m,i,null),I1(t,i);XA(t)&&i!=Ld&&i!=S1&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Er(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),E2(e),e.K=!0,Er(11))):(Cc(t.j,t.m,n,"[Invalid Chunked Response]"),ca(t),Su(t))}Ye.hb=function(){if(this.g){var t=Ms(this.g),e=this.g.fa();this.C<e.length&&(Dp(this),JA(this,t,e),this.i&&t!=4&&bh(this))}};function m6(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?Ld:(n=Number(e.substring(n,r)),isNaN(n)?S1:(r+=1,r+n>e.length?Ld:(e=e.substr(r,n),t.C=r+n,e)))}Ye.cancel=function(){this.I=!0,ca(this)};function bh(t){t.V=Date.now()+t.O,ZA(t,t.O)}function ZA(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=vh(mr(t.gb,t),e)}function Dp(t){t.B&&(ht.clearTimeout(t.B),t.B=null)}Ye.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(d6(this.j,this.A),this.K!=2&&(Yu(),Er(17)),ca(this),this.o=2,Su(this)):ZA(this,this.V-t)};function Su(t){t.l.G==0||t.I||bS(t.l,t)}function ca(t){Dp(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,d2(t.T),$A(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function I1(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||N1(n.h,t))){if(!t.J&&N1(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Od(n),jp(n);else break e;S2(n),Er(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&n.A==0&&!n.v&&(n.v=vh(mr(n.cb,n),6e3));if(1>=aS(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else la(n,11)}else if((t.J||n.g==t)&&Od(n),!xd(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.T=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.I=u[1],n.ka=u[2];const f=u[3];f!=null&&(n.ma=f,n.j.info("VER="+n.ma));const d=u[4];d!=null&&(n.Ca=d,n.j.info("SVER="+n.Ca));const y=u[5];y!=null&&typeof y=="number"&&0<y&&(r=1.5*y,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const g=t.g;if(g){const w=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var s=r.h;s.g||w.indexOf("spdy")==-1&&w.indexOf("quic")==-1&&w.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(v2(s,s.h),s.h=null))}if(r.D){const _=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.za=_,on(r.F,r.D,_))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=ES(r,r.H?r.ka:null,r.V),o.J){cS(r.h,o);var a=o,c=r.J;c&&a.setTimeout(c),a.B&&(Dp(a),bh(a)),r.g=o}else _S(r);0<n.i.length&&Up(n)}else u[0]!="stop"&&u[0]!="close"||la(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?la(n,7):A2(n):u[0]!="noop"&&n.l&&n.l.wa(u),n.A=0)}}Yu(4)}catch{}}function y6(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Np(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function v6(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Np(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function eS(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Np(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=v6(t),r=y6(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var tS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _6(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ma(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ma){this.h=e!==void 0?e:t.h,Rd(this,t.j),this.s=t.s,this.g=t.g,Pd(this,t.m),this.l=t.l,e=t.i;var n=new Qu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),bv(this,n),this.o=t.o}else t&&(n=String(t).match(tS))?(this.h=!!e,Rd(this,n[1]||"",!0),this.s=du(n[2]||""),this.g=du(n[3]||"",!0),Pd(this,n[4]),this.l=du(n[5]||"",!0),bv(this,n[6]||"",!0),this.o=du(n[7]||"")):(this.h=!!e,this.i=new Qu(null,this.h))}ma.prototype.toString=function(){var t=[],e=this.j;e&&t.push(pu(e,Av,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(pu(e,Av,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(pu(n,n.charAt(0)=="/"?A6:b6,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",pu(n,E6)),t.join("")};function $s(t){return new ma(t)}function Rd(t,e,n){t.j=n?du(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Pd(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function bv(t,e,n){e instanceof Qu?(t.i=e,I6(t.i,t.h)):(n||(e=pu(e,S6)),t.i=new Qu(e,t.h))}function on(t,e,n){t.i.set(e,n)}function Mp(t){return on(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function du(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function pu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,w6),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function w6(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Av=/[#\/\?@]/g,b6=/[#\?:]/g,A6=/[#\?]/g,S6=/[#\?@]/g,E6=/#/g;function Qu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function jo(t){t.g||(t.g=new Map,t.h=0,t.i&&_6(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}Ye=Qu.prototype;Ye.add=function(t,e){jo(this),this.i=null,t=gl(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function nS(t,e){jo(t),e=gl(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function rS(t,e){return jo(t),e=gl(t,e),t.g.has(e)}Ye.forEach=function(t,e){jo(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};Ye.oa=function(){jo(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};Ye.W=function(t){jo(this);let e=[];if(typeof t=="string")rS(this,t)&&(e=e.concat(this.g.get(gl(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};Ye.set=function(t,e){return jo(this),this.i=null,t=gl(this,t),rS(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};Ye.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function iS(t,e,n){nS(t,e),0<n.length&&(t.i=null,t.g.set(gl(t,e),s2(n)),t.h+=n.length)}Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function gl(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function I6(t,e){e&&!t.j&&(jo(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(nS(this,r),iS(this,i,n))},t)),t.j=e}var N6=class{constructor(e,n){this.h=e,this.g=n}};function sS(t){this.l=t||T6,ht.PerformanceNavigationTiming?(t=ht.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ht.g&&ht.g.Ga&&ht.g.Ga()&&ht.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var T6=10;function oS(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function aS(t){return t.h?1:t.g?t.g.size:0}function N1(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function v2(t,e){t.g?t.g.add(e):t.h=e}function cS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}sS.prototype.cancel=function(){if(this.i=lS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function lS(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return s2(t.i)}function _2(){}_2.prototype.stringify=function(t){return ht.JSON.stringify(t,void 0)};_2.prototype.parse=function(t){return ht.JSON.parse(t,void 0)};function C6(){this.g=new _2}function x6(t,e,n){const r=n||"";try{eS(t,function(i,s){let o=i;mh(i)&&(o=f2(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function k6(t,e){const n=new Lp;if(ht.Image){const r=new Image;r.onload=Rf(Of,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Rf(Of,n,r,"TestLoadImage: error",!1,e),r.onabort=Rf(Of,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Rf(Of,n,r,"TestLoadImage: timeout",!1,e),ht.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Of(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ah(t){this.l=t.ac||null,this.j=t.jb||!1}er(Ah,g2);Ah.prototype.g=function(){return new Fp(this.l,this.j)};Ah.prototype.i=function(t){return function(){return t}}({});function Fp(t,e){Kn.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=w2,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}er(Fp,Kn);var w2=0;Ye=Fp.prototype;Ye.open=function(t,e){if(this.readyState!=w2)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Xu(this)};Ye.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ht).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sh(this)),this.readyState=w2};Ye.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Xu(this)),this.g&&(this.readyState=3,Xu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ht.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;uS(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function uS(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}Ye.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Sh(this):Xu(this),this.readyState==3&&uS(this)}};Ye.Va=function(t){this.g&&(this.response=this.responseText=t,Sh(this))};Ye.Ua=function(t){this.g&&(this.response=t,Sh(this))};Ye.ga=function(){this.g&&Sh(this)};function Sh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Xu(t)}Ye.setRequestHeader=function(t,e){this.v.append(t,e)};Ye.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};Ye.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Xu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Fp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var L6=ht.JSON.parse;function gn(t){Kn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=hS,this.K=this.L=!1}er(gn,Kn);var hS="",R6=/^https?$/i,P6=["POST","PUT"];Ye=gn.prototype;Ye.Ka=function(t){this.L=t};Ye.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():A1.g(),this.C=this.u?wv(this.u):wv(A1),this.g.onreadystatechange=mr(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){Sv(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ht.FormData&&t instanceof ht.FormData,!(0<=TA(P6,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pS(this),0<this.B&&((this.K=O6(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mr(this.qa,this)):this.A=p2(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Sv(this,s)}};function O6(t){return Yc&&XL()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}Ye.qa=function(){typeof i2<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zn(this,"timeout"),this.abort(8))};function Sv(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,fS(t),Bp(t)}function fS(t){t.D||(t.D=!0,Zn(t,"complete"),Zn(t,"error"))}Ye.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Zn(this,"complete"),Zn(this,"abort"),Bp(this))};Ye.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bp(this,!0)),gn.X.M.call(this)};Ye.Ha=function(){this.s||(this.F||this.v||this.l?dS(this):this.fb())};Ye.fb=function(){dS(this)};function dS(t){if(t.h&&typeof i2<"u"&&(!t.C[1]||Ms(t)!=4||t.aa()!=2)){if(t.v&&Ms(t)==4)p2(t.Ha,0,t);else if(Zn(t,"readystatechange"),Ms(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var i=String(t.H).match(tS)[1]||null;if(!i&&ht.self&&ht.self.location){var s=ht.self.location.protocol;i=s.substr(0,s.length-1)}r=!R6.test(i?i.toLowerCase():"")}n=r}if(n)Zn(t,"complete"),Zn(t,"success");else{t.m=6;try{var o=2<Ms(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",fS(t)}}finally{Bp(t)}}}}function Bp(t,e){if(t.g){pS(t);const n=t.g,r=t.C[0]?Cd:null;t.g=null,t.C=null,e||Zn(t,"ready");try{n.onreadystatechange=r}catch{}}}function pS(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ht.clearTimeout(t.A),t.A=null)}function Ms(t){return t.g?t.g.readyState:0}Ye.aa=function(){try{return 2<Ms(this)?this.g.status:-1}catch{return-1}};Ye.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};Ye.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),L6(e)}};function Ev(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case hS:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}Ye.Ea=function(){return this.m};Ye.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function gS(t){let e="";return a2(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function b2(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=gS(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):on(t,e,n))}function tu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function mS(t){this.Ca=0,this.i=[],this.j=new Lp,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=tu("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=tu("baseRetryDelayMs",5e3,t),this.bb=tu("retryDelaySeedMs",1e4,t),this.$a=tu("forwardChannelMaxRetries",2,t),this.ta=tu("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new sS(t&&t.concurrentRequestLimit),this.Fa=new C6,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}Ye=mS.prototype;Ye.ma=8;Ye.G=1;function A2(t){if(yS(t),t.G==3){var e=t.U++,n=$s(t.F);on(n,"SID",t.I),on(n,"RID",e),on(n,"TYPE","terminate"),Eh(t,n),e=new wh(t,t.j,e,void 0),e.K=2,e.v=Mp($s(n)),n=!1,ht.navigator&&ht.navigator.sendBeacon&&(n=ht.navigator.sendBeacon(e.v.toString(),"")),!n&&ht.Image&&(new Image().src=e.v,n=!0),n||(e.g=IS(e.l,null),e.g.da(e.v)),e.F=Date.now(),bh(e)}SS(t)}function jp(t){t.g&&(E2(t),t.g.cancel(),t.g=null)}function yS(t){jp(t),t.u&&(ht.clearTimeout(t.u),t.u=null),Od(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&ht.clearTimeout(t.m),t.m=null)}function Up(t){oS(t.h)||t.m||(t.m=!0,jA(t.Ja,t),t.C=0)}function D6(t,e){return aS(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=vh(mr(t.Ja,t,e),AS(t,t.C)),t.C++,!0)}Ye.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new wh(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=LA(s),RA(s,this.S)):s=this.S),this.o!==null||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=vS(this,i,e),n=$s(this.F),on(n,"RID",t),on(n,"CVER",22),this.D&&on(n,"X-HTTP-Session-Id",this.D),Eh(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(gS(s)))+"&"+e:this.o&&b2(n,this.o,s)),v2(this.h,i),this.Ya&&on(n,"TYPE","init"),this.O?(on(n,"$req",e),on(n,"SID","null"),i.Z=!0,E1(i,n,null)):E1(i,n,e),this.G=2}}else this.G==3&&(t?Iv(this,t):this.i.length==0||oS(this.h)||Iv(this))};function Iv(t,e){var n;e?n=e.m:n=t.U++;const r=$s(t.F);on(r,"SID",t.I),on(r,"RID",n),on(r,"AID",t.T),Eh(t,r),t.o&&t.s&&b2(r,t.o,t.s),n=new wh(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=vS(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),v2(t.h,n),E1(n,r,e)}function Eh(t,e){t.ia&&a2(t.ia,function(n,r){on(e,r,n)}),t.l&&eS({},function(n,r){on(e,r,n)})}function vS(t,e,n){n=Math.min(t.i.length,n);var r=t.l?mr(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].h;const f=i[c].g;if(u-=s,0>u)s=Math.max(0,i[c].h-100),a=!1;else try{x6(f,o,"req"+u+"_")}catch{r&&r(f)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function _S(t){t.g||t.u||(t.Z=1,jA(t.Ia,t),t.A=0)}function S2(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=vh(mr(t.Ia,t),AS(t,t.A)),t.A++,!0)}Ye.Ia=function(){if(this.u=null,wS(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=vh(mr(this.eb,this),t)}};Ye.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Er(10),jp(this),wS(this))};function E2(t){t.B!=null&&(ht.clearTimeout(t.B),t.B=null)}function wS(t){t.g=new wh(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=$s(t.sa);on(e,"RID","rpc"),on(e,"SID",t.I),on(e,"CI",t.L?"0":"1"),on(e,"AID",t.T),on(e,"TYPE","xmlhttp"),Eh(t,e),t.o&&t.s&&b2(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Mp($s(e)),n.s=null,n.P=!0,QA(n,t)}Ye.cb=function(){this.v!=null&&(this.v=null,jp(this),S2(this),Er(19))};function Od(t){t.v!=null&&(ht.clearTimeout(t.v),t.v=null)}function bS(t,e){var n=null;if(t.g==e){Od(t),E2(t),t.g=null;var r=2}else if(N1(t.h,e))n=e.D,cS(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=Rp(),Zn(r,new WA(r,n)),Up(t)}else _S(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(r==1&&D6(t,e)||r==2&&S2(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:la(t,5);break;case 4:la(t,10);break;case 3:la(t,6);break;default:la(t,2)}}}function AS(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function la(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=mr(t.kb,t);n||(n=new ma("//www.google.com/images/cleardot.gif"),ht.location&&ht.location.protocol=="http"||Rd(n,"https"),Mp(n)),k6(n.toString(),r)}else Er(2);t.G=0,t.l&&t.l.va(e),SS(t),yS(t)}Ye.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Er(2)):(this.j.info("Failed to ping google.com"),Er(1))};function SS(t){if(t.G=0,t.la=[],t.l){const e=lS(t.h);(e.length!=0||t.i.length!=0)&&(pv(t.la,e),pv(t.la,t.i),t.h.i.length=0,s2(t.i),t.i.length=0),t.l.ua()}}function ES(t,e,n){var r=n instanceof ma?$s(n):new ma(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),Pd(r,r.m);else{var i=ht.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ma(null,void 0);r&&Rd(s,r),e&&(s.g=e),i&&Pd(s,i),n&&(s.l=n),r=s}return n=t.D,e=t.za,n&&e&&on(r,n,e),on(r,"VER",t.ma),Eh(t,r),r}function IS(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new gn(new Ah({jb:!0})):new gn(t.ra),e.Ka(t.H),e}function NS(){}Ye=NS.prototype;Ye.xa=function(){};Ye.wa=function(){};Ye.va=function(){};Ye.ua=function(){};Ye.Ra=function(){};function Dd(){if(Yc&&!(10<=Number(JL)))throw Error("Environmental error: no available transport.")}Dd.prototype.g=function(t,e){return new Jr(t,e)};function Jr(t,e){Kn.call(this),this.g=new mS(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!xd(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xd(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ml(this)}er(Jr,Kn);Jr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Er(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=ES(t,null,t.V),Up(t)};Jr.prototype.close=function(){A2(this.g)};Jr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=f2(t),t=n);e.i.push(new N6(e.ab++,t)),e.G==3&&Up(e)};Jr.prototype.M=function(){this.g.l=null,delete this.j,A2(this.g),delete this.g,Jr.X.M.call(this)};function TS(t){m2.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}er(TS,m2);function CS(){y2.call(this),this.status=1}er(CS,y2);function ml(t){this.g=t}er(ml,NS);ml.prototype.xa=function(){Zn(this.g,"a")};ml.prototype.wa=function(t){Zn(this.g,new TS(t))};ml.prototype.va=function(t){Zn(this.g,new CS)};ml.prototype.ua=function(){Zn(this.g,"b")};Dd.prototype.createWebChannel=Dd.prototype.g;Jr.prototype.send=Jr.prototype.u;Jr.prototype.open=Jr.prototype.m;Jr.prototype.close=Jr.prototype.close;Pp.NO_ERROR=0;Pp.TIMEOUT=8;Pp.HTTP_ERROR=6;GA.COMPLETE="complete";KA.EventType=_h;_h.OPEN="a";_h.CLOSE="b";_h.ERROR="c";_h.MESSAGE="d";Kn.prototype.listen=Kn.prototype.N;gn.prototype.listenOnce=gn.prototype.O;gn.prototype.getLastError=gn.prototype.Oa;gn.prototype.getLastErrorCode=gn.prototype.Ea;gn.prototype.getStatus=gn.prototype.aa;gn.prototype.getResponseJson=gn.prototype.Sa;gn.prototype.getResponseText=gn.prototype.fa;gn.prototype.send=gn.prototype.da;gn.prototype.setWithCredentials=gn.prototype.Ka;var M6=function(){return new Dd},F6=function(){return Rp()},wm=Pp,B6=GA,j6=Ma,Nv={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},U6=Ah,Df=KA,q6=gn;const Tv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ar=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ar.UNAUTHENTICATED=new ar(null),ar.GOOGLE_CREDENTIALS=new ar("google-credentials-uid"),ar.FIRST_PARTY=new ar("first-party-uid"),ar.MOCK_USER=new ar("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl="9.17.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=new lh("@firebase/firestore");function Cv(){return Ia.logLevel}function Xe(t,...e){if(Ia.logLevel<=Ot.DEBUG){const n=e.map(I2);Ia.debug(`Firestore (${yl}): ${t}`,...n)}}function zs(t,...e){if(Ia.logLevel<=Ot.ERROR){const n=e.map(I2);Ia.error(`Firestore (${yl}): ${t}`,...n)}}function T1(t,...e){if(Ia.logLevel<=Ot.WARN){const n=e.map(I2);Ia.warn(`Firestore (${yl}): ${t}`,...n)}}function I2(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t="Unexpected state"){const e=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: `+t;throw zs(e),new Error(e)}function Jt(t,e){t||lt()}function vt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const De={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let tt=class extends ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let js=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xS=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},V6=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ar.UNAUTHENTICATED))}shutdown(){}},$6=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},z6=class{constructor(e){this.t=e,this.currentUser=ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new js;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new js,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new js)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Jt(typeof r.accessToken=="string"),new xS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Jt(e===null||typeof e=="string"),new ar(e)}},H6=class{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=ar.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Jt(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}},W6=class{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new H6(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}},G6=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},K6=class{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{s.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,Xe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Jt(typeof n.token=="string"),this.A=n.token,new G6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kS=class{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Y6(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function jt(t,e){return t<e?-1:t>e?1:0}function Qc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vr=class rd{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new tt(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new tt(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new tt(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rd.fromMillis(Date.now())}static fromDate(e){return rd.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new rd(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let At=class id{constructor(e){this.timestamp=e}static fromTimestamp(e){return new id(e)}static min(){return new id(new vr(0,0))}static max(){return new id(new vr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LS=class C1{constructor(e,n,r){n===void 0?n=0:n>e.length&&lt(),r===void 0?r=e.length-n:r>e.length-n&&lt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return C1.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof C1?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Cn=class sd extends LS{construct(e,n,r){return new sd(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new tt(De.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new sd(n)}static emptyPath(){return new sd([])}};const Q6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let ps=class Ac extends LS{construct(e,n,r){return new Ac(e,n,r)}static isValidIdentifier(e){return Q6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ac.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ac(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new tt(De.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new tt(De.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new tt(De.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new tt(De.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ac(n)}static emptyPath(){return new Ac([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ct=class gu{constructor(e){this.path=e}static fromPath(e){return new gu(Cn.fromString(e))}static fromName(e){return new gu(Cn.fromString(e).popFirst(5))}static empty(){return new gu(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Cn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new gu(new Cn(e.slice()))}};function X6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=At.fromTimestamp(r===1e9?new vr(n+1,0):new vr(n,r));return new Ju(i,ct.empty(),e)}function J6(t){return new Ju(t.readTime,t.key,-1)}let Ju=class x1{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new x1(At.min(),ct.empty(),-1)}static max(){return new x1(At.max(),ct.empty(),-1)}};function Z6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ct.comparator(t.documentKey,e.documentKey),n!==0?n:jt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";let tR=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ih(t){if(t.code!==De.FAILED_PRECONDITION||t.message!==eR)throw t;Xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ue=class Or{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Or((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Or?n:Or.resolve(n)}catch(n){return Or.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Or.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Or.reject(n)}static resolve(e){return new Or((n,r)=>{n(e)})}static reject(e){return new Or((n,r)=>{r(e)})}static waitFor(e){return new Or((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=Or.resolve(!1);for(const r of e)n=n.next(i=>i?Or.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Or((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(f=>{o[u]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new Or((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function Nh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N2=class{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}};N2.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nR=class{constructor(e,n,r,i,s,o,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=c}},RS=class k1{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new k1("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof k1&&e.projectId===this.projectId&&e.database===this.database}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t){return t==null}function Md(t){return t===0&&1/t==-1/0}function rR(t){return typeof t=="number"&&Number.isInteger(t)&&!Md(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zr=class L1{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new L1(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new L1(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Zr.EMPTY_BYTE_STRING=new Zr("");const iR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(t){if(Jt(!!t),typeof t=="string"){let e=0;const n=iR.exec(t);if(Jt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tn(t.seconds),nanos:Tn(t.nanos)}}function Tn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xc(t){return typeof t=="string"?Zr.fromBase64String(t):Zr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function DS(t){const e=t.mapValue.fields.__previous_value__;return OS(e)?DS(e):e}function Zu(t){const e=Ro(t.mapValue.fields.__local_write_time__.timestampValue);return new vr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Na(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?OS(t)?4:sR(t)?9007199254740991:10:lt()}function gs(t,e){if(t===e)return!0;const n=Na(t);if(n!==Na(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zu(t).isEqual(Zu(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Ro(r.timestampValue),o=Ro(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Xc(r.bytesValue).isEqual(Xc(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Tn(r.geoPointValue.latitude)===Tn(i.geoPointValue.latitude)&&Tn(r.geoPointValue.longitude)===Tn(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Tn(r.integerValue)===Tn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Tn(r.doubleValue),o=Tn(i.doubleValue);return s===o?Md(s)===Md(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Qc(t.arrayValue.values||[],e.arrayValue.values||[],gs);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(xv(s)!==xv(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!gs(s[a],o[a])))return!1;return!0}(t,e);default:return lt()}}function eh(t,e){return(t.values||[]).find(n=>gs(n,e))!==void 0}function Jc(t,e){if(t===e)return 0;const n=Na(t),r=Na(e);if(n!==r)return jt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jt(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Tn(i.integerValue||i.doubleValue),a=Tn(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return kv(t.timestampValue,e.timestampValue);case 4:return kv(Zu(t),Zu(e));case 5:return jt(t.stringValue,e.stringValue);case 6:return function(i,s){const o=Xc(i),a=Xc(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let c=0;c<o.length&&c<a.length;c++){const u=jt(o[c],a[c]);if(u!==0)return u}return jt(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=jt(Tn(i.latitude),Tn(s.latitude));return o!==0?o:jt(Tn(i.longitude),Tn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let c=0;c<o.length&&c<a.length;++c){const u=Jc(o[c],a[c]);if(u)return u}return jt(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Mf.mapValue&&s===Mf.mapValue)return 0;if(i===Mf.mapValue)return 1;if(s===Mf.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),c=s.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let f=0;f<a.length&&f<u.length;++f){const d=jt(a[f],u[f]);if(d!==0)return d;const y=Jc(o[a[f]],c[u[f]]);if(y!==0)return y}return jt(a.length,u.length)}(t.mapValue,e.mapValue);default:throw lt()}}function kv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return jt(t,e);const n=Ro(t),r=Ro(e),i=jt(n.seconds,r.seconds);return i!==0?i:jt(n.nanos,r.nanos)}function Zc(t){return R1(t)}function R1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Ro(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Xc(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ct.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=R1(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${R1(r.fields[a])}`;return s+"}"}(t.mapValue):lt();var e,n}function P1(t){return!!t&&"integerValue"in t}function T2(t){return!!t&&"arrayValue"in t}function Lv(t){return!!t&&"nullValue"in t}function Rv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function od(t){return!!t&&"mapValue"in t}function Eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Eu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n){this.position=e,this.inclusive=n}}function Pv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ct.comparator(ct.fromName(o.referenceValue),n.key):r=Jc(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ov(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{}class On extends MS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aR(e,n,r):n==="array-contains"?new uR(e,r):n==="in"?new hR(e,r):n==="not-in"?new fR(e,r):n==="array-contains-any"?new dR(e,r):new On(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cR(e,r):new lR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Jc(n,this.value)):n!==null&&Na(this.value)===Na(n)&&this.matchesComparison(Jc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}let Po=class FS extends MS{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new FS(e,n)}matches(e){return BS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}};function BS(t){return t.op==="and"}function jS(t){return oR(t)&&BS(t)}function oR(t){for(const e of t.filters)if(e instanceof Po)return!1;return!0}function O1(t){if(t instanceof On)return t.field.canonicalString()+t.op.toString()+Zc(t.value);if(jS(t))return t.filters.map(e=>O1(e)).join(",");{const e=t.filters.map(n=>O1(n)).join(",");return`${t.op}(${e})`}}function US(t,e){return t instanceof On?function(n,r){return r instanceof On&&n.op===r.op&&n.field.isEqual(r.field)&&gs(n.value,r.value)}(t,e):t instanceof Po?function(n,r){return r instanceof Po&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&US(s,r.filters[o]),!0):!1}(t,e):void lt()}function qS(t){return t instanceof On?function(e){return`${e.field.canonicalString()} ${e.op} ${Zc(e.value)}`}(t):t instanceof Po?function(e){return e.op.toString()+" {"+e.getFilters().map(qS).join(" ,")+"}"}(t):"Filter"}class aR extends On{constructor(e,n,r){super(e,n,r),this.key=ct.fromName(r.referenceValue)}matches(e){const n=ct.comparator(e.key,this.key);return this.matchesComparison(n)}}class cR extends On{constructor(e,n){super(e,"in",n),this.keys=VS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lR extends On{constructor(e,n){super(e,"not-in",n),this.keys=VS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ct.fromName(r.referenceValue))}class uR extends On{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return T2(n)&&eh(n.arrayValue,this.value)}}class hR extends On{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eh(this.value.arrayValue,n)}}let fR=class extends On{constructor(e,n){super(e,"not-in",n)}matches(e){if(eh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!eh(this.value.arrayValue,n)}};class dR extends On{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!T2(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>eh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n="asc"){this.field=e,this.dir=n}}function pR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){this.comparator=e,this.root=n||Xn.EMPTY}insert(e,n){return new jn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xn.BLACK,null,null))}remove(e){return new jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ff(this.root,e,this.comparator,!0)}}class Ff{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Xn.RED,this.left=i??Xn.EMPTY,this.right=s??Xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Xn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Xn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Xn.EMPTY=null,Xn.RED=!0,Xn.BLACK=!1;Xn.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Xn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.comparator=e,this.data=new jn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dv(this.data.getIterator())}getIteratorFrom(e){return new Dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mn(this.comparator);return n.data=e,n}}class Dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.fields=e,e.sort(ps.comparator)}static empty(){return new Pi([])}unionWith(e){let n=new Mn(ps.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.value=e}static empty(){return new ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!od(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(n)}setAll(e){let n=ps.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Eu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());od(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];od(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){vl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ci(Eu(this.value))}}function $S(t){const e=[];return vl(t.fields,(n,r)=>{const i=new ps([n]);if(od(r)){const s=$S(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Pi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ur(e,0,At.min(),At.min(),At.min(),ci.empty(),0)}static newFoundDocument(e,n,r,i){return new ur(e,1,n,At.min(),r,i,0)}static newNoDocument(e,n){return new ur(e,2,n,At.min(),At.min(),ci.empty(),0)}static newUnknownDocument(e,n){return new ur(e,3,n,At.min(),At.min(),ci.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ur&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ft=null}}function Mv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new gR(t,e,n,r,i,s,o)}function C2(t){const e=vt(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>O1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),qp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zc(r)).join(",")),e.ft=n}return e.ft}function x2(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!US(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ov(t.startAt,e.startAt)&&Ov(t.endAt,e.endAt)}function D1(t){return ct.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.dt=null,this._t=null,this.startAt,this.endAt}}function mR(t,e,n,r,i,s,o,a){return new Vp(t,e,n,r,i,s,o,a)}function $p(t){return new Vp(t)}function Fv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yR(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function vR(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function _R(t){return t.collectionGroup!==null}function Bc(t){const e=vt(t);if(e.dt===null){e.dt=[];const n=vR(e),r=yR(e);if(n!==null&&r===null)n.isKeyField()||e.dt.push(new Iu(n)),e.dt.push(new Iu(ps.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Iu(ps.keyField(),s))}}}return e.dt}function Hs(t){const e=vt(t);if(!e._t)if(e.limitType==="F")e._t=Mv(e.path,e.collectionGroup,Bc(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Bc(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new Iu(s.field,o))}const r=e.endAt?new Fd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Fd(e.startAt.position,e.startAt.inclusive):null;e._t=Mv(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function M1(t,e,n){return new Vp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zp(t,e){return x2(Hs(t),Hs(e))&&t.limitType===e.limitType}function zS(t){return`${C2(Hs(t))}|lt:${t.limitType}`}function F1(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>qS(r)).join(", ")}]`),qp(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zc(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zc(r)).join(",")),`Target(${n})`}(Hs(t))}; limitType=${t.limitType})`}function Hp(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ct.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Bc(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const a=Pv(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,Bc(n),r)||n.endAt&&!function(i,s,o){const a=Pv(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,Bc(n),r))}(t,e)}function wR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HS(t){return(e,n)=>{let r=!1;for(const i of Bc(t)){const s=bR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bR(t,e,n){const r=t.field.isKeyField()?ct.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),c=o.data.field(i);return a!==null&&c!==null?Jc(a,c):lt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function GS(t){return{integerValue:""+t}}function AR(t,e){return rR(e)?GS(e):WS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this._=void 0}}function SR(t,e,n){return t instanceof Bd?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof th?YS(t,e):t instanceof nh?QS(t,e):function(r,i){const s=KS(r,i),o=Bv(s)+Bv(r.gt);return P1(s)&&P1(r.gt)?GS(o):WS(r.yt,o)}(t,e)}function ER(t,e,n){return t instanceof th?YS(t,e):t instanceof nh?QS(t,e):n}function KS(t,e){return t instanceof jd?P1(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class Bd extends Wp{}class th extends Wp{constructor(e){super(),this.elements=e}}function YS(t,e){const n=XS(e);for(const r of t.elements)n.some(i=>gs(i,r))||n.push(r);return{arrayValue:{values:n}}}class nh extends Wp{constructor(e){super(),this.elements=e}}function QS(t,e){let n=XS(e);for(const r of t.elements)n=n.filter(i=>!gs(i,r));return{arrayValue:{values:n}}}class jd extends Wp{constructor(e,n){super(),this.yt=e,this.gt=n}}function Bv(t){return Tn(t.integerValue||t.doubleValue)}function XS(t){return T2(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function IR(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof th&&r instanceof th||n instanceof nh&&r instanceof nh?Qc(n.elements,r.elements,gs):n instanceof jd&&r instanceof jd?gs(n.gt,r.gt):n instanceof Bd&&r instanceof Bd}(t.transform,e.transform)}class NR{constructor(e,n){this.version=e,this.transformResults=n}}class cs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cs}static exists(e){return new cs(void 0,e)}static updateTime(e){return new cs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ad(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gp{}function JS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new k2(t.key,cs.none()):new Th(t.key,t.data,cs.none());{const n=t.data,r=ci.empty();let i=new Mn(ps.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Fa(t.key,r,new Pi(i.toArray()),cs.none())}}function TR(t,e,n){t instanceof Th?function(r,i,s){const o=r.value.clone(),a=Uv(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Fa?function(r,i,s){if(!ad(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=Uv(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(ZS(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Nu(t,e,n,r){return t instanceof Th?function(i,s,o,a){if(!ad(i.precondition,s))return o;const c=i.value.clone(),u=qv(i.fieldTransforms,a,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fa?function(i,s,o,a){if(!ad(i.precondition,s))return o;const c=qv(i.fieldTransforms,a,s),u=s.data;return u.setAll(ZS(i)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,s,o){return ad(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function CR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=KS(r.transform,i||null);s!=null&&(n===null&&(n=ci.empty()),n.set(r.field,s))}return n||null}function jv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Qc(n,r,(i,s)=>IR(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Th extends Gp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fa extends Gp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ZS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Uv(t,e,n){const r=new Map;Jt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ER(o,a,n[i]))}return r}function qv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,SR(s,o,e))}return r}class k2 extends Gp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xR extends Gp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn,xt;function LR(t){switch(t){default:return lt();case De.CANCELLED:case De.UNKNOWN:case De.DEADLINE_EXCEEDED:case De.RESOURCE_EXHAUSTED:case De.INTERNAL:case De.UNAVAILABLE:case De.UNAUTHENTICATED:return!1;case De.INVALID_ARGUMENT:case De.NOT_FOUND:case De.ALREADY_EXISTS:case De.PERMISSION_DENIED:case De.FAILED_PRECONDITION:case De.ABORTED:case De.OUT_OF_RANGE:case De.UNIMPLEMENTED:case De.DATA_LOSS:return!0}}function eE(t){if(t===void 0)return zs("GRPC error has no .code"),De.UNKNOWN;switch(t){case Nn.OK:return De.OK;case Nn.CANCELLED:return De.CANCELLED;case Nn.UNKNOWN:return De.UNKNOWN;case Nn.DEADLINE_EXCEEDED:return De.DEADLINE_EXCEEDED;case Nn.RESOURCE_EXHAUSTED:return De.RESOURCE_EXHAUSTED;case Nn.INTERNAL:return De.INTERNAL;case Nn.UNAVAILABLE:return De.UNAVAILABLE;case Nn.UNAUTHENTICATED:return De.UNAUTHENTICATED;case Nn.INVALID_ARGUMENT:return De.INVALID_ARGUMENT;case Nn.NOT_FOUND:return De.NOT_FOUND;case Nn.ALREADY_EXISTS:return De.ALREADY_EXISTS;case Nn.PERMISSION_DENIED:return De.PERMISSION_DENIED;case Nn.FAILED_PRECONDITION:return De.FAILED_PRECONDITION;case Nn.ABORTED:return De.ABORTED;case Nn.OUT_OF_RANGE:return De.OUT_OF_RANGE;case Nn.UNIMPLEMENTED:return De.UNIMPLEMENTED;case Nn.DATA_LOSS:return De.DATA_LOSS;default:return lt()}}(xt=Nn||(Nn={}))[xt.OK=0]="OK",xt[xt.CANCELLED=1]="CANCELLED",xt[xt.UNKNOWN=2]="UNKNOWN",xt[xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xt[xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xt[xt.NOT_FOUND=5]="NOT_FOUND",xt[xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",xt[xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",xt[xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",xt[xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xt[xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xt[xt.ABORTED=10]="ABORTED",xt[xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",xt[xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",xt[xt.INTERNAL=13]="INTERNAL",xt[xt.UNAVAILABLE=14]="UNAVAILABLE",xt[xt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return PS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new jn(ct.comparator);function Ws(){return RR}const tE=new jn(ct.comparator);function mu(...t){let e=tE;for(const n of t)e=e.insert(n.key,n);return e}function nE(t){let e=tE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ua(){return Tu()}function rE(){return Tu()}function Tu(){return new _l(t=>t.toString(),(t,e)=>t.isEqual(e))}const PR=new jn(ct.comparator),OR=new Mn(ct.comparator);function It(...t){let e=OR;for(const n of t)e=e.add(n);return e}const DR=new Mn(jt);function iE(){return DR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ch.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kp(At.min(),i,iE(),Ws(),It())}}class Ch{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ch(r,n,It(),It(),It())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n,r,i){this.It=e,this.removedTargetIds=n,this.key=r,this.Tt=i}}class sE{constructor(e,n){this.targetId=e,this.Et=n}}class oE{constructor(e,n,r=Zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Vv{constructor(){this.At=0,this.Rt=zv(),this.bt=Zr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=It(),n=It(),r=It();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:lt()}}),new Ch(this.bt,this.Pt,e,n,r)}xt(){this.vt=!1,this.Rt=zv()}Nt(e,n){this.vt=!0,this.Rt=this.Rt.insert(e,n)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class MR{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Ws(),this.qt=$v(),this.Ut=new Mn(jt)}Kt(e){for(const n of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(n,e.Tt):this.Qt(n,e.key,e.Tt);for(const n of e.removedTargetIds)this.Qt(n,e.key,e.Tt)}jt(e){this.forEachTarget(e,n=>{const r=this.Wt(n);switch(e.state){case 0:this.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(n);break;case 3:this.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(n)&&(this.Ht(n),r.Dt(e.resumeToken));break;default:lt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Bt.forEach((r,i)=>{this.zt(i)&&n(i)})}Jt(e){const n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){const s=i.target;if(D1(s))if(r===0){const o=new ct(s.path);this.Qt(n,o,ur.newNoDocument(o,At.min()))}else Jt(r===1);else this.Xt(n)!==r&&(this.Ht(n),this.Ut=this.Ut.add(n))}}Zt(e){const n=new Map;this.Bt.forEach((s,o)=>{const a=this.Yt(o);if(a){if(s.current&&D1(a.target)){const c=new ct(a.target.path);this.Lt.get(c)!==null||this.te(o,c)||this.Qt(o,c,ur.newNoDocument(c,e))}s.St&&(n.set(o,s.Ct()),s.xt())}});let r=It();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Yt(c);return!u||u.purpose===2||(a=!1,!1)}),a&&(r=r.add(s))}),this.Lt.forEach((s,o)=>o.setReadTime(e));const i=new Kp(e,n,this.Ut,this.Lt,r);return this.Lt=Ws(),this.qt=$v(),this.Ut=new Mn(jt),i}Gt(e,n){if(!this.zt(e))return;const r=this.te(e,n.key)?2:0;this.Wt(e).Nt(n.key,r),this.Lt=this.Lt.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ee(n.key).add(e))}Qt(e,n,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,n)?i.Nt(n,1):i.kt(n),this.qt=this.qt.insert(n,this.ee(n).delete(e)),r&&(this.Lt=this.Lt.insert(n,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const n=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let n=this.Bt.get(e);return n||(n=new Vv,this.Bt.set(e,n)),n}ee(e){let n=this.qt.get(e);return n||(n=new Mn(jt),this.qt=this.qt.insert(e,n)),n}zt(e){const n=this.Yt(e)!==null;return n||Xe("WatchChangeAggregator","Detected inactive target",e),n}Yt(e){const n=this.Bt.get(e);return n&&n.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Vv),this.$t.getRemoteKeysForTarget(e).forEach(n=>{this.Qt(e,n,null)})}te(e,n){return this.$t.getRemoteKeysForTarget(e).has(n)}}function $v(){return new jn(ct.comparator)}function zv(){return new jn(ct.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),BR=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),jR=(()=>({and:"AND",or:"OR"}))();class UR{constructor(e,n){this.databaseId=e,this.wt=n}}function Ud(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aE(t,e){return t.wt?e.toBase64():e.toUint8Array()}function qR(t,e){return Ud(t,e.toTimestamp())}function ls(t){return Jt(!!t),At.fromTimestamp(function(e){const n=Ro(e);return new vr(n.seconds,n.nanos)}(t))}function L2(t,e){return function(n){return new Cn(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function cE(t){const e=Cn.fromString(t);return Jt(fE(e)),e}function B1(t,e){return L2(t.databaseId,e.path)}function bm(t,e){const n=cE(e);if(n.get(1)!==t.databaseId.projectId)throw new tt(De.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new tt(De.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ct(lE(n))}function j1(t,e){return L2(t.databaseId,e)}function VR(t){const e=cE(t);return e.length===4?Cn.emptyPath():lE(e)}function U1(t){return new Cn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lE(t){return Jt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Hv(t,e,n){return{name:B1(t,e),fields:n.value.mapValue.fields}}function $R(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:lt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.wt?(Jt(u===void 0||typeof u=="string"),Zr.fromBase64String(u||"")):(Jt(u===void 0||u instanceof Uint8Array),Zr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?De.UNKNOWN:eE(c.code);return new tt(u,c.message||"")}(o);n=new oE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=bm(t,r.document.name),s=ls(r.document.updateTime),o=r.document.createTime?ls(r.document.createTime):At.min(),a=new ci({mapValue:{fields:r.document.fields}}),c=ur.newFoundDocument(i,s,o,a),u=r.targetIds||[],f=r.removedTargetIds||[];n=new cd(u,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=bm(t,r.document),s=r.readTime?ls(r.readTime):At.min(),o=ur.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=bm(t,r.document),s=r.removedTargetIds||[];n=new cd([],s,i,null)}else{if(!("filter"in e))return lt();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new kR(i),o=r.targetId;n=new sE(o,s)}}return n}function zR(t,e){let n;if(e instanceof Th)n={update:Hv(t,e.key,e.value)};else if(e instanceof k2)n={delete:B1(t,e.key)};else if(e instanceof Fa)n={update:Hv(t,e.key,e.data),updateMask:ZR(e.fieldMask)};else{if(!(e instanceof xR))return lt();n={verify:B1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Bd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof th)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof nh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof jd)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw lt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:qR(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:lt()}(t,e.precondition)),n}function HR(t,e){return t&&t.length>0?(Jt(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?ls(r.updateTime):ls(i);return s.isEqual(At.min())&&(s=ls(i)),new NR(s,r.transformResults||[])}(n,e))):[]}function WR(t,e){return{documents:[j1(t,e.path)]}}function GR(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=j1(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=j1(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(c){if(c.length!==0)return hE(Po.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Sc(f.field),direction:QR(f.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(c,u){return c.wt||qp(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function KR(t){let e=VR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Jt(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(f){const d=uE(f);return d instanceof Po&&jS(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(f=>function(d){return new Iu(Ec(d.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction))}(f)));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,qp(d)?null:d}(n.limit));let c=null;n.startAt&&(c=function(f){const d=!!f.before,y=f.values||[];return new Fd(y,d)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const d=!f.before,y=f.values||[];return new Fd(y,d)}(n.endAt)),mR(e,i,o,s,a,"F",c,u)}function YR(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return lt()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function uE(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ec(e.unaryFilter.field);return On.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ec(e.unaryFilter.field);return On.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ec(e.unaryFilter.field);return On.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ec(e.unaryFilter.field);return On.create(s,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(t):t.fieldFilter!==void 0?function(e){return On.create(Ec(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Po.create(e.compositeFilter.filters.map(n=>uE(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return lt()}}(e.compositeFilter.op))}(t):lt()}function QR(t){return FR[t]}function XR(t){return BR[t]}function JR(t){return jR[t]}function Sc(t){return{fieldPath:t.canonicalString()}}function Ec(t){return ps.fromServerFormat(t.fieldPath)}function hE(t){return t instanceof On?function(e){if(e.op==="=="){if(Rv(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NAN"}};if(Lv(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Rv(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NOT_NAN"}};if(Lv(e.value))return{unaryFilter:{field:Sc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sc(e.field),op:XR(e.op),value:e.value}}}(t):t instanceof Po?function(e){const n=e.getFilters().map(r=>hE(r));return n.length===1?n[0]:{compositeFilter:{op:JR(e.op),filters:n}}}(t):lt()}function ZR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&TR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Nu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Nu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=JS(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),It())}isEqual(e){return this.batchId===e.batchId&&Qc(this.mutations,e.mutations,(n,r)=>jv(n,r))&&Qc(this.baseMutations,e.baseMutations,(n,r)=>jv(n,r))}}class R2{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Jt(e.mutations.length===r.length);let i=PR;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new R2(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r,i,s=At.min(),o=At.min(),a=Zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new ya(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.ie=e}}function rP(t){const e=KR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?M1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.Je=new sP}addToCollectionParentIndex(e,n){return this.Je.add(n),Ue.resolve()}getCollectionParents(e,n){return Ue.resolve(this.Je.getEntries(n))}addFieldIndex(e,n){return Ue.resolve()}deleteFieldIndex(e,n){return Ue.resolve()}getDocumentsMatchingTarget(e,n){return Ue.resolve(null)}getIndexType(e,n){return Ue.resolve(0)}getFieldIndexes(e,n){return Ue.resolve([])}getNextCollectionGroupToUpdate(e){return Ue.resolve(null)}getMinOffset(e,n){return Ue.resolve(Ju.min())}getMinOffsetFromCollectionGroup(e,n){return Ue.resolve(Ju.min())}updateCollectionGroup(e,n,r){return Ue.resolve()}updateIndexEntries(e,n){return Ue.resolve()}}class sP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mn(Cn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(Cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new el(0)}static vn(){return new el(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.changes=new _l(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ue.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Nu(r.mutation,i,Pi.empty(),vr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,It()).next(()=>r))}getLocalViewOfDocuments(e,n,r=It()){const i=ua();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=mu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ua();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,It()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ws();const o=Tu(),a=Tu();return n.forEach((c,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Fa)?s=s.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Nu(f.mutation,u,f.mutation.getFieldMask(),vr.now())):o.set(u.key,Pi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,f)=>o.set(u,f)),n.forEach((u,f)=>{var d;return a.set(u,new aP(f,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Tu();let i=new jn((o,a)=>o-a),s=It();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let f=r.get(c)||Pi.empty();f=a.applyToLocalView(u,f),r.set(c,f);const d=(i.get(a.batchId)||It()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,f=c.value,d=rE();f.forEach(y=>{if(!s.has(y)){const g=JS(n.get(y),r.get(y));g!==null&&d.set(y,g),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return Ue.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return ct.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_R(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ue.resolve(ua());let a=-1,c=s;return o.next(u=>Ue.forEach(u,(f,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(f)?Ue.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{c=c.insert(f,y)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,It())).next(f=>({batchId:a,changes:nE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ct(n)).next(r=>{let i=mu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=mu();return this.indexManager.getCollectionParents(e,i).next(o=>Ue.forEach(o,a=>{const c=function(u,f){return new Vp(f,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r).next(u=>{u.forEach((f,d)=>{s=s.insert(f,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,c)=>{const u=c.getKey();s.get(u)===null&&(s=s.insert(u,ur.newInvalidDocument(u)))});let o=mu();return s.forEach((a,c)=>{const u=i.get(a);u!==void 0&&Nu(u.mutation,c,Pi.empty(),vr.now()),Hp(n,c)&&(o=o.insert(a,c))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return Ue.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:ls(r.createTime)}),Ue.resolve()}getNamedQuery(e,n){return Ue.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(r){return{name:r.name,query:rP(r.bundledQuery),readTime:ls(r.readTime)}}(n)),Ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.overlays=new jn(ct.comparator),this.es=new Map}getOverlay(e,n){return Ue.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ua();return Ue.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.oe(e,n,s)}),Ue.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.es.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),Ue.resolve()}getOverlaysForCollection(e,n,r){const i=ua(),s=n.length+1,o=new ct(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Ue.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new jn((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=s.get(u.largestBatchId);f===null&&(f=ua(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=ua(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=i)););return Ue.resolve(a)}oe(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tP(n,r));let s=this.es.get(n);s===void 0&&(s=It(),this.es.set(n,s)),this.es.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.ns=new Mn(zn.ss),this.rs=new Mn(zn.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new zn(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new zn(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new ct(new Cn([])),r=new zn(n,e),i=new zn(n,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new ct(new Cn([])),r=new zn(n,e),i=new zn(n,e+1);let s=It();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new zn(e,0),r=this.ns.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zn{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return ct.comparator(e.key,n.key)||jt(e._s,n._s)}static os(e,n){return jt(e._s,n._s)||ct.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Mn(zn.ss)}checkEmpty(e){return Ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new eP(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.gs=this.gs.add(new zn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ue.resolve(o)}lookupMutationBatch(e,n){return Ue.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ps(r),s=i<0?0:i;return Ue.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zn(n,0),i=new zn(n,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const a=this.ys(o._s);s.push(a)}),Ue.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mn(jt);return n.forEach(i=>{const s=new zn(i,0),o=new zn(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{r=r.add(a._s)})}),Ue.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ct.isDocumentKey(s)||(s=s.child(""));const o=new zn(new ct(s),0);let a=new Mn(jt);return this.gs.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c._s)),!0)},o),Ue.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const i=this.ys(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Jt(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.gs;return Ue.forEach(n.mutations,i=>{const s=new zn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new zn(n,0),i=this.gs.firstAfterOrEqual(r);return Ue.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ue.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.Es=e,this.docs=new jn(ct.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ue.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(n))}getEntries(e,n){let r=Ws();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ur.newInvalidDocument(i))}),Ue.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ws();const o=n.path,a=new ct(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:f}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Z6(J6(f),r)<=0||(i.has(f.key)||Hp(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return Ue.resolve(s)}getAllFromCollectionGroup(e,n,r,i){lt()}As(e,n){return Ue.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dP(this)}getSize(e){return Ue.resolve(this.size)}}class dP extends oP{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),Ue.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.persistence=e,this.Rs=new _l(n=>C2(n),x2),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.bs=0,this.Ps=new P2,this.targetCount=0,this.vs=el.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,i)=>n(i)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),Ue.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new el(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,Ue.resolve()}updateTargetData(e,n){return this.Dn(n),Ue.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ue.waitFor(s).next(()=>i)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return Ue.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),Ue.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Ue.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),Ue.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return Ue.resolve(r)}containsKey(e,n){return Ue.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new N2(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new pP(this),this.indexManager=new iP,this.remoteDocumentCache=function(r){return new fP(r)}(r=>this.referenceDelegate.xs(r)),this.yt=new nP(n),this.Ns=new lP(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new hP(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){Xe("MemoryPersistence","Starting transaction:",e);const i=new mP(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,n){return Ue.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class mP extends tR{constructor(e){super(),this.currentSequenceNumber=e}}class O2{constructor(e){this.persistence=e,this.Fs=new P2,this.$s=null}static Bs(e){return new O2(e)}get Ls(){if(this.$s)return this.$s;throw lt()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),Ue.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),Ue.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),Ue.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.Ls,r=>{const i=ct.fromPath(r);return this.qs(e,i).next(s=>{s||n.removeEntry(i,At.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.qs(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}qs(e,n){return Ue.or([()=>Ue.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=i}static Ci(e,n){let r=It(),i=It();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new D2(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.ki(e,n).next(s=>s||this.Oi(e,n,i,r)).next(s=>s||this.Mi(e,n))}ki(e,n){if(Fv(n))return Ue.resolve(null);let r=Hs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=M1(n,null,"F"),r=Hs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=It(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Fi(n,a);return this.$i(n,u,o,c.readTime)?this.ki(e,M1(n,null,"F")):this.Bi(e,u,n,c)}))})))}Oi(e,n,r,i){return Fv(n)||i.isEqual(At.min())?this.Mi(e,n):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(n,s);return this.$i(n,o,r,i)?this.Mi(e,n):(Cv()<=Ot.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),F1(n)),this.Bi(e,o,n,X6(i,-1)))})}Fi(e,n){let r=new Mn(HS(e));return n.forEach((i,s)=>{Hp(e,s)&&(r=r.add(s))}),r}$i(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,n){return Cv()<=Ot.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",F1(n)),this.Ni.getDocumentsMatchingQuery(e,n,Ju.min())}Bi(e,n,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n,r,i){this.persistence=e,this.Li=n,this.yt=i,this.qi=new jn(jt),this.Ui=new _l(s=>C2(s),x2),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cP(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.qi))}}function _P(t,e,n,r){return new vP(t,e,n,r)}async function dE(t,e){const n=vt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=It();for(const u of i){o.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}for(const u of s){a.push(u.batchId);for(const f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(u=>({ji:u,removedBatchIds:o,addedBatchIds:a}))})})}function wP(t,e){const n=vt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,c,u){const f=c.batch,d=f.keys();let y=Ue.resolve();return d.forEach(g=>{y=y.next(()=>u.getEntry(a,g)).next(w=>{const _=c.docVersions.get(g);Jt(_!==null),w.version.compareTo(_)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),y.next(()=>o.mutationQueue.removeMutationBatch(a,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=It();for(let c=0;c<o.mutationResults.length;++c)o.mutationResults[c].transformResults.length>0&&(a=a.add(o.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function pE(t){const e=vt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function bP(t,e){const n=vt(t),r=e.snapshotVersion;let i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;const a=[];e.targetChanges.forEach((f,d)=>{const y=i.get(d);if(!y)return;a.push(n.Cs.removeMatchingKeys(s,f.removedDocuments,d).next(()=>n.Cs.addMatchingKeys(s,f.addedDocuments,d)));let g=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(d)?g=g.withResumeToken(Zr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):f.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(f.resumeToken,r)),i=i.insert(d,g),function(w,_,T){return w.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(y,g,f)&&a.push(n.Cs.updateTargetData(s,g))});let c=Ws(),u=It();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(AP(s,o,e.documentUpdates).next(f=>{c=f.Wi,u=f.zi})),!r.isEqual(At.min())){const f=n.Cs.getLastRemoteSnapshotVersion(s).next(d=>n.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return Ue.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.qi=i,s))}function AP(t,e,n){let r=It(),i=It();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ws();return n.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(At.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):Xe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Wi:o,zi:i}})}function SP(t,e){const n=vt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function EP(t,e){const n=vt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Cs.getTargetData(r,e).next(s=>s?(i=s,Ue.resolve(i)):n.Cs.allocateTargetId(r).next(o=>(i=new ya(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.qi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.qi=n.qi.insert(r.targetId,r),n.Ui.set(e,r.targetId)),r})}async function q1(t,e,n){const r=vt(t),i=r.qi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Nh(o))throw o;Xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}function Wv(t,e,n){const r=vt(t);let i=At.min(),s=It();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,u){const f=vt(a),d=f.Ui.get(u);return d!==void 0?Ue.resolve(f.qi.get(d)):f.Cs.getTargetData(c,u)}(r,o,Hs(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?i:At.min(),n?s:It())).next(a=>(IP(r,wR(e),a),{documents:a,Hi:s})))}function IP(t,e,n){let r=t.Ki.get(e)||At.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ki.set(e,r)}class Gv{constructor(){this.activeTargetIds=iE()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NP{constructor(){this.Lr=new Gv,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,n,r){this.qr[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Gv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{Ur(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,r,i,s){const o=this.ho(e,n);Xe("RestConnection","Sending: ",o,r);const a={};return this.lo(a,i,s),this.fo(e,o,a,r).then(c=>(Xe("RestConnection","Received: ",c),c),c=>{throw T1("RestConnection",`${e} failed with error: `,c,"url: ",o,"request:",r),c})}_o(e,n,r,i,s,o){return this.ao(e,n,r,i,s)}lo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+yl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,n){const r=CP[e];return`${this.oo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,r,i){return new Promise((s,o)=>{const a=new q6;a.setWithCredentials(!0),a.listenOnce(B6.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case wm.NO_ERROR:const u=a.getResponseJson();Xe("Connection","XHR received:",JSON.stringify(u)),s(u);break;case wm.TIMEOUT:Xe("Connection",'RPC "'+e+'" timed out'),o(new tt(De.DEADLINE_EXCEEDED,"Request time out"));break;case wm.HTTP_ERROR:const f=a.getStatus();if(Xe("Connection",'RPC "'+e+'" failed with status:',f,"response text:",a.getResponseText()),f>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const y=d==null?void 0:d.error;if(y&&y.status&&y.message){const g=function(w){const _=w.toLowerCase().replace(/_/g,"-");return Object.values(De).indexOf(_)>=0?_:De.UNKNOWN}(y.status);o(new tt(g,y.message))}else o(new tt(De.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new tt(De.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Xe("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(i);a.send(n,"POST",c,r,15)})}wo(e,n,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=M6(),o=F6(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new U6({})),this.lo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const c=i.join("");Xe("Connection","Creating WebChannel: "+c,a);const u=s.createWebChannel(c,a);let f=!1,d=!1;const y=new xP({Hr:w=>{d?Xe("Connection","Not sending because WebChannel is closed:",w):(f||(Xe("Connection","Opening WebChannel transport."),u.open(),f=!0),Xe("Connection","WebChannel sending:",w),u.send(w))},Jr:()=>u.close()}),g=(w,_,T)=>{w.listen(_,S=>{try{T(S)}catch(k){setTimeout(()=>{throw k},0)}})};return g(u,Df.EventType.OPEN,()=>{d||Xe("Connection","WebChannel transport opened.")}),g(u,Df.EventType.CLOSE,()=>{d||(d=!0,Xe("Connection","WebChannel transport closed"),y.io())}),g(u,Df.EventType.ERROR,w=>{d||(d=!0,T1("Connection","WebChannel transport errored:",w),y.io(new tt(De.UNAVAILABLE,"The operation could not be completed")))}),g(u,Df.EventType.MESSAGE,w=>{var _;if(!d){const T=w.data[0];Jt(!!T);const S=T,k=S.error||((_=S[0])===null||_===void 0?void 0:_.error);if(k){Xe("Connection","WebChannel received error:",k);const j=k.status;let Y=function(me){const te=Nn[me];if(te!==void 0)return eE(te)}(j),oe=k.message;Y===void 0&&(Y=De.INTERNAL,oe="Unknown error status: "+j+" with message "+k.message),d=!0,y.io(new tt(Y,oe)),u.close()}else Xe("Connection","WebChannel received:",T),y.ro(T)}}),g(o,j6.STAT_EVENT,w=>{w.stat===Nv.PROXY?Xe("Connection","Detected buffering proxy"):w.stat===Nv.NOPROXY&&Xe("Connection","Detected no buffering proxy")}),setTimeout(()=>{y.so()},0),y}}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t){return new UR(t,!0)}class gE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=n,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r,i,s,o,a,c){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new gE(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===De.RESOURCE_EXHAUSTED?(zs(n.toString()),zs("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===De.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===n&&this.Go(r,i)},r=>{e(()=>{const i=new tt(De.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return Xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(Xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LP extends mE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.yt=s}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=$R(this.yt,e),r=function(i){if(!("targetChange"in i))return At.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?At.min():s.readTime?ls(s.readTime):At.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=U1(this.yt),n.addTarget=function(i,s){let o;const a=s.target;return o=D1(a)?{documents:WR(i,a)}:{query:GR(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=aE(i,s.resumeToken):s.snapshotVersion.compareTo(At.min())>0&&(o.readTime=Ud(i,s.snapshotVersion.toTimestamp())),o}(this.yt,e);const r=YR(this.yt,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=U1(this.yt),n.removeTarget=e,this.Bo(n)}}class RP extends mE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(Jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=HR(e.writeResults,e.commitTime),r=ls(e.commitTime);return this.listener.Zo(r,n)}return Jt(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=U1(this.yt),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>zR(this.yt,r))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new tt(De.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new tt(De.UNKNOWN,i.toString())})}_o(e,n,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new tt(De.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class OP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(zs(n),this.ou=!1):Xe("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(o=>{r.enqueueAndForget(async()=>{Ba(this)&&(Xe("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=vt(a);c._u.add(4),await xh(c),c.gu.set("Unknown"),c._u.delete(4),await Qp(c)}(this))})}),this.gu=new OP(r,i)}}async function Qp(t){if(Ba(t))for(const e of t.wu)await e(!0)}async function xh(t){for(const e of t.wu)await e(!1)}function yE(t,e){const n=vt(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),B2(n)?F2(n):wl(n).ko()&&M2(n,e))}function vE(t,e){const n=vt(t),r=wl(n);n.du.delete(e),r.ko()&&_E(n,e),n.du.size===0&&(r.ko()?r.Fo():Ba(n)&&n.gu.set("Unknown"))}function M2(t,e){t.yu.Ot(e.targetId),wl(t).zo(e)}function _E(t,e){t.yu.Ot(e),wl(t).Ho(e)}function F2(t){t.yu=new MR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),wl(t).start(),t.gu.uu()}function B2(t){return Ba(t)&&!wl(t).No()&&t.du.size>0}function Ba(t){return vt(t)._u.size===0}function wE(t){t.yu=void 0}async function MP(t){t.du.forEach((e,n)=>{M2(t,e)})}async function FP(t,e){wE(t),B2(t)?(t.gu.hu(e),F2(t)):t.gu.set("Unknown")}async function BP(t,e,n){if(t.gu.set("Online"),e instanceof oE&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.du.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.du.delete(o),r.yu.removeTarget(o))}(t,e)}catch(r){Xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qd(t,r)}else if(e instanceof cd?t.yu.Kt(e):e instanceof sE?t.yu.Jt(e):t.yu.jt(e),!n.isEqual(At.min()))try{const r=await pE(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.yu.Zt(s);return o.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=i.du.get(c);u&&i.du.set(c,u.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const c=i.du.get(a);if(!c)return;i.du.set(a,c.withResumeToken(Zr.EMPTY_BYTE_STRING,c.snapshotVersion)),_E(i,a);const u=new ya(c.target,a,1,c.sequenceNumber);M2(i,u)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Xe("RemoteStore","Failed to raise snapshot:",r),await qd(t,r)}}async function qd(t,e,n){if(!Nh(e))throw e;t._u.add(1),await xh(t),t.gu.set("Offline"),n||(n=()=>pE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Xe("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await Qp(t)})}function bE(t,e){return e().catch(n=>qd(t,n,e))}async function Xp(t){const e=vt(t),n=Oo(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;jP(e);)try{const i=await SP(e.localStore,r);if(i===null){e.fu.length===0&&n.Fo();break}r=i.batchId,UP(e,i)}catch(i){await qd(e,i)}AE(e)&&SE(e)}function jP(t){return Ba(t)&&t.fu.length<10}function UP(t,e){t.fu.push(e);const n=Oo(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function AE(t){return Ba(t)&&!Oo(t).No()&&t.fu.length>0}function SE(t){Oo(t).start()}async function qP(t){Oo(t).eu()}async function VP(t){const e=Oo(t);for(const n of t.fu)e.Xo(n.mutations)}async function $P(t,e,n){const r=t.fu.shift(),i=R2.from(r,e,n);await bE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Xp(t)}async function zP(t,e){e&&Oo(t).Yo&&await async function(n,r){if(i=r.code,LR(i)&&i!==De.ABORTED){const s=n.fu.shift();Oo(n).Mo(),await bE(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Xp(n)}var i}(t,e),AE(t)&&SE(t)}async function Yv(t,e){const n=vt(t);n.asyncQueue.verifyOperationInProgress(),Xe("RemoteStore","RemoteStore received new credentials");const r=Ba(n);n._u.add(3),await xh(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await Qp(n)}async function HP(t,e){const n=vt(t);e?(n._u.delete(2),await Qp(n)):e||(n._u.add(2),await xh(n),n.gu.set("Unknown"))}function wl(t){return t.pu||(t.pu=function(e,n,r){const i=vt(e);return i.su(),new LP(n,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(t.datastore,t.asyncQueue,{Yr:MP.bind(null,t),Zr:FP.bind(null,t),Wo:BP.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),B2(t)?F2(t):t.gu.set("Unknown")):(await t.pu.stop(),wE(t))})),t.pu}function Oo(t){return t.Iu||(t.Iu=function(e,n,r){const i=vt(e);return i.su(),new RP(n,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(t.datastore,t.asyncQueue,{Yr:qP.bind(null,t),Zr:zP.bind(null,t),tu:VP.bind(null,t),Zo:$P.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await Xp(t)):(await t.Iu.stop(),t.fu.length>0&&(Xe("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new j2(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(De.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U2(t,e){if(zs("AsyncQueue",`${e}: ${t}`),Nh(t))return new tt(De.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ct.comparator(n.key,r.key):(n,r)=>ct.comparator(n.key,r.key),this.keyedMap=mu(),this.sortedSet=new jn(this.comparator)}static emptySet(e){return new jc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.Tu=new jn(ct.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?e.type!==0&&r.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&r.type!==1?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Tu=this.Tu.remove(n):e.type===1&&r.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):lt():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class tl{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new tl(e,n,jc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.Au=void 0,this.listeners=[]}}class GP{constructor(){this.queries=new _l(e=>zS(e),zp),this.onlineState="Unknown",this.Ru=new Set}}async function q2(t,e){const n=vt(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new WP),i)try{s.Au=await n.onListen(r)}catch(o){const a=U2(o,`Initialization of query '${F1(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.bu(n.onlineState),s.Au&&e.Pu(s.Au)&&$2(n)}async function V2(t,e){const n=vt(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function KP(t,e){const n=vt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.Pu(i)&&(r=!0);o.Au=i}}r&&$2(n)}function YP(t,e,n){const r=vt(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function $2(t){t.Ru.forEach(e=>{e.next()})}class z2{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Nu||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.key=e}}class IE{constructor(e){this.key=e}}class QP{constructor(e,n){this.query=e,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=It(),this.mutatedKeys=It(),this.Gu=HS(e),this.Qu=new jc(this.Gu)}get ju(){return this.qu}Wu(e,n){const r=n?n.zu:new Qv,i=n?n.Qu:this.Qu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,d)=>{const y=i.get(f),g=Hp(this.query,d)?d:null,w=!!y&&this.mutatedKeys.has(y.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;y&&g?y.data.isEqual(g.data)?w!==_&&(r.track({type:3,doc:g}),T=!0):this.Hu(y,g)||(r.track({type:2,doc:g}),T=!0,(c&&this.Gu(g,c)>0||u&&this.Gu(g,u)<0)&&(a=!0)):!y&&g?(r.track({type:0,doc:g}),T=!0):y&&!g&&(r.track({type:1,doc:y}),T=!0,(c||u)&&(a=!0)),T&&(g?(o=o.add(g),s=_?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Qu:o,zu:r,$i:a,mutatedKeys:s}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((u,f)=>function(d,y){const g=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return g(d)-g(y)}(u.type,f.type)||this.Gu(u.doc,f.doc)),this.Ju(r);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,c=a!==this.Uu;return this.Uu=a,s.length!==0||c?{snapshot:new tl(this.query,e.Qu,i,s,e.mutatedKeys,a===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Qv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.qu=this.qu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qu=this.qu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=It(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const n=[];return e.forEach(r=>{this.Ku.has(r)||n.push(new IE(r))}),this.Ku.forEach(r=>{e.has(r)||n.push(new EE(r))}),n}tc(e){this.qu=e.Hi,this.Ku=It();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return tl.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class XP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class JP{constructor(e){this.key=e,this.nc=!1}}class ZP{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new _l(a=>zS(a),zp),this.rc=new Map,this.oc=new Set,this.uc=new jn(ct.comparator),this.cc=new Map,this.ac=new P2,this.hc={},this.lc=new Map,this.fc=el.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function eO(t,e){const n=uO(t);let r,i;const s=n.ic.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const o=await EP(n.localStore,Hs(e));n.isPrimaryClient&&yE(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await tO(n,e,r,a==="current",o.resumeToken)}return i}async function tO(t,e,n,r,i){t._c=(d,y,g)=>async function(w,_,T,S){let k=_.view.Wu(T);k.$i&&(k=await Wv(w.localStore,_.query,!1).then(({documents:oe})=>_.view.Wu(oe,k)));const j=S&&S.targetChanges.get(_.targetId),Y=_.view.applyChanges(k,w.isPrimaryClient,j);return Jv(w,_.targetId,Y.Xu),Y.snapshot}(t,d,y,g);const s=await Wv(t.localStore,e,!0),o=new QP(e,s.Hi),a=o.Wu(s.documents),c=Ch.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);Jv(t,n,u.Xu);const f=new XP(e,n,o);return t.ic.set(e,f),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),u.snapshot}async function nO(t,e){const n=vt(t),r=n.ic.get(e),i=n.rc.get(r.targetId);if(i.length>1)return n.rc.set(r.targetId,i.filter(s=>!zp(s,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await q1(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),vE(n.remoteStore,r.targetId),V1(n,r.targetId)}).catch(Ih)):(V1(n,r.targetId),await q1(n.localStore,r.targetId,!0))}async function rO(t,e,n){const r=hO(t);try{const i=await function(s,o){const a=vt(s),c=vr.now(),u=o.reduce((y,g)=>y.add(g.key),It());let f,d;return a.persistence.runTransaction("Locally write mutations","readwrite",y=>{let g=Ws(),w=It();return a.Gi.getEntries(y,u).next(_=>{g=_,g.forEach((T,S)=>{S.isValidDocument()||(w=w.add(T))})}).next(()=>a.localDocuments.getOverlayedDocuments(y,g)).next(_=>{f=_;const T=[];for(const S of o){const k=CR(S,f.get(S.key).overlayedDocument);k!=null&&T.push(new Fa(S.key,k,$S(k.value.mapValue),cs.exists(!0)))}return a.mutationQueue.addMutationBatch(y,c,T,o)}).next(_=>{d=_;const T=_.applyToLocalDocumentSet(f,w);return a.documentOverlayCache.saveOverlays(y,_.batchId,T)})}).then(()=>({batchId:d.batchId,changes:nE(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let c=s.hc[s.currentUser.toKey()];c||(c=new jn(jt)),c=c.insert(o,a),s.hc[s.currentUser.toKey()]=c}(r,i.batchId,n),await kh(r,i.changes),await Xp(r.remoteStore)}catch(i){const s=U2(i,"Failed to persist write");n.reject(s)}}async function NE(t,e){const n=vt(t);try{const r=await bP(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.cc.get(s);o&&(Jt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.nc=!0:i.modifiedDocuments.size>0?Jt(o.nc):i.removedDocuments.size>0&&(Jt(o.nc),o.nc=!1))}),await kh(n,r,e)}catch(r){await Ih(r)}}function Xv(t,e,n){const r=vt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ic.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=vt(s);a.onlineState=o;let c=!1;a.queries.forEach((u,f)=>{for(const d of f.listeners)d.bu(o)&&(c=!0)}),c&&$2(a)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iO(t,e,n){const r=vt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.cc.get(e),s=i&&i.key;if(s){let o=new jn(ct.comparator);o=o.insert(s,ur.newNoDocument(s,At.min()));const a=It().add(s),c=new Kp(At.min(),new Map,new Mn(jt),o,a);await NE(r,c),r.uc=r.uc.remove(s),r.cc.delete(e),H2(r)}else await q1(r.localStore,e,!1).then(()=>V1(r,e,n)).catch(Ih)}async function sO(t,e){const n=vt(t),r=e.batch.batchId;try{const i=await wP(n.localStore,e);CE(n,r,null),TE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kh(n,i)}catch(i){await Ih(i)}}async function oO(t,e,n){const r=vt(t);try{const i=await function(s,o){const a=vt(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,o).next(f=>(Jt(f!==null),u=f.keys(),a.mutationQueue.removeMutationBatch(c,f))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,e);CE(r,e,n),TE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kh(r,i)}catch(i){await Ih(i)}}function TE(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function CE(t,e,n){const r=vt(t);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function V1(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.rc.get(e))t.ic.delete(r),n&&t.sc.wc(r,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(r=>{t.ac.containsKey(r)||xE(t,r)})}function xE(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(vE(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),H2(t))}function Jv(t,e,n){for(const r of n)r instanceof EE?(t.ac.addReference(r.key,e),aO(t,r)):r instanceof IE?(Xe("SyncEngine","Document no longer in limbo: "+r.key),t.ac.removeReference(r.key,e),t.ac.containsKey(r.key)||xE(t,r.key)):lt()}function aO(t,e){const n=e.key,r=n.path.canonicalString();t.uc.get(n)||t.oc.has(r)||(Xe("SyncEngine","New document in limbo: "+n),t.oc.add(r),H2(t))}function H2(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new ct(Cn.fromString(e)),r=t.fc.next();t.cc.set(r,new JP(n)),t.uc=t.uc.insert(n,r),yE(t.remoteStore,new ya(Hs($p(n.path)),r,2,N2.at))}}async function kh(t,e,n){const r=vt(t),i=[],s=[],o=[];r.ic.isEmpty()||(r.ic.forEach((a,c)=>{o.push(r._c(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const f=D2.Ci(c.targetId,u);s.push(f)}}))}),await Promise.all(o),r.sc.Wo(i),await async function(a,c){const u=vt(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ue.forEach(c,d=>Ue.forEach(d.Si,y=>u.persistence.referenceDelegate.addReference(f,d.targetId,y)).next(()=>Ue.forEach(d.Di,y=>u.persistence.referenceDelegate.removeReference(f,d.targetId,y)))))}catch(f){if(!Nh(f))throw f;Xe("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const d=f.targetId;if(!f.fromCache){const y=u.qi.get(d),g=y.snapshotVersion,w=y.withLastLimboFreeSnapshotVersion(g);u.qi=u.qi.insert(d,w)}}}(r.localStore,s))}async function cO(t,e){const n=vt(t);if(!n.currentUser.isEqual(e)){Xe("SyncEngine","User change. New user:",e.toKey());const r=await dE(n.localStore,e);n.currentUser=e,function(i,s){i.lc.forEach(o=>{o.forEach(a=>{a.reject(new tt(De.CANCELLED,s))})}),i.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kh(n,r.ji)}}function lO(t,e){const n=vt(t),r=n.cc.get(e);if(r&&r.nc)return It().add(r.key);{let i=It();const s=n.rc.get(e);if(!s)return i;for(const o of s){const a=n.ic.get(o);i=i.unionWith(a.view.ju)}return i}}function uO(t){const e=vt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iO.bind(null,e),e.sc.Wo=KP.bind(null,e.eventManager),e.sc.wc=YP.bind(null,e.eventManager),e}function hO(t){const e=vt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oO.bind(null,e),e}class fO{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=Yp(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return _P(this.persistence,new yP,e.initialUser,this.yt)}yc(e){return new gP(O2.Bs,this.yt)}gc(e){return new NP}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class dO{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cO.bind(null,this.syncEngine),await HP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new GP}createDatastore(e){const n=Yp(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new kP(i));var i;return function(s,o,a,c){return new PP(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>Xv(this.syncEngine,a,0),o=Kv.C()?new Kv:new TP,new DP(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,c,u){const f=new ZP(r,i,s,o,a,c);return u&&(f.dc=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=vt(e);Xe("RemoteStore","RemoteStore shutting down."),n._u.add(5),await xh(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e,n){if(!n)throw new tt(De.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pO(t,e,n,r){if(e===!0&&r===!0)throw new tt(De.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zv(t){if(!ct.isDocumentKey(t))throw new tt(De.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function e_(t){if(ct.isDocumentKey(t))throw new tt(De.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function W2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":lt()}function us(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new tt(De.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=W2(t);throw new tt(De.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;class n_{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new tt(De.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new tt(De.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,pO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new tt(De.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new tt(De.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n_(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new V6;switch(n.type){case"gapi":const r=n.client;return new W6(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new tt(De.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=t_.get(e);n&&(Xe("ComponentProvider","Removing Datastore"),t_.delete(e),n.terminate())}(this),Promise.resolve()}}function gO(t,e,n,r={}){var i;const s=(t=us(t,Jp))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&T1("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=ar.MOCK_USER;else{o=qb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new tt(De.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new ar(c)}t._authCredentials=new $6(new xS(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qr(this.firestore,e,this._key)}}class Lh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lh(this.firestore,e,this._query)}}class Co extends Lh{constructor(e,n,r){super(e,n,$p(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qr(this.firestore,null,new ct(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function Ta(t,e,...n){if(t=Bn(t),kE("collection","path",e),t instanceof Jp){const r=Cn.fromString(e,...n);return e_(r),new Co(t,null,r)}{if(!(t instanceof Qr||t instanceof Co))throw new tt(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Cn.fromString(e,...n));return e_(r),new Co(t.firestore,null,r)}}function LE(t,e,...n){if(t=Bn(t),arguments.length===1&&(e=kS.R()),kE("doc","path",e),t instanceof Jp){const r=Cn.fromString(e,...n);return Zv(r),new Qr(t,null,new ct(r))}{if(!(t instanceof Qr||t instanceof Co))throw new tt(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Cn.fromString(e,...n));return Zv(r),new Qr(t.firestore,t instanceof Co?t.converter:null,new ct(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):zs("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ar.UNAUTHENTICATED,this.clientId=kS.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Xe("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Xe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new tt(De.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=U2(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yO(t,e){t.asyncQueue.verifyOperationInProgress(),Xe("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await dE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function vO(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _O(t);Xe("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>Yv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Yv(e.remoteStore,s)),t.onlineComponents=e}async function _O(t){return t.offlineComponents||(Xe("FirestoreClient","Using default OfflineComponentProvider"),await yO(t,new fO)),t.offlineComponents}async function RE(t){return t.onlineComponents||(Xe("FirestoreClient","Using default OnlineComponentProvider"),await vO(t,new dO)),t.onlineComponents}function wO(t){return RE(t).then(e=>e.syncEngine)}async function Vd(t){const e=await RE(t),n=e.eventManager;return n.onListen=eO.bind(null,e.syncEngine),n.onUnlisten=nO.bind(null,e.syncEngine),n}function bO(t,e,n={}){const r=new js;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,c){const u=new G2({next:d=>{s.enqueueAndForget(()=>V2(i,f));const y=d.docs.has(o);!y&&d.fromCache?c.reject(new tt(De.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&d.fromCache&&a&&a.source==="server"?c.reject(new tt(De.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),f=new z2($p(o.path),u,{includeMetadataChanges:!0,Nu:!0});return q2(i,f)}(await Vd(t),t.asyncQueue,e,n,r)),r.promise}function AO(t,e,n={}){const r=new js;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,a,c){const u=new G2({next:d=>{s.enqueueAndForget(()=>V2(i,f)),d.fromCache&&a.source==="server"?c.reject(new tt(De.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),f=new z2(o,u,{includeMetadataChanges:!0,Nu:!0});return q2(i,f)}(await Vd(t),t.asyncQueue,e,n,r)),r.promise}class SO{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new gE(this,"async_queue_retry"),this.Wc=()=>{const n=Am();n&&Xe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Am();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=Am();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new js;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Nh(e))throw e;Xe("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{this.Kc=r,this.Gc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw zs("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Gc=!1,r))));return this.Bc=n,n}enqueueAfterDelay(e,n,r){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const i=j2.createAndSchedule(this,e,n,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&lt()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function r_(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ca extends Jp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new SO,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||OE(this),this._firestoreClient.terminate()}}function PE(t,e){const n=typeof t=="object"?t:Ap(),r=typeof t=="string"?t:e||"(default)",i=bp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=jb("firestore");s&&gO(i,...s)}return i}function Zp(t){return t._firestoreClient||OE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function OE(t){var e;const n=t._freezeSettings(),r=function(i,s,o,a){return new nR(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new mO(t._authCredentials,t._appCheckCredentials,t._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nl(Zr.fromBase64String(e))}catch(n){throw new tt(De.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nl(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new tt(De.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ps(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new tt(De.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new tt(De.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=/^__.*__$/;class IO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Th(e,this.data,n,this.fieldTransforms)}}function ME(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class Y2{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Y2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return $d(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(ME(this.sa)&&EO.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class NO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.yt=r||Yp(e)}da(e,n,r,i=!1){return new Y2({sa:e,methodName:n,fa:r,path:ps.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function TO(t){const e=t._freezeSettings(),n=Yp(t._databaseId);return new NO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CO(t,e,n,r,i,s={}){const o=t.da(s.merge||s.mergeFields?2:0,e,n,i);UE("Data must be an object, but it was:",o,r);const a=BE(r,o);let c,u;if(s.merge)c=new Pi(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const d of s.mergeFields){const y=xO(e,d,n);if(!o.contains(y))throw new tt(De.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);LO(f,y)||f.push(y)}c=new Pi(f),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new IO(new ci(a),c,u)}function FE(t,e){if(jE(t=Bn(t)))return UE("Unsupported field value:",e,t),BE(t,e);if(t instanceof DE)return function(n,r){if(!ME(r.sa))throw r.ha(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=FE(o,r.aa(s));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Bn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return AR(r.yt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=vr.fromDate(n);return{timestampValue:Ud(r.yt,i)}}if(n instanceof vr){const i=new vr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ud(r.yt,i)}}if(n instanceof eg)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof nl)return{bytesValue:aE(r.yt,n._byteString)};if(n instanceof Qr){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:L2(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.ha(`Unsupported field value: ${W2(n)}`)}(t,e)}function BE(t,e){const n={};return PS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vl(t,(r,i)=>{const s=FE(i,e.ra(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function jE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vr||t instanceof eg||t instanceof nl||t instanceof Qr||t instanceof DE)}function UE(t,e,n){if(!jE(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=W2(n);throw r==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+r)}}function xO(t,e,n){if((e=Bn(e))instanceof K2)return e._internalPath;if(typeof e=="string")return qE(t,e);throw $d("Field path arguments must be of type string or ",t,!1,void 0,n)}const kO=new RegExp("[~\\*/\\[\\]]");function qE(t,e,n){if(e.search(kO)>=0)throw $d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new K2(...e.split("."))._internalPath}catch{throw $d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $d(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new tt(De.INVALID_ARGUMENT,a+t+c)}function LO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($E("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RO extends VE{data(){return super.data()}}function $E(t,e){return typeof e=="string"?qE(t,e):e instanceof K2?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new tt(De.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PO{convertValue(e,n="none"){switch(Na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw lt()}}convertObject(e,n){const r={};return vl(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new eg(Tn(e.latitude),Tn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=DS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zu(e));default:return null}}convertTimestamp(e){const n=Ro(e);return new vr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Cn.fromString(e);Jt(fE(r));const i=new RS(r.get(1),r.get(3)),s=new ct(r.popFirst(5));return i.isEqual(n)||zs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class HE extends VE{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($E("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ld extends HE{data(e={}){return super.data(e)}}class WE{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new yu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ld(this._firestore,this._userDataWriter,r.key,r,new yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new tt(De.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const a=new ld(r._firestore,r._userDataWriter,o.doc.key,o.doc,new yu(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const a=new ld(r._firestore,r._userDataWriter,o.doc.key,o.doc,new yu(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return o.type!==0&&(c=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),u=s.indexOf(o.doc.key)),{type:DO(o.type),doc:a,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function DO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t){t=us(t,Qr);const e=us(t.firestore,Ca);return bO(Zp(e),t._key).then(n=>YE(e,t,n))}class Q2 extends PO{constructor(e){super(),this.firestore=e}convertBytes(e){return new nl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qr(this.firestore,null,n)}}function MO(t){t=us(t,Lh);const e=us(t.firestore,Ca),n=Zp(e),r=new Q2(e);return zE(t._query),AO(n,t._query).then(i=>new WE(e,r,t,i))}function FO(t){return KE(us(t.firestore,Ca),[new k2(t._key,cs.none())])}function BO(t,e){const n=us(t.firestore,Ca),r=LE(t),i=OO(t.converter,e);return KE(n,[CO(TO(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,cs.exists(!1))]).then(()=>r)}function X2(t,...e){var n,r,i;t=Bn(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||r_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(r_(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,f;if(t instanceof Qr)u=us(t.firestore,Ca),f=$p(t._key.path),c={next:d=>{e[o]&&e[o](YE(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=us(t,Lh);u=us(d.firestore,Ca),f=d._query;const y=new Q2(u);c={next:g=>{e[o]&&e[o](new WE(u,y,d,g))},error:e[o+1],complete:e[o+2]},zE(t._query)}return function(d,y,g,w){const _=new G2(w),T=new z2(y,_,g);return d.asyncQueue.enqueueAndForget(async()=>q2(await Vd(d),T)),()=>{_.bc(),d.asyncQueue.enqueueAndForget(async()=>V2(await Vd(d),T))}}(Zp(u),f,a,c)}function KE(t,e){return function(n,r){const i=new js;return n.asyncQueue.enqueueAndForget(async()=>rO(await wO(n),r,i)),i.promise}(Zp(t),e)}function YE(t,e,n){const r=n.docs.get(e._key),i=new Q2(t);return new HE(t,i,e._key,r,new yu(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){yl=n})(Oa),ds(new Ui("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Ca(new z6(n.getProvider("auth-internal")),new K6(n.getProvider("app-check-internal")),function(a,c){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new tt(De.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new RS(a.options.projectId,c)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Yr(Tv,"3.8.3",t),Yr(Tv,"3.8.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="firebasestorage.googleapis.com",XE="storageBucket",jO=2*60*1e3,UO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends ys{constructor(e,n,r=0){super(Sm(e),`Firebase Storage: ${n} (${Sm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xn||(xn={}));function Sm(t){return"storage/"+t}function J2(){const t="An unknown error occurred, please check the error payload for server response.";return new kn(xn.UNKNOWN,t)}function qO(t){return new kn(xn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function VO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new kn(xn.UNAUTHENTICATED,t)}function $O(){return new kn(xn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zO(t){return new kn(xn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function HO(){return new kn(xn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WO(){return new kn(xn.CANCELED,"User canceled the upload/download.")}function GO(t){return new kn(xn.INVALID_URL,"Invalid URL '"+t+"'.")}function KO(t){return new kn(xn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function YO(){return new kn(xn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XE+"' property when initializing the app?")}function QO(){return new kn(xn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function XO(t){return new kn(xn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $1(t){return new kn(xn.INVALID_ARGUMENT,t)}function JE(){return new kn(xn.APP_DELETED,"The Firebase app was deleted.")}function JO(t){return new kn(xn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cu(t,e){return new kn(xn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function nu(t){throw new kn(xn.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Kr.makeFromUrl(e,n)}catch{return new Kr(e,"")}if(r.path==="")return r;throw KO(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(Y){Y.path_=decodeURIComponent(Y.path)}const f="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",g=new RegExp(`^https?://${d}/${f}/b/${i}/o${y}`,"i"),w={bucket:1,path:3},_=n===QE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",S=new RegExp(`^https?://${_}/${i}/${T}`,"i"),j=[{regex:a,indices:c,postModify:s},{regex:g,indices:w,postModify:u},{regex:S,indices:{bucket:1,path:2},postModify:u}];for(let Y=0;Y<j.length;Y++){const oe=j[Y],me=oe.regex.exec(e);if(me){const te=me[oe.indices.bucket];let F=me[oe.indices.path];F||(F=""),r=new Kr(te,F),oe.postModify(r);break}}if(r==null)throw GO(e);return r}}class ZO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let u=!1;function f(...T){u||(u=!0,e.apply(null,T))}function d(T){i=setTimeout(()=>{i=null,t(g,c())},T)}function y(){s&&clearTimeout(s)}function g(T,...S){if(u){y();return}if(T){y(),f.call(null,T,...S);return}if(c()||o){y(),f.call(null,T,...S);return}r<64&&(r*=2);let j;a===1?(a=2,j=0):j=(r+Math.random())*1e3,d(j)}let w=!1;function _(T){w||(w=!0,y(),!u&&(i!==null?(T||(a=2),clearTimeout(i),d(0)):T||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function t8(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(t){return t!==void 0}function r8(t){return typeof t=="object"&&!Array.isArray(t)}function ZE(t){return typeof t=="string"||t instanceof String}function i_(t){return Z2()&&t instanceof Blob}function Z2(){return typeof Blob<"u"&&!mC()}function s_(t,e,n,r){if(r<e)throw $1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw $1(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function s8(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var va;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(va||(va={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o8(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,n,r,i,s,o,a,c,u,f,d,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=d,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,w)=>{this.resolve_=g,this.reject_=w,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Bf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===va.NO_ERROR,c=s.getStatus();if(!a||o8(c,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===va.ABORT;r(!1,new Bf(!1,null,f));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Bf(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());n8(c)?s(c):s()}catch(c){o(c)}else if(a!==null){const c=J2();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){const c=this.appDelete_?JE():WO();o(c)}else{const c=HO();o(c)}};this.canceled_?n(!1,new Bf(!1,null,!0)):this.backoffId_=e8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function c8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function l8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function u8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function h8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function f8(t,e,n,r,i,s,o=!0){const a=s8(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return u8(u,e),c8(u,n),l8(u,s),h8(u,r),new a8(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d8(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function p8(...t){const e=d8();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Z2())return new Blob(t);throw new kn(xn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function g8(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t){if(typeof atob>"u")throw XO("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Em{constructor(e,n){this.data=e,this.contentType=n||null}}function y8(t,e){switch(t){case rs.RAW:return new Em(e3(e));case rs.BASE64:case rs.BASE64URL:return new Em(t3(t,e));case rs.DATA_URL:return new Em(_8(e),w8(e))}throw J2()}function e3(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function v8(t){let e;try{e=decodeURIComponent(t)}catch{throw Cu(rs.DATA_URL,"Malformed data URL.")}return e3(e)}function t3(t,e){switch(t){case rs.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Cu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case rs.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Cu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=m8(e)}catch(i){throw i.message.includes("polyfill")?i:Cu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class n3{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Cu(rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=b8(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function _8(t){const e=new n3(t);return e.base64?t3(rs.BASE64,e.rest):v8(e.rest)}function w8(t){return new n3(t).contentType}function b8(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){let r=0,i="";i_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(i_(this.data_)){const r=this.data_,i=g8(r,e,n);return i===null?null:new Ao(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ao(r,!0)}}static getBlob(...e){if(Z2()){const n=e.map(r=>r instanceof Ao?r.data_:r);return new Ao(p8.apply(null,n))}else{const n=e.map(o=>ZE(o)?y8(rs.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ao(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(t){let e;try{e=JSON.parse(t)}catch{return null}return r8(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function E8(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function r3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(t,e){return e}class Ar{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||I8}}let jf=null;function N8(t){return!ZE(t)||t.length<2?t:r3(t)}function T8(){if(jf)return jf;const t=[];t.push(new Ar("bucket")),t.push(new Ar("generation")),t.push(new Ar("metageneration")),t.push(new Ar("name","fullPath",!0));function e(s,o){return N8(o)}const n=new Ar("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ar("size");return i.xform=r,t.push(i),t.push(new Ar("timeCreated")),t.push(new Ar("updated")),t.push(new Ar("md5Hash",null,!0)),t.push(new Ar("cacheControl",null,!0)),t.push(new Ar("contentDisposition",null,!0)),t.push(new Ar("contentEncoding",null,!0)),t.push(new Ar("contentLanguage",null,!0)),t.push(new Ar("contentType",null,!0)),t.push(new Ar("metadata","customMetadata",!0)),jf=t,jf}function C8(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Kr(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function x8(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return C8(r,t),r}function k8(t,e,n){const r=A8(e);return r===null?null:x8(t,r,n)}function L8(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class R8{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t){if(!t)throw J2()}function O8(t,e){function n(r,i){const s=k8(t,i,e);return P8(s!==null),s}return n}function D8(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=$O():i=VO():n.getStatus()===402?i=qO(t.bucket):n.getStatus()===403?i=zO(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function M8(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function F8(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=M8(null,e)),r}function B8(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let j="";for(let Y=0;Y<2;Y++)j=j+Math.random().toString().slice(2);return j}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const u=F8(e,r,i),f=L8(u,n),d="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,y=`\r
--`+c+"--",g=Ao.getBlob(d,r,y);if(g===null)throw QO();const w={name:u.fullPath},_=i8(s,t.host,t._protocol),T="POST",S=t.maxUploadRetryTime,k=new R8(_,T,O8(t,n),S);return k.urlParams=w,k.headers=o,k.body=g.uploadData(),k.errorHandler=D8(e),k}class j8{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=va.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=va.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=va.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw nu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class U8 extends j8{initXhr(){this.xhr_.responseType="text"}}function q8(){return new U8}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n){this._service=e,n instanceof Kr?this._location=n:this._location=Kr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xa(e,n)}get root(){const e=new Kr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return r3(this._location.path)}get storage(){return this._service}get parent(){const e=S8(this._location.path);if(e===null)return null;const n=new Kr(this._location.bucket,e);return new xa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw JO(e)}}function V8(t,e,n){t._throwIfRoot("uploadBytes");const r=B8(t.storage,t._location,T8(),new Ao(e,!0),n);return t.storage.makeRequestWithTokens(r,q8).then(i=>({metadata:i,ref:t}))}function $8(t,e){const n=E8(t._location.path,e),r=new Kr(t._location.bucket,n);return new xa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z8(t){return/^[A-Za-z]+:\/\//.test(t)}function H8(t,e){return new xa(t,e)}function i3(t,e){if(t instanceof ey){const n=t;if(n._bucket==null)throw YO();const r=new xa(n,n._bucket);return e!=null?i3(r,e):r}else return e!==void 0?$8(t,e):t}function W8(t,e){if(e&&z8(e)){if(t instanceof ey)return H8(t,e);throw $1("To use ref(service, url), the first argument must be a Storage instance.")}else return i3(t,e)}function o_(t,e){const n=e==null?void 0:e[XE];return n==null?null:Kr.makeFromBucketSpec(n,t)}function G8(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:qb(i,t.app.options.projectId))}class ey{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=QE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jO,this._maxUploadRetryTime=UO,this._requests=new Set,i!=null?this._bucket=Kr.makeFromBucketSpec(i,this._host):this._bucket=o_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kr.makeFromBucketSpec(this._url,e):this._bucket=o_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){s_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){s_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xa(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new ZO(JE());{const o=f8(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const a_="@firebase/storage",c_="0.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="storage";function K8(t,e,n){return t=Bn(t),V8(t,e,n)}function Y8(t,e){return t=Bn(t),W8(t,e)}function o3(t=Ap(),e){t=Bn(t);const r=bp(t,s3).getImmediate({identifier:e}),i=jb("storage");return i&&Q8(r,...i),r}function Q8(t,e,n,r={}){G8(t,e,n,r)}function X8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ey(n,r,i,e,Oa)}function J8(){ds(new Ui(s3,X8,"PUBLIC").setMultipleInstances(!0)),Yr(a_,c_,""),Yr(a_,c_,"esm2017")}J8();const ty=Kb({apiKey:"AIzaSyAqrFZ49K5TCegbHEBbMK2aL0Ku8jD82mI",authDomain:"entregavue.firebaseapp.com",projectId:"entregavue",storageBucket:"entregavue.appspot.com",messagingSenderId:"232532919948",appId:"1:232532919948:web:b5407f792e39e4269b9da9"});PE(ty);const Bi=jL(ty);o3(ty);const Z8={key:3},eD={key:0,class:"preload"},tD={key:1},nD={__name:"cabecera",setup(t){let e=gr("");Da(Bi,i=>{i&&(i.uid,e.value=i.email)});function n(){Ik(Bi).then(()=>{e="",location.reload()}).catch(i=>{})}const r=gr(!0);return V0(()=>{setTimeout(()=>{r.value=!1},2e3)}),(i,s)=>{const o=ba("router-link"),a=ba("router-view");return Ze(),it(sn,null,[Ne("header",null,[Ne("nav",null,[zt(o,{to:"/"},{default:Mr(()=>[lr("Inicio")]),_:1}),zt(o,{to:"/ofimatica"},{default:Mr(()=>[lr("Ofimatica")]),_:1}),zt(o,{to:"/programacion"},{default:Mr(()=>[lr("Programacin")]),_:1}),zt(o,{to:"/SOs"},{default:Mr(()=>[lr("SOs")]),_:1}),mt(e)=="admin@gmail.com"?(Ze(),s1(o,{key:0,to:"/privado"},{default:Mr(()=>[lr("Administracin")]),_:1})):ln("",!0),mt(e)==""?(Ze(),s1(o,{key:1,to:"/registro"},{default:Mr(()=>[lr("Login")]),_:1})):(Ze(),it("button",{key:2,onClick:n},"Cerrar sesion")),mt(e)!=""?(Ze(),it("p",Z8,cr(mt(e)),1)):ln("",!0)])]),Ne("main",null,[r.value?(Ze(),it("div",eD)):(Ze(),it("div",tD,[zt(a)]))])],64)}}},rD=yp(nD,[["__scopeId","data-v-dcd6ef66"]]);const iD={__name:"App",setup(t){return(e,n)=>(Ze(),it(sn,null,[zt(rD),zt(aC)],64))}},sD=yp(iD,[["__scopeId","data-v-91d38b6c"]]);const oD="/assets/fox_inicio-4796bcea.png",aD={},cD=Ne("h1",null,"Bienvenido CodeFox",-1),lD=Ne("img",{src:oD},null,-1),uD=Ne("p",null,"CodeFox es una empresa que se dedica a ofrecer cursos de informtica.Somos especialistas en diversos lenguajes de programacin como Python,Javascript y PHP. Te invitamos a echarle un ojo a nuestros cursos.",-1);function hD(t,e){return Ze(),it(sn,null,[cD,lD,uD],64)}const fD=yp(aD,[["render",hD]]);const dD=Ne("legend",null,[Ne("h2",null,"Registro Usuario")],-1),pD=Ne("br",null,null,-1),gD=Ne("br",null,null,-1),mD=Ne("br",null,null,-1),yD=Ne("br",null,null,-1),vD=Ne("br",null,null,-1),_D=Ne("br",null,null,-1),wD=Ne("br",null,null,-1),bD=Ne("br",null,null,-1),AD=Ne("br",null,null,-1),SD={__name:"registro",setup(t){var e=gr(""),n=gr("");function r(){bk(Bi,e.value,n.value).then(a=>{a.user}).catch(a=>{a.code,a.message})}function i(){Ak(Bi,e.value,n.value).then(a=>{a.user}).catch(a=>{a.code,a.message})}const s=new ki;function o(){Yk(Bi,s).then(a=>{ki.credentialFromResult(a).accessToken,a.user}).catch(a=>{a.code,a.message,a.customData.email,ki.credentialFromError(a)})}return(a,c)=>(Ze(),it("fieldset",null,[dD,pD,lr(" Email: "),A5(Ne("input",{type:"text",name:"",id:"","onUpdate:modelValue":c[0]||(c[0]=u=>Dn(e)?e.value=u:e=u),placeholder:"Email"},null,512),[[q5,mt(e)]]),gD,mD,lr(" Password: "),A5(Ne("input",{type:"password",name:"",id:"","onUpdate:modelValue":c[1]||(c[1]=u=>Dn(n)?n.value=u:n=u),placeholder:"Contrasea"},null,512),[[q5,mt(n)]]),yD,vD,Ne("button",{onClick:r},"Registro de usuario"),_D,wD,Ne("button",{onClick:i},"Login de usuario"),bD,AD,Ne("button",{onClick:o},"Login de Google")]))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new Map,ID={activated:!1,tokenObservers:[]};function ms(t){return ED.get(t)||Object.assign({},ID)}const l_={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new qu,await TD(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new qu,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function TD(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={["already-initialized"]:"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.",["use-before-activation"]:"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.",["fetch-network-error"]:"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",["fetch-parse-error"]:"Fetch client could not parse response. Original error: {$originalErrorMessage}.",["fetch-status-error"]:"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["recaptcha-error"]:"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},zd=new hl("appCheck","AppCheck",CD);function xD(t){if(!ms(t).activated)throw zd.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="firebase-app-check-database",LD=1,z1="firebase-app-check-store";let Uf=null;function RD(){return Uf||(Uf=new Promise((t,e)=>{try{const n=indexedDB.open(kD,LD);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(zd.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(z1,{keyPath:"compositeKey"})}}}catch(n){e(zd.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),Uf)}function PD(t,e){return OD(DD(t),e)}async function OD(t,e){const r=(await RD()).transaction(z1,"readwrite"),s=r.objectStore(z1).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(zd.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function DD(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new lh("@firebase/app-check");function u_(t,e){return zb()?PD(t,e).catch(n=>{H1.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD={error:"UNKNOWN_ERROR"};function FD(t){return vp.encodeString(JSON.stringify(t),!1)}async function W1(t,e=!1){const n=t.app;xD(n);const r=ms(n);let i=r.token,s;if(i&&!vu(i)&&(r.token=void 0,i=void 0),!i){const c=await r.cachedTokenPromise;c&&(vu(c)?i=c:await u_(n,void 0))}if(!e&&i&&vu(i))return{token:i.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await ms(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?H1.warn(c.message):H1.error(c),s=c}let a;return i?s?vu(i)?a={token:i.token,internalError:s}:a=f_(s):(a={token:i.token},r.token=i,await u_(n,i)):a=f_(s),o&&UD(n,a),a}function BD(t,e,n,r){const{app:i}=t,s=ms(i),o={next:n,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&vu(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),h_(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>h_(t))}function a3(t,e){const n=ms(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function h_(t){const{app:e}=t,n=ms(e);let r=n.tokenRefresher;r||(r=jD(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function jD(t){const{app:e}=t;return new ND(async()=>{const n=ms(e);let r;if(n.token?r=await W1(t,!0):r=await W1(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=ms(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},l_.RETRIAL_MIN_WAIT,l_.RETRIAL_MAX_WAIT)}function UD(t,e){const n=ms(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function vu(t){return t.expireTimeMillis-Date.now()>0}function f_(t){return{token:FD(MD),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=ms(this.app);for(const n of e)a3(this.app,n.next);return Promise.resolve()}}function VD(t,e){return new qD(t,e)}function $D(t){return{getToken:e=>W1(t,e),addTokenListener:e=>BD(t,"INTERNAL",e),removeTokenListener:e=>a3(t.app,e)}}const zD="@firebase/app-check",HD="0.6.3",WD="app-check",d_="app-check-internal";function GD(){ds(new Ui(WD,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return VD(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(d_).initialize()})),ds(new Ui(d_,t=>{const e=t.getProvider("app-check").getImmediate();return $D(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Yr(zD,HD)}GD();var KD="firebase",YD="9.17.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr(KD,YD,"app");const QD=Symbol("firebaseApp");function ny(t){return gp()&&Mi(QD,null)||Ap(t)}const Fs=()=>{};function ry(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function XD(t,e,n){const r=(""+e).split("."),i=r.pop(),s=r.reduce((o,a)=>o&&o[a],t);if(s!=null)return Array.isArray(s)?s.splice(Number(i),1,n):s[i]=n}function ja(t){return!!t&&typeof t=="object"}const JD=Object.prototype;function ZD(t){return ja(t)&&Object.getPrototypeOf(t)===JD}function iy(t){return ja(t)&&t.type==="document"}function e7(t){return ja(t)&&t.type==="collection"}function t7(t){return iy(t)||e7(t)}function n7(t){return ja(t)&&t.type==="query"}function r7(t){return ja(t)&&"ref"in t}function i7(t){return ja(t)&&typeof t.bucket=="string"}function s7(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}function o7(){return!!(gp()&&Mi(Rb,null))}const p_="@firebase/database",g_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c3="";function a7(t){c3=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Jn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Vu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ks(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new c7(e)}}catch{}return new l7},ha=l3("localStorage"),G1=l3("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new lh("@firebase/database"),u7=function(){let t=1;return function(){return t++}}(),u3=function(t){const e=kC(t),n=new IC;n.update(e);const r=n.digest();return vp.encodeByteArray(r)},Rh=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Rh.apply(null,r):typeof r=="object"?e+=Jn(r):e+=r,e+=" "}return e};let _a=null,m_=!0;const h7=function(t,e){$e(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Uc.logLevel=Ot.VERBOSE,_a=Uc.log.bind(Uc),e&&G1.set("logging_enabled",!0)):typeof t=="function"?_a=t:(_a=null,G1.remove("logging_enabled"))},hr=function(...t){if(m_===!0&&(m_=!1,_a===null&&G1.get("logging_enabled")===!0&&h7(!0)),_a){const e=Rh.apply(null,t);_a(e)}},Ph=function(t){return function(...e){hr(t,...e)}},K1=function(...t){const e="FIREBASE INTERNAL ERROR: "+Rh(...t);Uc.error(e)},ka=function(...t){const e=`FIREBASE FATAL ERROR: ${Rh(...t)}`;throw Uc.error(e),new Error(e)},Xr=function(...t){const e="FIREBASE WARNING: "+Rh(...t);Uc.warn(e)},f7=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},h3=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},d7=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},rl="[MIN_NAME]",La="[MAX_NAME]",bl=function(t,e){if(t===e)return 0;if(t===rl||e===La)return-1;if(e===rl||t===La)return 1;{const n=y_(t),r=y_(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},p7=function(t,e){return t===e?0:t<e?-1:1},ru=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Jn(e))},sy=function(t){if(typeof t!="object"||t===null)return Jn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Jn(e[r]),n+=":",n+=sy(t[e[r]]);return n+="}",n},f3=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function fi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const d3=function(t){$e(!h3(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const f=u.join("");let d="";for(c=0;c<64;c+=8){let y=parseInt(f.substr(c,8),2).toString(16);y.length===1&&(y="0"+y),d=d+y}return d.toLowerCase()},g7=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},m7=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},y7=new RegExp("^-?(0*)\\d{1,10}$"),v7=-2147483648,_7=2147483647,y_=function(t){if(y7.test(t)){const e=Number(t);if(e>=v7&&e<=_7)return e}return null},Oh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Xr("Exception was thrown by user callback.",n),e},Math.floor(0))}},w7=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xu=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(hr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xr(e)}}class Y1{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Y1.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="5",p3="v",g3="s",m3="r",y3="f",v3=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_3="ls",w3="p",Q1="ac",b3="websocket",A3="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ha.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ha.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function E7(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function S3(t,e,n){$e(typeof e=="string","typeof type must == string"),$e(typeof n=="object","typeof params must == object");let r;if(e===b3)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===A3)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);E7(t)&&(n.ns=t.namespace);const i=[];return fi(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(){this.counters_={}}incrementCounter(e,n=1){Ks(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return lC(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im={},Nm={};function ay(t){const e=t.toString();return Im[e]||(Im[e]=new I7),Im[e]}function N7(t,e){const n=t.toString();return Nm[n]||(Nm[n]=e()),Nm[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Oh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="start",C7="close",x7="pLPCommand",k7="pRTLPCB",E3="id",I3="pw",N3="ser",L7="cb",R7="seg",P7="ts",O7="d",D7="dframe",T3=1870,C3=30,M7=T3-C3,F7=25e3,B7=3e4;class xc{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ph(e),this.stats_=ay(n),this.urlFn=c=>(this.appCheckToken&&(c[Q1]=this.appCheckToken),S3(n,A3,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new T7(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(B7)),d7(()=>{if(this.isClosed_)return;this.scriptTagHolder=new cy((...s)=>{const[o,a,c,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===v_)this.id=a,this.password=c;else if(o===C7)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[v_]="t",r[N3]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[L7]=this.scriptTagHolder.uniqueCallbackIdentifier),r[p3]=oy,this.transportSessionId&&(r[g3]=this.transportSessionId),this.lastSessionId&&(r[_3]=this.lastSessionId),this.applicationId&&(r[w3]=this.applicationId),this.appCheckToken&&(r[Q1]=this.appCheckToken),typeof location<"u"&&location.hostname&&v3.test(location.hostname)&&(r[m3]=y3);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xc.forceAllow_=!0}static forceDisallow(){xc.forceDisallow_=!0}static isAvailable(){return xc.forceAllow_?!0:!xc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!g7()&&!m7()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Jn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Mb(n),i=f3(r,M7);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[D7]="t",r[E3]=e,r[I3]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Jn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class cy{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=u7(),window[x7+this.uniqueCallbackIdentifier]=e,window[k7+this.uniqueCallbackIdentifier]=n,this.myIFrame=cy.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){hr("frame writing exception"),a.stack&&hr(a.stack),hr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||hr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[E3]=this.myID,e[I3]=this.myPW,e[N3]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+C3+r.length<=T3;){const o=this.pendingSegs.shift();r=r+"&"+R7+i+"="+o.seg+"&"+P7+i+"="+o.ts+"&"+O7+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(F7)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{hr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7=16384,U7=45e3;let Hd=null;typeof MozWebSocket<"u"?Hd=MozWebSocket:typeof WebSocket<"u"&&(Hd=WebSocket);class Li{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ph(this.connId),this.stats_=ay(n),this.connURL=Li.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[p3]=oy,typeof location<"u"&&location.hostname&&v3.test(location.hostname)&&(o[m3]=y3),n&&(o[g3]=n),r&&(o[_3]=r),i&&(o[Q1]=i),s&&(o[w3]=s),S3(e,b3,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ha.set("previous_websocket_failure",!0);try{let r;$b(),this.mySock=new Hd(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){Li.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Hd!==null&&!Li.forceDisallow_}static previouslyFailed(){return ha.isInMemoryStorage||ha.get("previous_websocket_failure")===!0}markConnectionHealthy(){ha.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Vu(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if($e(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Jn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=f3(n,j7);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(U7))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Li.responsesRequiredToBeHealthy=2;Li.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[xc,Li]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Li&&Li.isAvailable();let r=n&&!Li.previouslyFailed();if(e.webSocketOnly&&(n||Xr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Li];else{const i=this.transports_=[];for(const s of rh.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);rh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}rh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7=6e4,V7=5e3,$7=10*1024,z7=100*1024,Tm="t",__="d",H7="s",w_="r",W7="e",b_="o",A_="a",S_="n",E_="p",G7="h";class K7{constructor(e,n,r,i,s,o,a,c,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ph("c:"+this.id+":"),this.transportManager_=new rh(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>z7?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$7?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Tm in e){const n=e[Tm];n===A_?this.upgradeIfSecondaryHealthy_():n===w_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===b_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ru("t",e),r=ru("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:E_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:A_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:S_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ru("t",e),r=ru("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ru(Tm,e);if(__ in e){const r=e[__];if(n===G7){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===S_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===H7?this.onConnectionShutdown_(r):n===w_?this.onReset_(r):n===W7?K1("Server Error: "+r):n===b_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):K1("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),oy!==r&&Xr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),xu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(q7))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(V7))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:E_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ha.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.allowedEvents_=e,this.listeners_={},$e(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){$e(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd extends k3{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!W0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Wd}getInitialEvent(e){return $e(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=32,N_=768;class rn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Gt(){return new rn("")}function kt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Do(t){return t.pieces_.length-t.pieceNum_}function tn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new rn(t.pieces_,e)}function L3(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Y7(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function R3(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function P3(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new rn(e,0)}function Gn(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof rn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new rn(n,0)}function Tt(t){return t.pieceNum_>=t.pieces_.length}function li(t,e){const n=kt(t),r=kt(e);if(n===null)return e;if(n===r)return li(tn(t),tn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function O3(t,e){if(Do(t)!==Do(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Oi(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Do(t)>Do(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Q7{constructor(e,n){this.errorPrefix_=n,this.parts_=R3(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=wp(this.parts_[r]);D3(this)}}function X7(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=wp(e),D3(t)}function J7(t){const e=t.parts_.pop();t.byteLength_-=wp(e),t.parts_.length>0&&(t.byteLength_-=1)}function D3(t){if(t.byteLength_>N_)throw new Error(t.errorPrefix_+"has a key path longer than "+N_+" bytes ("+t.byteLength_+").");if(t.parts_.length>I_)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+I_+") or object contains a cycle "+ea(t))}function ea(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly extends k3{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ly}getInitialEvent(e){return $e(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=1e3,Z7=60*5*1e3,T_=30*1e3,eM=1.3,tM=3e4,nM="server_kill",C_=3;class Us extends x3{constructor(e,n,r,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Us.nextPersistentConnectionId_++,this.log_=Ph("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=iu,this.maxReconnectDelay_=Z7,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!$b())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ly.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Wd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Jn(s)),$e(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new qu,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),$e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$e(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const c=a.d,u=a.s;Us.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ks(e,"w")){const r=Kc(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Xr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||EC(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=T_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=SC(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),$e(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Jn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):K1("Unrecognized action received from server: "+Jn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){$e(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=iu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=iu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>tM&&(this.reconnectDelay_=iu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*eM)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Us.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(d){$e(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:u};const f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,y]=await Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);o?hr("getToken() completed but was canceled"):(hr("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=y&&y.token,a=new K7(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,g=>{Xr(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(nM)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Xr(d),c())}}}interrupt(e){hr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){hr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],c1(this.interruptReasons_)&&(this.reconnectDelay_=iu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>sy(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new rn(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){hr("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=C_&&(this.reconnectDelay_=T_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){hr("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=C_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+c3.replace(/\./g,"-")]=1,W0()?e["framework.cordova"]=1:Vb()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Wd.getInstance().currentlyOnline();return c1(this.interruptReasons_)&&e}}Us.nextPersistentConnectionId_=0;Us.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Lt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Lt(rl,e),i=new Lt(rl,n);return this.compare(r,i)!==0}minPost(){return Lt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf;class M3 extends tg{static get __EMPTY_NODE(){return qf}static set __EMPTY_NODE(e){qf=e}compare(e,n){return bl(e.name,n.name)}isDefinedOn(e){throw ul("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Lt.MIN}maxPost(){return new Lt(La,qf)}makePost(e,n){return $e(typeof e=="string","KeyIndex indexValue must always be a string."),new Lt(e,qf)}toString(){return".key"}}const qc=new M3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Hn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Hn.RED,this.left=i??Fr.EMPTY_NODE,this.right=s??Fr.EMPTY_NODE}copy(e,n,r,i,s){return new Hn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Fr.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Fr.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Hn.RED=!0;Hn.BLACK=!1;class rM{copy(e,n,r,i,s){return this}insert(e,n,r){return new Hn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Fr{constructor(e,n=Fr.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Fr(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Hn.BLACK,null,null))}remove(e){return new Fr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Hn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Vf(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Vf(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Vf(this.root_,null,this.comparator_,!0,e)}}Fr.EMPTY_NODE=new rM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(t,e){return bl(t.name,e.name)}function uy(t,e){return bl(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X1;function sM(t){X1=t}const F3=function(t){return typeof t=="number"?"number:"+d3(t):"string:"+t},B3=function(t){if(t.isLeafNode()){const e=t.val();$e(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ks(e,".sv"),"Priority must be a string or number.")}else $e(t===X1||t.isEmpty(),"priority of unexpected type.");$e(t===X1||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x_;class $n{constructor(e,n=$n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,$e(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),B3(this.priorityNode_)}static set __childrenNodeConstructor(e){x_=e}static get __childrenNodeConstructor(){return x_}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new $n(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:$n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Tt(e)?this:kt(e)===".priority"?this.priorityNode_:$n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:$n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=kt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:($e(r!==".priority"||Do(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,$n.__childrenNodeConstructor.EMPTY_NODE.updateChild(tn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+F3(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=d3(this.value_):e+=this.value_,this.lazyHash_=u3(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===$n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof $n.__childrenNodeConstructor?-1:($e(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=$n.VALUE_TYPE_ORDER.indexOf(n),s=$n.VALUE_TYPE_ORDER.indexOf(r);return $e(i>=0,"Unknown leaf type: "+n),$e(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}$n.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j3,U3;function oM(t){j3=t}function aM(t){U3=t}class cM extends tg{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?bl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Lt.MIN}maxPost(){return new Lt(La,new $n("[PRIORITY-POST]",U3))}makePost(e,n){const r=j3(e);return new Lt(n,new $n("[PRIORITY-POST]",r))}toString(){return".priority"}}const pr=new cM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=Math.log(2);class uM{constructor(e){const n=s=>parseInt(Math.log(s)/lM,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Gd=function(t,e,n,r){t.sort(e);const i=function(c,u){const f=u-c;let d,y;if(f===0)return null;if(f===1)return d=t[c],y=n?n(d):d,new Hn(y,d.node,Hn.BLACK,null,null);{const g=parseInt(f/2,10)+c,w=i(c,g),_=i(g+1,u);return d=t[g],y=n?n(d):d,new Hn(y,d.node,Hn.BLACK,w,_)}},s=function(c){let u=null,f=null,d=t.length;const y=function(w,_){const T=d-w,S=d;d-=w;const k=i(T+1,S),j=t[T],Y=n?n(j):j;g(new Hn(Y,j.node,_,null,k))},g=function(w){u?(u.left=w,u=w):(f=w,u=w)};for(let w=0;w<c.count;++w){const _=c.nextBitIsOne(),T=Math.pow(2,c.count-(w+1));_?y(T,Hn.BLACK):(y(T,Hn.BLACK),y(T,Hn.RED))}return f},o=new uM(t.length),a=s(o);return new Fr(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm;const yc={};class Bs{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return $e(yc&&pr,"ChildrenNode.ts has not been loaded"),Cm=Cm||new Bs({".priority":yc},{".priority":pr}),Cm}get(e){const n=Kc(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Fr?n:null}hasIndex(e){return Ks(this.indexSet_,e.toString())}addIndex(e,n){$e(e!==qc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Lt.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Gd(r,e.getCompare()):a=yc;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const f=Object.assign({},this.indexes_);return f[c]=a,new Bs(f,u)}addToIndexes(e,n){const r=bd(this.indexes_,(i,s)=>{const o=Kc(this.indexSet_,s);if($e(o,"Missing index implementation for "+s),i===yc)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Lt.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Gd(a,o.getCompare())}else return yc;else{const a=n.get(e.name);let c=i;return a&&(c=c.remove(new Lt(e.name,a))),c.insert(e,e.node)}});return new Bs(r,this.indexSet_)}removeFromIndexes(e,n){const r=bd(this.indexes_,i=>{if(i===yc)return i;{const s=n.get(e.name);return s?i.remove(new Lt(e.name,s)):i}});return new Bs(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su;class Ut{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&B3(this.priorityNode_),this.children_.isEmpty()&&$e(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return su||(su=new Ut(new Fr(uy),null,Bs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||su}updatePriority(e){return this.children_.isEmpty()?this:new Ut(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?su:n}}getChild(e){const n=kt(e);return n===null?this:this.getImmediateChild(n).getChild(tn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if($e(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Lt(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?su:this.priorityNode_;return new Ut(i,o,s)}}updateChild(e,n){const r=kt(e);if(r===null)return n;{$e(kt(e)!==".priority"||Do(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(tn(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(pr,(o,a)=>{n[o]=a.val(e),r++,s&&Ut.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+F3(this.getPriority().val())+":"),this.forEachChild(pr,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":u3(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Lt(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Lt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Lt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Lt.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Lt.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Dh?-1:0}withIndex(e){if(e===qc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ut(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===qc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(pr),i=n.getIterator(pr);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===qc?null:this.indexMap_.get(e.toString())}}Ut.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class hM extends Ut{constructor(){super(new Fr(uy),Ut.EMPTY_NODE,Bs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ut.EMPTY_NODE}isEmpty(){return!1}}const Dh=new hM;Object.defineProperties(Lt,{MIN:{value:new Lt(rl,Ut.EMPTY_NODE)},MAX:{value:new Lt(La,Dh)}});M3.__EMPTY_NODE=Ut.EMPTY_NODE;$n.__childrenNodeConstructor=Ut;sM(Dh);aM(Dh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=!0;function fr(t,e=null){if(t===null)return Ut.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),$e(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new $n(n,fr(e))}if(!(t instanceof Array)&&fM){const n=[];let r=!1;if(fi(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=fr(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Lt(o,c)))}}),n.length===0)return Ut.EMPTY_NODE;const s=Gd(n,iM,o=>o.name,uy);if(r){const o=Gd(n,pr.getCompare());return new Ut(s,fr(e),new Bs({".priority":o},{".priority":pr}))}else return new Ut(s,fr(e),Bs.Default)}else{let n=Ut.EMPTY_NODE;return fi(t,(r,i)=>{if(Ks(t,r)&&r.substring(0,1)!=="."){const s=fr(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(fr(e))}}oM(fr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM extends tg{constructor(e){super(),this.indexPath_=e,$e(!Tt(e)&&kt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?bl(e.name,n.name):s}makePost(e,n){const r=fr(e),i=Ut.EMPTY_NODE.updateChild(this.indexPath_,r);return new Lt(n,i)}maxPost(){const e=Ut.EMPTY_NODE.updateChild(this.indexPath_,Dh);return new Lt(La,e)}toString(){return R3(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM extends tg{compare(e,n){const r=e.node.compareTo(n.node);return r===0?bl(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Lt.MIN}maxPost(){return Lt.MAX}makePost(e,n){const r=fr(e);return new Lt(n,r)}toString(){return".value"}}const gM=new pM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(t){return{type:"value",snapshotNode:t}}function yM(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function vM(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function k_(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function _M(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $e(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $e(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rl}hasEnd(){return this.endSet_}getIndexEndValue(){return $e(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $e(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:La}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $e(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pr}copy(){const e=new hy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function L_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===pr?n="$priority":t.index_===gM?n="$value":t.index_===qc?n="$key":($e(t.index_ instanceof dM,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Jn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Jn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Jn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Jn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Jn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function R_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==pr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends x3{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Ph("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:($e(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Kd.getListenId_(e,r),a={};this.listens_[o]=a;const c=L_(e._queryParams);this.restRequest_(s+".json",c,(u,f)=>{let d=f;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),Kc(this.listens_,o)===a){let y;u?u===401?y="permission_denied":y="rest_error:"+u:y="ok",i(y,null)}})}unlisten(e,n){const r=Kd.getListenId_(e,n);delete this.listens_[r]}get(e){const n=L_(e._queryParams),r=e._path.toString(),i=new qu;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+fl(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Vu(a.responseText)}catch{Xr("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Xr("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this.rootNode_=Ut.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(){return{value:null,children:new Map}}function q3(t,e,n){if(Tt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=kt(e);t.children.has(r)||t.children.set(r,Yd());const i=t.children.get(r);e=tn(e),q3(i,e,n)}}function J1(t,e,n){t.value!==null?n(e,t.value):bM(t,(r,i)=>{const s=new rn(e.toString()+"/"+r);J1(i,s,n)})}function bM(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&fi(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=10*1e3,SM=30*1e3,EM=5*60*1e3;class IM{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new AM(e);const r=P_+(SM-P_)*Math.random();xu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;fi(e,(i,s)=>{s>0&&Ks(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),xu(this.reportStats_.bind(this),Math.floor(Math.random()*2*EM))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var is;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(is||(is={}));function V3(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $3(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function z3(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=is.ACK_USER_WRITE,this.source=V3()}operationForChild(e){if(Tt(this.path)){if(this.affectedTree.value!=null)return $e(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new rn(e));return new Qd(Gt(),n,this.revert)}}else return $e(kt(this.path)===e,"operationForChild called for unrelated child."),new Qd(tn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=is.OVERWRITE}operationForChild(e){return Tt(this.path)?new Ra(this.source,Gt(),this.snap.getImmediateChild(e)):new Ra(this.source,tn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=is.MERGE}operationForChild(e){if(Tt(this.path)){const n=this.children.subtree(new rn(e));return n.isEmpty()?null:n.value?new Ra(this.source,Gt(),n.value):new ih(this.source,Gt(),n)}else return $e(kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ih(this.source,tn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Tt(e))return this.isFullyInitialized()&&!this.filtered_;const n=kt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function NM(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(_M(o.childName,o.snapshotNode))}),ou(t,i,"child_removed",e,r,n),ou(t,i,"child_added",e,r,n),ou(t,i,"child_moved",s,r,n),ou(t,i,"child_changed",e,r,n),ou(t,i,"value",e,r,n),i}function ou(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,c)=>CM(t,a,c)),o.forEach(a=>{const c=TM(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function TM(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function CM(t,e,n){if(e.childName==null||n.childName==null)throw ul("Should only compare child_ events.");const r=new Lt(e.childName,e.snapshotNode),i=new Lt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t,e){return{eventCache:t,serverCache:e}}function ku(t,e,n,r){return H3(new fy(e,n,r),t.serverCache)}function W3(t,e,n,r){return H3(t.eventCache,new fy(e,n,r))}function Z1(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Pa(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xm;const xM=()=>(xm||(xm=new Fr(p7)),xm);class Zt{constructor(e,n=xM()){this.value=e,this.children=n}static fromObject(e){let n=new Zt(null);return fi(e,(r,i)=>{n=n.set(new rn(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Gt(),value:this.value};if(Tt(e))return null;{const r=kt(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(tn(e),n);return s!=null?{path:Gn(new rn(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Tt(e))return this;{const n=kt(e),r=this.children.get(n);return r!==null?r.subtree(tn(e)):new Zt(null)}}set(e,n){if(Tt(e))return new Zt(n,this.children);{const r=kt(e),s=(this.children.get(r)||new Zt(null)).set(tn(e),n),o=this.children.insert(r,s);return new Zt(this.value,o)}}remove(e){if(Tt(e))return this.children.isEmpty()?new Zt(null):new Zt(null,this.children);{const n=kt(e),r=this.children.get(n);if(r){const i=r.remove(tn(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Zt(null):new Zt(this.value,s)}else return this}}get(e){if(Tt(e))return this.value;{const n=kt(e),r=this.children.get(n);return r?r.get(tn(e)):null}}setTree(e,n){if(Tt(e))return n;{const r=kt(e),s=(this.children.get(r)||new Zt(null)).setTree(tn(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new Zt(this.value,o)}}fold(e){return this.fold_(Gt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Gn(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Gt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Tt(e))return null;{const s=kt(e),o=this.children.get(s);return o?o.findOnPath_(tn(e),Gn(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Gt(),n)}foreachOnPath_(e,n,r){if(Tt(e))return this;{this.value&&r(n,this.value);const i=kt(e),s=this.children.get(i);return s?s.foreachOnPath_(tn(e),Gn(n,i),r):new Zt(null)}}foreach(e){this.foreach_(Gt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Gn(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.writeTree_=e}static empty(){return new ji(new Zt(null))}}function Lu(t,e,n){if(Tt(e))return new ji(new Zt(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=li(i,e);return s=s.updateChild(o,n),new ji(t.writeTree_.set(i,s))}else{const i=new Zt(n),s=t.writeTree_.setTree(e,i);return new ji(s)}}}function O_(t,e,n){let r=t;return fi(n,(i,s)=>{r=Lu(r,Gn(e,i),s)}),r}function D_(t,e){if(Tt(e))return ji.empty();{const n=t.writeTree_.setTree(e,new Zt(null));return new ji(n)}}function e0(t,e){return Ua(t,e)!=null}function Ua(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(li(n.path,e)):null}function M_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(pr,(r,i)=>{e.push(new Lt(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Lt(r,i.value))}),e}function xo(t,e){if(Tt(e))return t;{const n=Ua(t,e);return n!=null?new ji(new Zt(n)):new ji(t.writeTree_.subtree(e))}}function t0(t){return t.writeTree_.isEmpty()}function il(t,e){return G3(Gt(),t.writeTree_,e)}function G3(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?($e(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=G3(Gn(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Gn(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(t,e){return Z3(e,t)}function kM(t,e,n,r,i){$e(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Lu(t.visibleWrites,e,n)),t.lastWriteId=r}function LM(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function RM(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);$e(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&PM(a,r.path)?i=!1:Oi(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return OM(t),!0;if(r.snap)t.visibleWrites=D_(t.visibleWrites,r.path);else{const a=r.children;fi(a,c=>{t.visibleWrites=D_(t.visibleWrites,Gn(r.path,c))})}return!0}else return!1}function PM(t,e){if(t.snap)return Oi(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Oi(Gn(t.path,n),e))return!0;return!1}function OM(t){t.visibleWrites=Y3(t.allWrites,DM,Gt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function DM(t){return t.visible}function Y3(t,e,n){let r=ji.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Oi(n,o)?(a=li(n,o),r=Lu(r,a,s.snap)):Oi(o,n)&&(a=li(o,n),r=Lu(r,Gt(),s.snap.getChild(a)));else if(s.children){if(Oi(n,o))a=li(n,o),r=O_(r,a,s.children);else if(Oi(o,n))if(a=li(o,n),Tt(a))r=O_(r,Gt(),s.children);else{const c=Kc(s.children,kt(a));if(c){const u=c.getChild(tn(a));r=Lu(r,Gt(),u)}}}else throw ul("WriteRecord should have .snap or .children")}}return r}function Q3(t,e,n,r,i){if(!r&&!i){const s=Ua(t.visibleWrites,e);if(s!=null)return s;{const o=xo(t.visibleWrites,e);if(t0(o))return n;if(n==null&&!e0(o,Gt()))return null;{const a=n||Ut.EMPTY_NODE;return il(o,a)}}}else{const s=xo(t.visibleWrites,e);if(!i&&t0(s))return n;if(!i&&n==null&&!e0(s,Gt()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Oi(u.path,e)||Oi(e,u.path))},a=Y3(t.allWrites,o,e),c=n||Ut.EMPTY_NODE;return il(a,c)}}}function MM(t,e,n){let r=Ut.EMPTY_NODE;const i=Ua(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(pr,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=xo(t.visibleWrites,e);return n.forEachChild(pr,(o,a)=>{const c=il(xo(s,new rn(o)),a);r=r.updateImmediateChild(o,c)}),M_(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=xo(t.visibleWrites,e);return M_(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function FM(t,e,n,r,i){$e(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Gn(e,n);if(e0(t.visibleWrites,s))return null;{const o=xo(t.visibleWrites,s);return t0(o)?i.getChild(n):il(o,i.getChild(n))}}function BM(t,e,n,r){const i=Gn(e,n),s=Ua(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=xo(t.visibleWrites,i);return il(o,r.getNode().getImmediateChild(n))}else return null}function jM(t,e){return Ua(t.visibleWrites,e)}function UM(t,e,n,r,i,s,o){let a;const c=xo(t.visibleWrites,e),u=Ua(c,Gt());if(u!=null)a=u;else if(n!=null)a=il(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const f=[],d=o.getCompare(),y=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let g=y.getNext();for(;g&&f.length<i;)d(g,r)!==0&&f.push(g),g=y.getNext();return f}else return[]}function qM(){return{visibleWrites:ji.empty(),allWrites:[],lastWriteId:-1}}function n0(t,e,n,r){return Q3(t.writeTree,t.treePath,e,n,r)}function X3(t,e){return MM(t.writeTree,t.treePath,e)}function F_(t,e,n,r){return FM(t.writeTree,t.treePath,e,n,r)}function Xd(t,e){return jM(t.writeTree,Gn(t.treePath,e))}function VM(t,e,n,r,i,s){return UM(t.writeTree,t.treePath,e,n,r,i,s)}function dy(t,e,n){return BM(t.writeTree,t.treePath,e,n)}function J3(t,e){return Z3(Gn(t.treePath,e),t.writeTree)}function Z3(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;$e(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),$e(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,k_(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,vM(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,yM(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,k_(r,e.snapshotNode,i.oldSnap));else throw ul("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const eI=new zM;class py{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new fy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dy(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Pa(this.viewCache_),s=VM(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function HM(t,e){$e(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),$e(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function WM(t,e,n,r,i){const s=new $M;let o,a;if(n.type===is.OVERWRITE){const u=n;u.source.fromUser?o=r0(t,e,u.path,u.snap,r,i,s):($e(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Tt(u.path),o=Jd(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===is.MERGE){const u=n;u.source.fromUser?o=KM(t,e,u.path,u.children,r,i,s):($e(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=i0(t,e,u.path,u.children,r,i,a,s))}else if(n.type===is.ACK_USER_WRITE){const u=n;u.revert?o=XM(t,e,u.path,r,i,s):o=YM(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===is.LISTEN_COMPLETE)o=QM(t,e,n.path,r,s);else throw ul("Unknown operation type: "+n.type);const c=s.getChanges();return GM(e,o,c),{viewCache:o,changes:c}}function GM(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Z1(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(mM(Z1(e)))}}function tI(t,e,n,r,i,s){const o=e.eventCache;if(Xd(r,n)!=null)return e;{let a,c;if(Tt(n))if($e(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Pa(e),f=u instanceof Ut?u:Ut.EMPTY_NODE,d=X3(r,f);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=n0(r,Pa(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=kt(n);if(u===".priority"){$e(Do(n)===1,"Can't have a priority with additional path components");const f=o.getNode();c=e.serverCache.getNode();const d=F_(r,n,f,c);d!=null?a=t.filter.updatePriority(f,d):a=o.getNode()}else{const f=tn(n);let d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const y=F_(r,n,o.getNode(),c);y!=null?d=o.getNode().getImmediateChild(u).updateChild(f,y):d=o.getNode().getImmediateChild(u)}else d=dy(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,f,i,s):a=o.getNode()}}return ku(e,a,o.isFullyInitialized()||Tt(n),t.filter.filtersNodes())}}function Jd(t,e,n,r,i,s,o,a){const c=e.serverCache;let u;const f=o?t.filter:t.filter.getIndexedFilter();if(Tt(n))u=f.updateFullNode(c.getNode(),r,null);else if(f.filtersNodes()&&!c.isFiltered()){const g=c.getNode().updateChild(n,r);u=f.updateFullNode(c.getNode(),g,null)}else{const g=kt(n);if(!c.isCompleteForPath(n)&&Do(n)>1)return e;const w=tn(n),T=c.getNode().getImmediateChild(g).updateChild(w,r);g===".priority"?u=f.updatePriority(c.getNode(),T):u=f.updateChild(c.getNode(),g,T,w,eI,null)}const d=W3(e,u,c.isFullyInitialized()||Tt(n),f.filtersNodes()),y=new py(i,d,s);return tI(t,d,n,i,y,a)}function r0(t,e,n,r,i,s,o){const a=e.eventCache;let c,u;const f=new py(i,e,s);if(Tt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=ku(e,u,!0,t.filter.filtersNodes());else{const d=kt(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=ku(e,u,a.isFullyInitialized(),a.isFiltered());else{const y=tn(n),g=a.getNode().getImmediateChild(d);let w;if(Tt(y))w=r;else{const _=f.getCompleteChild(d);_!=null?L3(y)===".priority"&&_.getChild(P3(y)).isEmpty()?w=_:w=_.updateChild(y,r):w=Ut.EMPTY_NODE}if(g.equals(w))c=e;else{const _=t.filter.updateChild(a.getNode(),d,w,y,f,o);c=ku(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function B_(t,e){return t.eventCache.isCompleteForChild(e)}function KM(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{const f=Gn(n,c);B_(e,kt(f))&&(a=r0(t,a,f,u,i,s,o))}),r.foreach((c,u)=>{const f=Gn(n,c);B_(e,kt(f))||(a=r0(t,a,f,u,i,s,o))}),a}function j_(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function i0(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;Tt(n)?u=r:u=new Zt(null).setTree(n,r);const f=e.serverCache.getNode();return u.children.inorderTraversal((d,y)=>{if(f.hasChild(d)){const g=e.serverCache.getNode().getImmediateChild(d),w=j_(t,g,y);c=Jd(t,c,new rn(d),w,i,s,o,a)}}),u.children.inorderTraversal((d,y)=>{const g=!e.serverCache.isCompleteForChild(d)&&y.value===null;if(!f.hasChild(d)&&!g){const w=e.serverCache.getNode().getImmediateChild(d),_=j_(t,w,y);c=Jd(t,c,new rn(d),_,i,s,o,a)}}),c}function YM(t,e,n,r,i,s,o){if(Xd(i,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Tt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Jd(t,e,n,c.getNode().getChild(n),i,s,a,o);if(Tt(n)){let u=new Zt(null);return c.getNode().forEachChild(qc,(f,d)=>{u=u.set(new rn(f),d)}),i0(t,e,n,u,i,s,a,o)}else return e}else{let u=new Zt(null);return r.foreach((f,d)=>{const y=Gn(n,f);c.isCompleteForPath(y)&&(u=u.set(f,c.getNode().getChild(y)))}),i0(t,e,n,u,i,s,a,o)}}function QM(t,e,n,r,i){const s=e.serverCache,o=W3(e,s.getNode(),s.isFullyInitialized()||Tt(n),s.isFiltered());return tI(t,o,n,r,eI,i)}function XM(t,e,n,r,i,s){let o;if(Xd(r,n)!=null)return e;{const a=new py(r,e,i),c=e.eventCache.getNode();let u;if(Tt(n)||kt(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=n0(r,Pa(e));else{const d=e.serverCache.getNode();$e(d instanceof Ut,"serverChildren would be complete if leaf node"),f=X3(r,d)}f=f,u=t.filter.updateFullNode(c,f,s)}else{const f=kt(n);let d=dy(r,f,e.serverCache);d==null&&e.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),d!=null?u=t.filter.updateChild(c,f,d,tn(n),a,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(c,f,Ut.EMPTY_NODE,tn(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=n0(r,Pa(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Xd(r,Gt())!=null,ku(e,u,o,t.filter.filtersNodes())}}function JM(t,e){const n=Pa(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Tt(e)&&!n.getImmediateChild(kt(e)).isEmpty())?n.getChild(e):null}function U_(t,e,n,r){e.type===is.MERGE&&e.source.queryId!==null&&($e(Pa(t.viewCache_),"We should always have a full cache before handling merges"),$e(Z1(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=WM(t.processor_,i,e,n,r);return HM(t.processor_,s.viewCache),$e(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,ZM(t,s.changes,s.viewCache.eventCache.getNode(),null)}function ZM(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return NM(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q_;function eF(t){$e(!q_,"__referenceConstructor has already been defined"),q_=t}function gy(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return $e(s!=null,"SyncTree gave us an op for an invalid query."),U_(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(U_(o,e,n,r));return s}}function my(t,e){let n=null;for(const r of t.views.values())n=n||JM(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V_;function tF(t){$e(!V_,"__referenceConstructor has already been defined"),V_=t}class $_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zt(null),this.pendingWriteTree_=qM(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nF(t,e,n,r,i){return kM(t.pendingWriteTree_,e,n,r,i),i?rg(t,new Ra(V3(),e,n)):[]}function kc(t,e,n=!1){const r=LM(t.pendingWriteTree_,e);if(RM(t.pendingWriteTree_,e)){let s=new Zt(null);return r.snap!=null?s=s.set(Gt(),!0):fi(r.children,o=>{s=s.set(new rn(o),!0)}),rg(t,new Qd(r.path,s,n))}else return[]}function ng(t,e,n){return rg(t,new Ra($3(),e,n))}function rF(t,e,n){const r=Zt.fromObject(n);return rg(t,new ih($3(),e,r))}function iF(t,e,n,r){const i=sI(t,r);if(i!=null){const s=oI(i),o=s.path,a=s.queryId,c=li(o,e),u=new Ra(z3(a),c,n);return aI(t,o,u)}else return[]}function sF(t,e,n,r){const i=sI(t,r);if(i){const s=oI(i),o=s.path,a=s.queryId,c=li(o,e),u=Zt.fromObject(n),f=new ih(z3(a),c,u);return aI(t,o,f)}else return[]}function nI(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=li(o,e),u=my(a,c);if(u)return u});return Q3(i,e,s,n,!0)}function rg(t,e){return rI(e,t.syncPointTree_,null,K3(t.pendingWriteTree_,Gt()))}function rI(t,e,n,r){if(Tt(t.path))return iI(t,e,n,r);{const i=e.get(Gt());n==null&&i!=null&&(n=my(i,Gt()));let s=[];const o=kt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,f=J3(r,o);s=s.concat(rI(a,c,u,f))}return i&&(s=s.concat(gy(i,t,r,n))),s}}function iI(t,e,n,r){const i=e.get(Gt());n==null&&i!=null&&(n=my(i,Gt()));let s=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=J3(r,o),f=t.operationForChild(o);f&&(s=s.concat(iI(f,a,c,u)))}),i&&(s=s.concat(gy(i,t,r,n))),s}function sI(t,e){return t.tagToQueryMap.get(e)}function oI(t){const e=t.indexOf("$");return $e(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new rn(t.substr(0,e))}}function aI(t,e,n){const r=t.syncPointTree_.get(e);$e(r,"Missing sync point for query tag that we're tracking");const i=K3(t.pendingWriteTree_,e);return gy(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new yy(n)}node(){return this.node_}}class vy{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Gn(this.path_,e);return new vy(this.syncTree_,n)}node(){return nI(this.syncTree_,this.path_)}}const oF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},z_=function(t,e,n){if(!t||typeof t!="object")return t;if($e(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return aF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return cF(t[".sv"],e);$e(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},aF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:$e(!1,"Unexpected server value: "+t)}},cF=function(t,e,n){t.hasOwnProperty("increment")||$e(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&$e(!1,"Unexpected increment value: "+r);const i=e.node();if($e(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},lF=function(t,e,n,r){return _y(e,new vy(n,t),r)},uF=function(t,e,n){return _y(t,new yy(e),n)};function _y(t,e,n){const r=t.getPriority().val(),i=z_(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=z_(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new $n(a,fr(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new $n(i))),o.forEachChild(pr,(a,c)=>{const u=_y(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function by(t,e){let n=e instanceof rn?e:new rn(e),r=t,i=kt(n);for(;i!==null;){const s=Kc(r.node.children,i)||{children:{},childCount:0};r=new wy(i,r,s),n=tn(n),i=kt(n)}return r}function Al(t){return t.node.value}function cI(t,e){t.node.value=e,s0(t)}function lI(t){return t.node.childCount>0}function hF(t){return Al(t)===void 0&&!lI(t)}function ig(t,e){fi(t.node.children,(n,r)=>{e(new wy(n,t,r))})}function uI(t,e,n,r){n&&!r&&e(t),ig(t,i=>{uI(i,e,!0,r)}),n&&r&&e(t)}function fF(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Mh(t){return new rn(t.parent===null?t.name:Mh(t.parent)+"/"+t.name)}function s0(t){t.parent!==null&&dF(t.parent,t.name,t)}function dF(t,e,n){const r=hF(n),i=Ks(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,s0(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,s0(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF=/[\[\].#$\/\u0000-\u001F\u007F]/,gF=/[\[\].#$\u0000-\u001F\u007F]/,km=10*1024*1024,hI=function(t){return typeof t=="string"&&t.length!==0&&!pF.test(t)},mF=function(t){return typeof t=="string"&&t.length!==0&&!gF.test(t)},yF=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mF(t)},fI=function(t,e,n){const r=n instanceof rn?new Q7(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ea(r));if(typeof e=="function")throw new Error(t+"contains a function "+ea(r)+" with contents = "+e.toString());if(h3(e))throw new Error(t+"contains "+e.toString()+" "+ea(r));if(typeof e=="string"&&e.length>km/3&&wp(e)>km)throw new Error(t+"contains a string greater than "+km+" utf8 bytes "+ea(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(fi(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!hI(o)))throw new Error(t+" contains an invalid key ("+o+") "+ea(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);X7(r,o),fI(t,a,r),J7(r)}),i&&s)throw new Error(t+' contains ".value" child '+ea(r)+" in addition to actual children.")}},vF=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!hI(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!yF(n))throw new Error(xC(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wF(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!O3(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function qa(t,e,n){wF(t,n),bF(t,r=>Oi(r,e)||Oi(e,r))}function bF(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(AF(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function AF(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();_a&&hr("event: "+n.toString()),Oh(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="repo_interrupt",EF=25;class IF{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _F,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Yd(),this.transactionQueueTree_=new wy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function NF(t,e,n){if(t.stats_=ay(t.repoInfo_),t.forceRestClient_||w7())t.server_=new Kd(t.repoInfo_,(r,i,s,o)=>{H_(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>W_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Us(t.repoInfo_,e,(r,i,s,o)=>{H_(t,r,i,s,o)},r=>{W_(t,r)},r=>{CF(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=N7(t.repoInfo_,()=>new IM(t.stats_,t.server_)),t.infoData_=new wM,t.infoSyncTree_=new $_({startListening:(r,i,s,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=ng(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Ay(t,"connected",!1),t.serverSyncTree_=new $_({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{const u=o(a,c);qa(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function TF(t){const n=t.infoData_.getNode(new rn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function dI(t){return oF({timestamp:TF(t)})}function H_(t,e,n,r,i){t.dataUpdateCount++;const s=new rn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const c=bd(n,u=>fr(u));o=sF(t.serverSyncTree_,s,c,i)}else{const c=fr(n);o=iF(t.serverSyncTree_,s,c,i)}else if(r){const c=bd(n,u=>fr(u));o=rF(t.serverSyncTree_,s,c)}else{const c=fr(n);o=ng(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Ey(t,s)),qa(t.eventQueue_,a,o)}function W_(t,e){Ay(t,"connected",e),e===!1&&kF(t)}function CF(t,e){fi(e,(n,r)=>{Ay(t,n,r)})}function Ay(t,e,n){const r=new rn("/.info/"+e),i=fr(n);t.infoData_.updateSnapshot(r,i);const s=ng(t.infoSyncTree_,r,i);qa(t.eventQueue_,r,s)}function xF(t){return t.nextWriteId_++}function kF(t){pI(t,"onDisconnectEvents");const e=dI(t),n=Yd();J1(t.onDisconnect_,Gt(),(i,s)=>{const o=lF(i,s,t.serverSyncTree_,e);q3(n,i,o)});let r=[];J1(n,Gt(),(i,s)=>{r=r.concat(ng(t.serverSyncTree_,i,s));const o=OF(t,i);Ey(t,o)}),t.onDisconnect_=Yd(),qa(t.eventQueue_,Gt(),r)}function LF(t){t.persistentConnection_&&t.persistentConnection_.interrupt(SF)}function pI(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),hr(n,...e)}function gI(t,e,n){return nI(t.serverSyncTree_,e,n)||Ut.EMPTY_NODE}function Sy(t,e=t.transactionQueueTree_){if(e||sg(t,e),Al(e)){const n=yI(t,e);$e(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&RF(t,Mh(e),n)}else lI(e)&&ig(e,n=>{Sy(t,n)})}function RF(t,e,n){const r=n.map(u=>u.currentWriteId),i=gI(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const f=n[u];$e(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;const d=li(e,f.path);s=s.updateChild(d,f.currentOutputSnapshotRaw)}const a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{pI(t,"transaction put response",{path:c.toString(),status:u});let f=[];if(u==="ok"){const d=[];for(let y=0;y<n.length;y++)n[y].status=2,f=f.concat(kc(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&d.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();sg(t,by(t.transactionQueueTree_,e)),Sy(t,t.transactionQueueTree_),qa(t.eventQueue_,e,f);for(let y=0;y<d.length;y++)Oh(d[y])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Xr("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Ey(t,e)}},o)}function Ey(t,e){const n=mI(t,e),r=Mh(n),i=yI(t,n);return PF(t,i,r),r}function PF(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=li(n,c.path);let f=!1,d;if($e(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,d=c.abortReason,i=i.concat(kc(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=EF)f=!0,d="maxretry",i=i.concat(kc(t.serverSyncTree_,c.currentWriteId,!0));else{const y=gI(t,c.path,o);c.currentInputSnapshot=y;const g=e[a].update(y.val());if(g!==void 0){fI("transaction failed: Data returned ",g,c.path);let w=fr(g);typeof g=="object"&&g!=null&&Ks(g,".priority")||(w=w.updatePriority(y.getPriority()));const T=c.currentWriteId,S=dI(t),k=uF(w,y,S);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=k,c.currentWriteId=xF(t),o.splice(o.indexOf(T),1),i=i.concat(nF(t.serverSyncTree_,c.path,k,c.currentWriteId,c.applyLocally)),i=i.concat(kc(t.serverSyncTree_,T,!0))}else f=!0,d="nodata",i=i.concat(kc(t.serverSyncTree_,c.currentWriteId,!0))}qa(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,function(y){setTimeout(y,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}sg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Oh(r[a]);Sy(t,t.transactionQueueTree_)}function mI(t,e){let n,r=t.transactionQueueTree_;for(n=kt(e);n!==null&&Al(r)===void 0;)r=by(r,n),e=tn(e),n=kt(e);return r}function yI(t,e){const n=[];return vI(t,e,n),n.sort((r,i)=>r.order-i.order),n}function vI(t,e,n){const r=Al(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ig(e,i=>{vI(t,i,n)})}function sg(t,e){const n=Al(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,cI(e,n.length>0?n:void 0)}ig(e,r=>{sg(t,r)})}function OF(t,e){const n=Mh(mI(t,e)),r=by(t.transactionQueueTree_,e);return fF(r,i=>{Lm(t,i)}),Lm(t,r),uI(r,i=>{Lm(t,i)}),n}function Lm(t,e){const n=Al(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?($e(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):($e(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(kc(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?cI(e,void 0):n.length=s+1,qa(t.eventQueue_,Mh(e),i);for(let o=0;o<r.length;o++)Oh(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function MF(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xr(`Invalid query segment '${n}' in query '${t}'`)}return e}const G_=function(t,e){const n=FF(t),r=n.namespace;n.domain==="firebase.com"&&ka(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ka("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||f7();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new S7(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new rn(n.pathString)}},FF=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(f,d)),f<d&&(i=DF(t.substring(f,d)));const y=MF(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const g=e.slice(0,u);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),s=r}"ns"in y&&(s=y.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Tt(this._path)?null:L3(this._path)}get ref(){return new Sl(this._repo,this._path)}get _queryIdentifier(){const e=R_(this._queryParams),n=sy(e);return n==="{}"?"default":n}get _queryObject(){return R_(this._queryParams)}isEqual(e){if(e=Bn(e),!(e instanceof Iy))return!1;const n=this._repo===e._repo,r=O3(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Y7(this._path)}}class Sl extends Iy{constructor(e,n){super(e,n,new hy,!1)}get parent(){const e=P3(this._path);return e===null?null:new Sl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}eF(Sl);tF(Sl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="FIREBASE_DATABASE_EMULATOR_HOST",o0={};let jF=!1;function UF(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||ka("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hr("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=G_(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[BF]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=G_(s,i),a=o.repoInfo):c=!o.repoInfo.secure;const f=i&&c?new Y1(Y1.OWNER):new A7(t.name,t.options,e);vF("Invalid Firebase Database URL",o),Tt(o.path)||ka("Database URL must point to the root of a Firebase Database (not including a child path).");const d=VF(a,t,f,new b7(t.name,n));return new $F(d,t)}function qF(t,e){const n=o0[e];(!n||n[t.key]!==t)&&ka(`Database ${e}(${t.repoInfo_}) has already been deleted.`),LF(t),delete n[t.key]}function VF(t,e,n,r){let i=o0[e.name];i||(i={},o0[e.name]=i);let s=i[t.toURLString()];return s&&ka("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new IF(t,jF,n,r),i[t.toURLString()]=s,s}class $F{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(NF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sl(this._repo,Gt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(qF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ka("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t){a7(Oa),ds(new Ui("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return UF(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Yr(p_,g_,t),Yr(p_,g_,"esm2017")}Us.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Us.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};zF();const Rm=new WeakMap;function _I(t,e){return Rm.has(e)||Rm.set(e,t||{f:{},r:{},s:{},u:{}}),Rm.get(e)}function HF(t,e,n,r){if(!t)return n;const[i,s]=wI(t);if(!i)return n;const o=_I(void 0,r)[i]||{},a=e||s;return a&&a in o?o[a]:n}function WF(t,e,n,r){if(!t)return;const[i,s]=wI(t);if(!i)return;const o=_I(void 0,r)[i],a=e||s;if(a)return n.then(c=>{o[a]=c}),a}function wI(t){return t7(t)||n7(t)?["f",t.path]:r7(t)?["r",t.toString()]:i7(t)?["s",t.toString()]:[]}const Pm=new WeakMap;function GF(t,e,n){const r=ny();Pm.has(r)||Pm.set(r,new Map);const i=Pm.get(r),s=WF(e,n,t,r);return s&&i.set(s,t),s?()=>i.delete(s):Fs}const KF={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function a0(t,e,n,r){if(!ZD(t))return[t,{}];const i=[{},{}],s=Object.keys(n).reduce((a,c)=>{const u=n[c];return a[u.path]=u.data(),a},{});function o(a,c,u,f){c=c||{};const[d,y]=f;Object.getOwnPropertyNames(a).forEach(g=>{const w=Object.getOwnPropertyDescriptor(a,g);w&&!w.enumerable&&Object.defineProperty(d,g,w)});for(const g in a){const w=a[g];if(w==null||w instanceof Date||w instanceof vr||w instanceof eg)d[g]=w;else if(iy(w)){const _=u+g;d[g]=_ in n?c[g]:w.path,y[_]=w.converter?w:w.withConverter(r.converter)}else if(Array.isArray(w)){d[g]=Array(w.length);for(let _=0;_<w.length;_++){const T=w[_];T&&T.path in s&&(d[g][_]=s[T.path])}o(w,c[g]||d[g],u+g+".",[d[g],y])}else ja(w)?(d[g]={},o(w,c[g],u+g+".",[d[g],y])):d[g]=w}}return o(t,e,"",i),i}const Ny={reset:!1,wait:!0,maxRefDepth:2,converter:KF,snapshotOptions:{serverTimestamps:"estimate"}};function Zd(t){for(const e in t)t[e].unsub()}function c0(t,e,n,r,i,s,o,a,c){const[u,f]=a0(r.data(t.snapshotOptions),ry(e,n),i,t);s.set(e,n,u),l0(t,e,n,i,f,s,o,a,c)}function YF({ref:t,target:e,path:n,depth:r,resolve:i,reject:s,ops:o},a){const c=Object.create(null);let u=Fs;return a.once?GE(t).then(f=>{f.exists()?c0(a,e,n,f,c,o,r,i,s):(o.set(e,n,null),i())}).catch(s):u=X2(t,f=>{f.exists()?c0(a,e,n,f,c,o,r,i,s):(o.set(e,n,null),i())},s),()=>{u(),Zd(c)}}function l0(t,e,n,r,i,s,o,a,c){const u=Object.keys(i);if(Object.keys(r).filter(_=>u.indexOf(_)<0).forEach(_=>{r[_].unsub(),delete r[_]}),!u.length||++o>t.maxRefDepth)return a(n);let d=0;const y=u.length,g=Object.create(null);function w(_){_ in g&&++d>=y&&a(n)}u.forEach(_=>{const T=r[_],S=i[_],k=`${n}.${_}`;if(g[k]=!0,T)if(T.path!==S.path)T.unsub();else return;r[_]={data:()=>ry(e,k),unsub:YF({ref:S,target:e,path:k,depth:o,ops:s,resolve:w.bind(null,k),reject:c},t),path:S.path}})}function QF(t,e,n,r,i,s){const o=Object.assign({},Ny,s),{snapshotListenOptions:a,snapshotOptions:c,wait:u,once:f}=o,d="value";let y=gr(u?[]:t.value);u||n.set(t,d,[]);const g=r;let w,_=Fs;const T=[],S={added:({newIndex:j,doc:Y})=>{T.splice(j,0,Object.create(null));const oe=T[j],[me,te]=a0(Y.data(c),void 0,oe,o);n.add(mt(y),j,me),l0(o,y,`${d}.${j}`,oe,te,n,0,r.bind(null,Y),i)},modified:({oldIndex:j,newIndex:Y,doc:oe})=>{const me=mt(y),te=T[j],F=me[j],[ge,pe]=a0(oe.data(c),F,te,o);T.splice(Y,0,te),n.remove(me,j),n.add(me,Y,ge),l0(o,y,`${d}.${Y}`,te,pe,n,0,r,i)},removed:({oldIndex:j})=>{const Y=mt(y);n.remove(Y,j),Zd(T.splice(j,1)[0])}};function k(j){const Y=j.docChanges(a);if(!w&&Y.length){w=!0;let oe=0;const me=Y.length,te=Object.create(null);for(let F=0;F<me;F++)te[Y[F].doc.id]=!0;r=F=>{F&&F.id in te&&++oe>=me&&(u&&(n.set(t,d,mt(y)),y=t),g(mt(y)),r=Fs)}}Y.forEach(oe=>{S[oe.type](oe)}),Y.length||(u&&(n.set(t,d,mt(y)),y=t),r(mt(y)))}return f?MO(e).then(k).catch(i):_=X2(e,k,i),j=>{if(_(),j){const Y=typeof j=="function"?j():[];n.set(t,d,Y)}T.forEach(Zd)}}function XF(t,e,n,r,i,s){const o=Object.assign({},Ny,s),a="value",c=Object.create(null);r=s7(r,()=>ry(t,a));let u=Fs;function f(d){d.exists()?c0(o,t,a,d,c,n,0,r,i):(n.set(t,a,null),r(null))}return o.once?GE(e).then(f).catch(i):u=X2(e,f,i),d=>{if(u(),d){const y=typeof d=="function"?d():null;n.set(t,a,y)}Zd(c)}}function JF(t,e){let n=Fs;const r=Object.assign({},Ny,e),i=mt(t),s=r.target||gr();o7()&&(r.once=!0),s.value=HF(i,r.ssrKey,s.value,ny());let o=s.value===void 0;const a=gr(!1),c=gr(),u=Zw(),f=Fw();let d=Fs;function y(){let _=mt(t);const T=new Promise((S,k)=>{if(n(r.reset),!_)return n=Fs,S(null);a.value=o,o=!0,_.converter||(_=_.withConverter(r.converter)),n=(iy(_)?XF:QF)(s,_,ZF,S,k,r)}).catch(S=>(u.value===T&&(c.value=S),Promise.reject(S))).finally(()=>{u.value===T&&(a.value=!1)});u.value=T}let g=Fs;Dn(t)&&(g=_u(t,y)),y(),i&&(d=GF(u.value,i,r.ssrKey)),gp()&&yb(()=>u.value),f&&YN(w);function w(_=r.reset){g(),d(),n(_)}return Object.defineProperties(s,{error:{get:()=>c},data:{get:()=>s},pending:{get:()=>a},promise:{get:()=>u},stop:{get:()=>w}})}const ZF={set:(t,e,n)=>XD(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function El(t,e){return JF(t,{target:gr([]),...e})}function Il(t){return PE(ny(t))}const eB=AT('<h3>Nueva Curso: </h3><br><label>Categoria: </label><select name="categoria" id="categoria"><option value="programacion">Programacin</option><option value="SOs">Sistemas Operativos</option><option value="ofimatica">Ofimatica</option></select><br><br><label>Nombre: </label><input type="text" name="nombre" id="nombre"><br><br><label>Horas: </label><input type="number" min="20" max="999" name="horas" id="horas"><br><br><label>Imagen: </label>',15),tB=Ne("br",null,null,-1),nB=Ne("br",null,null,-1),rB={__name:"crearCurso",props:{categoria:String,nombre:String,horas:String,imagen:String},setup(t){const e=Il();El(Ta(e,"Cursos"));let n=gr("");function r(){const s=o3(),o=Y8(s,n.value.files[0].name);K8(o,n.value.files[0]).then(a=>{console.log("Archivo subido")})}function i(){let s=document.getElementById("categoria").value,o=document.getElementById("nombre").value,a=document.getElementById("horas").value;console.log(a);let c=n.value.files[0].name;BO(Ta(e,"Cursos"),{categoria:s,nombre:o,horas:a,imagen:c}),alert("El curso se ha creado correctamente")}return(s,o)=>(Ze(),it("fieldset",null,[eB,Ne("input",{type:"file",name:"file",id:"file",ref_key:"file",ref:n,onChange:r},null,544),tB,nB,Ne("button",{onClick:i},"Crear Curso")]))}},iB=Ne("h1",null,"Bienvenido a la zona de Administracin",-1),sB=Ne("br",null,null,-1),oB=Ne("h2",null,"Cursos",-1),aB=Ne("br",null,null,-1),cB=Ne("h3",null,"Programacin",-1),lB=Ne("td",null,"Nombre",-1),uB=Ne("td",null,"Horas",-1),hB=Ne("td",null,"Imagen",-1),fB={key:0},dB={key:0},pB=["src"],gB={key:0},mB=["onClick"],yB=Ne("br",null,null,-1),vB=Ne("br",null,null,-1),_B=Ne("h3",null,"Sistemas Operativos",-1),wB=Ne("td",null,"Nombre",-1),bB=Ne("td",null,"Horas",-1),AB=Ne("td",null,"Imagen",-1),SB={key:0},EB={key:0},IB=["src"],NB={key:0},TB=["onClick"],CB=Ne("br",null,null,-1),xB=Ne("br",null,null,-1),kB=Ne("h3",null,"Ofimatica",-1),LB=Ne("td",null,"Nombre",-1),RB=Ne("td",null,"Horas",-1),PB=Ne("td",null,"Imagen",-1),OB={key:0},DB={key:0},MB=["src"],FB={key:0},BB=["onClick"],jB=Ne("br",null,null,-1),UB=Ne("br",null,null,-1),qB={__name:"privado",setup(t){const e=Il(),n=El(Ta(e,"Cursos"));let r=gr("");Da(Bi,s=>{s&&(s.uid,r.value=s.email)});function i(s){FO(LE(e,"Cursos",s))}return(s,o)=>{const a=ba("router-link");return Ze(),it(sn,null,[iB,Ne("h2",null,cr(mt(r)),1),sB,oB,aB,cB,Ne("table",null,[Ne("thead",null,[Ne("tr",null,[lB,uB,hB,mt(r)=="admin@gmail.com"?(Ze(),it("td",fB,"Borrar")):ln("",!0)])]),(Ze(!0),it(sn,null,da(mt(n),c=>(Ze(),it("tbody",{key:c.nombre},[c.categoria=="programacion"?(Ze(),it("tr",dB,[Ne("td",null,[zt(a,{to:"/detallesCurso/"+c.id},{default:Mr(()=>[lr(cr(c.nombre),1)]),_:2},1032,["to"])]),Ne("td",null,cr(c.horas),1),Ne("td",null,[Ne("img",{src:"/src/img/"+c.imagen,width:"50",height:"50"},null,8,pB)]),mt(r)=="admin@gmail.com"?(Ze(),it("td",gB,[Ne("button",{onClick:u=>i(c.id)},"Borrar",8,mB)])):ln("",!0)])):ln("",!0)]))),128))]),yB,vB,_B,Ne("table",null,[Ne("thead",null,[Ne("tr",null,[wB,bB,AB,mt(r)=="admin@gmail.com"?(Ze(),it("td",SB,"Borrar")):ln("",!0)])]),(Ze(!0),it(sn,null,da(mt(n),c=>(Ze(),it("tbody",{key:c.nombre},[c.categoria=="SOs"?(Ze(),it("tr",EB,[Ne("td",null,[zt(a,{to:"/detallesCurso/"+c.id},{default:Mr(()=>[lr(cr(c.nombre),1)]),_:2},1032,["to"])]),Ne("td",null,cr(c.horas),1),Ne("td",null,[Ne("img",{src:"/src/img/"+c.imagen,width:"50",height:"50"},null,8,IB)]),mt(r)=="admin@gmail.com"?(Ze(),it("td",NB,[Ne("button",{onClick:u=>i(c.id)},"Borrar",8,TB)])):ln("",!0)])):ln("",!0)]))),128))]),CB,xB,kB,Ne("table",null,[Ne("thead",null,[Ne("tr",null,[LB,RB,PB,mt(r)=="admin@gmail.com"?(Ze(),it("td",OB,"Borrar")):ln("",!0)])]),(Ze(!0),it(sn,null,da(mt(n),c=>(Ze(),it("tbody",{key:c.nombre},[c.categoria=="ofimatica"?(Ze(),it("tr",DB,[Ne("td",null,[zt(a,{to:"/detallesCurso/"+c.id},{default:Mr(()=>[lr(cr(c.nombre),1)]),_:2},1032,["to"])]),Ne("td",null,cr(c.horas),1),Ne("td",null,[Ne("img",{src:"/src/img/"+c.imagen,width:"50",height:"50"},null,8,MB)]),mt(r)=="admin@gmail.com"?(Ze(),it("td",FB,[Ne("button",{onClick:u=>i(c.id)},"Borrar",8,BB)])):ln("",!0)])):ln("",!0)]))),128))]),jB,UB,zt(rB)],64)}}};const VB=Ne("h1",null,"Ofimatica",-1),$B=Ne("td",null,"Nombre",-1),zB=Ne("td",null,"Horas",-1),HB=Ne("td",null,"Imagen",-1),WB={key:0},GB={key:0},KB=["src"],YB={key:0},QB=Ne("button",null,"Incribirse",-1),XB=[QB],JB={__name:"ofimatica",setup(t){const e=Il(),n=El(Ta(e,"Cursos"));let r=gr("");return Da(Bi,i=>{i&&(i.uid,r.value=i.email)}),(i,s)=>{const o=ba("router-link");return Ze(),it(sn,null,[VB,Ne("table",null,[Ne("thead",null,[Ne("tr",null,[$B,zB,HB,mt(r)!=""?(Ze(),it("td",WB,"Inscripcin")):ln("",!0)])]),(Ze(!0),it(sn,null,da(mt(n),a=>(Ze(),it("tbody",{key:a.nombre},[a.categoria=="ofimatica"?(Ze(),it("tr",GB,[Ne("td",null,[zt(o,{to:"/detallesCurso/"+a.id},{default:Mr(()=>[lr(cr(a.nombre),1)]),_:2},1032,["to"])]),Ne("td",null,cr(a.horas),1),Ne("td",null,[Ne("img",{src:"/src/img/"+a.imagen,width:"50",height:"50"},null,8,KB)]),mt(r)!=""?(Ze(),it("td",YB,XB)):ln("",!0)])):ln("",!0)]))),128))])],64)}}};const ZB=Ne("h1",null,"Programacin",-1),ej=Ne("td",null,"Nombre",-1),tj=Ne("td",null,"Horas",-1),nj=Ne("td",null,"Imagen",-1),rj={key:0},ij={key:0},sj=["src"],oj={key:0},aj=Ne("button",null,"Incribirse",-1),cj=[aj],lj={__name:"programacion",setup(t){const e=Il(),n=El(Ta(e,"Cursos"));let r=gr("");return Da(Bi,i=>{i&&(i.uid,r.value=i.email)}),(i,s)=>{const o=ba("router-link");return Ze(),it(sn,null,[ZB,Ne("table",null,[Ne("thead",null,[Ne("tr",null,[ej,tj,nj,mt(r)!=""?(Ze(),it("td",rj,"Inscripcin")):ln("",!0)])]),(Ze(!0),it(sn,null,da(mt(n),a=>(Ze(),it("tbody",{key:a.nombre},[a.categoria=="programacion"?(Ze(),it("tr",ij,[Ne("td",null,[zt(o,{to:"/detallesCurso/"+a.id},{default:Mr(()=>[lr(cr(a.nombre),1)]),_:2},1032,["to"])]),Ne("td",null,cr(a.horas),1),Ne("td",null,[Ne("img",{src:"/src/img/"+a.imagen,width:"50",height:"50"},null,8,sj)]),mt(r)!=""?(Ze(),it("td",oj,cj)):ln("",!0)])):ln("",!0)]))),128))])],64)}}};const uj=Ne("h1",null,"Sistemas Operativos",-1),hj=Ne("td",null,"Nombre",-1),fj=Ne("td",null,"Horas",-1),dj=Ne("td",null,"Imagen",-1),pj={key:0},gj={key:0},mj=["src"],yj={key:0},vj=Ne("button",null,"Incribirse",-1),_j=[vj],wj={__name:"SOs",setup(t){const e=Il(),n=El(Ta(e,"Cursos"));let r=gr("");return Da(Bi,i=>{i&&(i.uid,r.value=i.email)}),(i,s)=>{const o=ba("router-link");return Ze(),it(sn,null,[uj,Ne("table",null,[Ne("thead",null,[Ne("tr",null,[hj,fj,dj,mt(r)!=""?(Ze(),it("td",pj,"Inscripcin")):ln("",!0)])]),(Ze(!0),it(sn,null,da(mt(n),a=>(Ze(),it("tbody",{key:a.nombre},[a.categoria=="SOs"?(Ze(),it("tr",gj,[Ne("td",null,[zt(o,{to:"/detallesCurso/"+a.id},{default:Mr(()=>[lr(cr(a.nombre),1)]),_:2},1032,["to"])]),Ne("td",null,cr(a.horas),1),Ne("td",null,[Ne("img",{src:"/src/img/"+a.imagen,width:"50",height:"50"},null,8,mj)]),mt(r)!=""?(Ze(),it("td",yj,_j)):ln("",!0)])):ln("",!0)]))),128))])],64)}}},bj="modulepreload",Aj=function(t){return"/"+t},K_={},u0=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=Aj(s),s in K_)return;K_[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const d=i[f];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":bj,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function Ht(t){return Ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(t)}var Ir=Uint8Array,Nr=Uint16Array,sh=Uint32Array,og=new Ir([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ag=new Ir([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h0=new Ir([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),bI=function(t,e){for(var n=new Nr(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new sh(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},AI=bI(og,2),SI=AI[0],f0=AI[1];SI[28]=258,f0[258]=28;var EI=bI(ag,0),Sj=EI[0],Y_=EI[1],d0=new Nr(32768);for(var nn=0;nn<32768;++nn){var po=(nn&43690)>>>1|(nn&21845)<<1;po=(po&52428)>>>2|(po&13107)<<2,po=(po&61680)>>>4|(po&3855)<<4,d0[nn]=((po&65280)>>>8|(po&255)<<8)>>>1}var hs=function(t,e,n){for(var r=t.length,i=0,s=new Nr(e);i<r;++i)++s[t[i]-1];var o=new Nr(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Nr(1<<e);var c=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],f=e-t[i],d=o[t[i]-1]++<<f,y=d|(1<<f)-1;d<=y;++d)a[d0[d]>>>c]=u}else for(a=new Nr(r),i=0;i<r;++i)a[i]=d0[o[t[i]-1]++]>>>15-t[i];return a},Mo=new Ir(288);for(var nn=0;nn<144;++nn)Mo[nn]=8;for(var nn=144;nn<256;++nn)Mo[nn]=9;for(var nn=256;nn<280;++nn)Mo[nn]=7;for(var nn=280;nn<288;++nn)Mo[nn]=8;var oh=new Ir(32);for(var nn=0;nn<32;++nn)oh[nn]=5;var Ej=hs(Mo,9,0),Ij=hs(Mo,9,1),Nj=hs(oh,5,0),Tj=hs(oh,5,1),Om=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Ti=function(t,e,n){var r=e/8>>0;return(t[r]|t[r+1]<<8)>>>(e&7)&n},Dm=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(e&7)},Ty=function(t){return(t/8>>0)+(t&7&&1)},II=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Nr?Nr:t instanceof sh?sh:Ir)(n-e);return r.set(t.subarray(e,n)),r},Cj=function(t,e,n){var r=t.length,i=!e||n,s=!n||n.i;n||(n={}),e||(e=new Ir(r*3));var o=function($){var W=e.length;if($>W){var J=new Ir(Math.max(W*2,$));J.set(e),e=J}},a=n.f||0,c=n.p||0,u=n.b||0,f=n.l,d=n.d,y=n.m,g=n.n,w=r*8;do{if(!f){n.f=a=Ti(t,c,1);var _=Ti(t,c+1,3);if(c+=3,_)if(_==1)f=Ij,d=Tj,y=9,g=5;else if(_==2){var j=Ti(t,c,31)+257,Y=Ti(t,c+10,15)+4,oe=j+Ti(t,c+5,31)+1;c+=14;for(var me=new Ir(oe),te=new Ir(19),F=0;F<Y;++F)te[h0[F]]=Ti(t,c+F*3,7);c+=Y*3;var ge=Om(te),pe=(1<<ge)-1;if(!s&&c+oe*(ge+7)>w)break;for(var D=hs(te,ge,1),F=0;F<oe;){var O=D[Ti(t,c,pe)];c+=O&15;var T=O>>>4;if(T<16)me[F++]=T;else{var G=0,H=0;for(T==16?(H=3+Ti(t,c,3),c+=2,G=me[F-1]):T==17?(H=3+Ti(t,c,7),c+=3):T==18&&(H=11+Ti(t,c,127),c+=7);H--;)me[F++]=G}}var ye=me.subarray(0,j),le=me.subarray(j);y=Om(ye),g=Om(le),f=hs(ye,y,1),d=hs(le,g,1)}else throw"invalid block type";else{var T=Ty(c)+4,S=t[T-4]|t[T-3]<<8,k=T+S;if(k>r){if(s)throw"unexpected EOF";break}i&&o(u+S),e.set(t.subarray(T,k),u),n.b=u+=S,n.p=c=k*8;continue}if(c>w)throw"unexpected EOF"}i&&o(u+131072);for(var de=(1<<y)-1,ne=(1<<g)-1,_e=y+g+18;s||c+_e<w;){var G=f[Dm(t,c)&de],we=G>>>4;if(c+=G&15,c>w)throw"unexpected EOF";if(!G)throw"invalid length/literal";if(we<256)e[u++]=we;else if(we==256){f=null;break}else{var Fe=we-254;if(we>264){var F=we-257,E=og[F];Fe=Ti(t,c,(1<<E)-1)+SI[F],c+=E}var U=d[Dm(t,c)&ne],V=U>>>4;if(!U)throw"invalid distance";c+=U&15;var le=Sj[V];if(V>3){var E=ag[V];le+=Dm(t,c)&(1<<E)-1,c+=E}if(c>w)throw"unexpected EOF";i&&o(u+131072);for(var P=u+Fe;u<P;u+=4)e[u]=e[u-le],e[u+1]=e[u+1-le],e[u+2]=e[u+2-le],e[u+3]=e[u+3-le];u=P}}n.l=f,n.p=c,n.b=u,f&&(a=1,n.m=y,n.d=d,n.n=g)}while(!a);return u==e.length?e:II(e,0,u)},Ls=function(t,e,n){n<<=e&7;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},au=function(t,e,n){n<<=e&7;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},Mm=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return[new Ir(0),0];if(i==1){var o=new Ir(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(oe,me){return oe.f-me.f}),n.push({s:-1,f:25001});var a=n[0],c=n[1],u=0,f=1,d=2;for(n[0]={s:-1,f:a.f+c.f,l:a,r:c};f!=i-1;)a=n[n[u].f<n[d].f?u++:d++],c=n[u!=f&&n[u].f<n[d].f?u++:d++],n[f++]={s:-1,f:a.f+c.f,l:a,r:c};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var g=new Nr(y+1),w=p0(n[f-1],g,0);if(w>e){var r=0,_=0,T=w-e,S=1<<T;for(s.sort(function(me,te){return g[te.s]-g[me.s]||me.f-te.f});r<i;++r){var k=s[r].s;if(g[k]>e)_+=S-(1<<w-g[k]),g[k]=e;else break}for(_>>>=T;_>0;){var j=s[r].s;g[j]<e?_-=1<<e-g[j]++-1:++r}for(;r>=0&&_;--r){var Y=s[r].s;g[Y]==e&&(--g[Y],++_)}w=e}return[new Ir(g),w]},p0=function(t,e,n){return t.s==-1?Math.max(p0(t.l,e,n+1),p0(t.r,e,n+1)):e[t.s]=n},Q_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Nr(++e),r=0,i=t[0],s=1,o=function(c){n[r++]=c},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return[n.subarray(0,r),e]},cu=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},ud=function(t,e,n){var r=n.length,i=Ty(e+2);t[i]=r&255,t[i+1]=r>>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},X_=function(t,e,n,r,i,s,o,a,c,u,f){Ls(e,f++,n),++i[256];for(var d=Mm(i,15),y=d[0],g=d[1],w=Mm(s,15),_=w[0],T=w[1],S=Q_(y),k=S[0],j=S[1],Y=Q_(_),oe=Y[0],me=Y[1],te=new Nr(19),F=0;F<k.length;++F)te[k[F]&31]++;for(var F=0;F<oe.length;++F)te[oe[F]&31]++;for(var ge=Mm(te,7),pe=ge[0],D=ge[1],O=19;O>4&&!pe[h0[O-1]];--O);var G=u+5<<3,H=cu(i,Mo)+cu(s,oh)+o,ye=cu(i,y)+cu(s,_)+o+14+3*O+cu(te,pe)+(2*te[16]+3*te[17]+7*te[18]);if(G<=H&&G<=ye)return ud(e,f,t.subarray(c,c+u));var le,de,ne,_e;if(Ls(e,f,1+(ye<H)),f+=2,ye<H){le=hs(y,g,0),de=y,ne=hs(_,T,0),_e=_;var we=hs(pe,D,0);Ls(e,f,j-257),Ls(e,f+5,me-1),Ls(e,f+10,O-4),f+=14;for(var F=0;F<O;++F)Ls(e,f+3*F,pe[h0[F]]);f+=3*O;for(var Fe=[k,oe],E=0;E<2;++E)for(var U=Fe[E],F=0;F<U.length;++F){var V=U[F]&31;Ls(e,f,we[V]),f+=pe[V],V>15&&(Ls(e,f,U[F]>>>5&127),f+=U[F]>>>12)}}else le=Ej,de=Mo,ne=Nj,_e=oh;for(var F=0;F<a;++F)if(r[F]>255){var V=r[F]>>>18&31;au(e,f,le[V+257]),f+=de[V+257],V>7&&(Ls(e,f,r[F]>>>23&31),f+=og[V]);var P=r[F]&31;au(e,f,ne[P]),f+=_e[P],P>3&&(au(e,f,r[F]>>>5&8191),f+=ag[P])}else au(e,f,le[r[F]]),f+=de[r[F]];return au(e,f,le[256]),f+de[256]},xj=new sh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),kj=new Ir(0),Lj=function(t,e,n,r,i,s){var o=t.length,a=new Ir(r+o+5*(1+Math.floor(o/7e3))+i),c=a.subarray(r,a.length-i),u=0;if(!e||o<8)for(var f=0;f<=o;f+=65535){var d=f+65535;d<o?u=ud(c,u,t.subarray(f,d)):(c[f]=s,u=ud(c,u,t.subarray(f,o)))}else{for(var y=xj[e-1],g=y>>>13,w=y&8191,_=(1<<n)-1,T=new Nr(32768),S=new Nr(_+1),k=Math.ceil(n/3),j=2*k,Y=function(re){return(t[re]^t[re+1]<<k^t[re+2]<<j)&_},oe=new sh(25e3),me=new Nr(288),te=new Nr(32),F=0,ge=0,f=0,pe=0,D=0,O=0;f<o;++f){var G=Y(f),H=f&32767,ye=S[G];if(T[H]=ye,S[G]=H,D<=f){var le=o-f;if((F>7e3||pe>24576)&&le>423){u=X_(t,c,0,oe,me,te,ge,pe,O,f-O,u),pe=F=ge=0,O=f;for(var de=0;de<286;++de)me[de]=0;for(var de=0;de<30;++de)te[de]=0}var ne=2,_e=0,we=w,Fe=H-ye&32767;if(le>2&&G==Y(f-Fe))for(var E=Math.min(g,le)-1,U=Math.min(32767,f),V=Math.min(258,le);Fe<=U&&--we&&H!=ye;){if(t[f+ne]==t[f+ne-Fe]){for(var P=0;P<V&&t[f+P]==t[f+P-Fe];++P);if(P>ne){if(ne=P,_e=Fe,P>E)break;for(var $=Math.min(Fe,P-2),W=0,de=0;de<$;++de){var J=f-Fe+de+32768&32767,se=T[J],Le=J-se+32768&32767;Le>W&&(W=Le,ye=J)}}}H=ye,ye=T[H],Fe+=H-ye+32768&32767}if(_e){oe[pe++]=268435456|f0[ne]<<18|Y_[_e];var Ee=f0[ne]&31,R=Y_[_e]&31;ge+=og[Ee]+ag[R],++me[257+Ee],++te[R],D=f+ne,++F}else oe[pe++]=t[f],++me[t[f]]}}u=X_(t,c,s,oe,me,te,ge,pe,O,f-O,u),s||(u=ud(c,u,kj))}return II(a,0,r+Ty(u)+i)},Rj=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length,o=0;o!=s;){for(var a=Math.min(o+5552,s);o<a;++o)r+=n[o],i+=r;r%=65521,i%=65521}t=r,e=i},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},Pj=function(t,e,n,r,i){return Lj(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,n,r,!i)},Oj=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Dj=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)},Mj=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function g0(t,e){e===void 0&&(e={});var n=Rj();n.p(t);var r=Pj(t,e,2,4);return Dj(r,e),Oj(r,r.length-4,n.d()),r}function Fj(t,e){return Cj((Mj(t),t.subarray(2,-4)),e)}var ot=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Fm(){ot.console&&typeof ot.console.log=="function"&&ot.console.log.apply(ot.console,arguments)}var Yt={log:Fm,warn:function(t){ot.console&&(typeof ot.console.warn=="function"?ot.console.warn.apply(ot.console,arguments):Fm.call(null,arguments))},error:function(t){ot.console&&(typeof ot.console.error=="function"?ot.console.error.apply(ot.console,arguments):Fm(t))}};function Bm(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){ta(r.response,e,n)},r.onerror=function(){Yt.error("could not download file")},r.send()}function J_(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function $f(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Ru,m0,ta=ot.saveAs||((typeof window>"u"?"undefined":Ht(window))!=="object"||window!==ot?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=ot.URL||ot.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?J_(i.href)?Bm(t,e,n):$f(i,i.target="_blank"):$f(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){$f(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(J_(t))Bm(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){$f(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Ht(s)!=="object"&&(Yt.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Bm(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(ot.HTMLElement)||ot.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Ht(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var f=a.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},a.readAsDataURL(t)}else{var c=ot.URL||ot.webkitURL,u=c.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function NI(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+a+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function jm(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=rr(n,r,i,s,e[0],7,-680876936),s=rr(s,n,r,i,e[1],12,-389564586),i=rr(i,s,n,r,e[2],17,606105819),r=rr(r,i,s,n,e[3],22,-1044525330),n=rr(n,r,i,s,e[4],7,-176418897),s=rr(s,n,r,i,e[5],12,1200080426),i=rr(i,s,n,r,e[6],17,-1473231341),r=rr(r,i,s,n,e[7],22,-45705983),n=rr(n,r,i,s,e[8],7,1770035416),s=rr(s,n,r,i,e[9],12,-1958414417),i=rr(i,s,n,r,e[10],17,-42063),r=rr(r,i,s,n,e[11],22,-1990404162),n=rr(n,r,i,s,e[12],7,1804603682),s=rr(s,n,r,i,e[13],12,-40341101),i=rr(i,s,n,r,e[14],17,-1502002290),n=ir(n,r=rr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ir(s,n,r,i,e[6],9,-1069501632),i=ir(i,s,n,r,e[11],14,643717713),r=ir(r,i,s,n,e[0],20,-373897302),n=ir(n,r,i,s,e[5],5,-701558691),s=ir(s,n,r,i,e[10],9,38016083),i=ir(i,s,n,r,e[15],14,-660478335),r=ir(r,i,s,n,e[4],20,-405537848),n=ir(n,r,i,s,e[9],5,568446438),s=ir(s,n,r,i,e[14],9,-1019803690),i=ir(i,s,n,r,e[3],14,-187363961),r=ir(r,i,s,n,e[8],20,1163531501),n=ir(n,r,i,s,e[13],5,-1444681467),s=ir(s,n,r,i,e[2],9,-51403784),i=ir(i,s,n,r,e[7],14,1735328473),n=sr(n,r=ir(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=sr(s,n,r,i,e[8],11,-2022574463),i=sr(i,s,n,r,e[11],16,1839030562),r=sr(r,i,s,n,e[14],23,-35309556),n=sr(n,r,i,s,e[1],4,-1530992060),s=sr(s,n,r,i,e[4],11,1272893353),i=sr(i,s,n,r,e[7],16,-155497632),r=sr(r,i,s,n,e[10],23,-1094730640),n=sr(n,r,i,s,e[13],4,681279174),s=sr(s,n,r,i,e[0],11,-358537222),i=sr(i,s,n,r,e[3],16,-722521979),r=sr(r,i,s,n,e[6],23,76029189),n=sr(n,r,i,s,e[9],4,-640364487),s=sr(s,n,r,i,e[12],11,-421815835),i=sr(i,s,n,r,e[15],16,530742520),n=or(n,r=sr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=or(s,n,r,i,e[7],10,1126891415),i=or(i,s,n,r,e[14],15,-1416354905),r=or(r,i,s,n,e[5],21,-57434055),n=or(n,r,i,s,e[12],6,1700485571),s=or(s,n,r,i,e[3],10,-1894986606),i=or(i,s,n,r,e[10],15,-1051523),r=or(r,i,s,n,e[1],21,-2054922799),n=or(n,r,i,s,e[8],6,1873313359),s=or(s,n,r,i,e[15],10,-30611744),i=or(i,s,n,r,e[6],15,-1560198380),r=or(r,i,s,n,e[13],21,1309151649),n=or(n,r,i,s,e[4],6,-145523070),s=or(s,n,r,i,e[11],10,-1120210379),i=or(i,s,n,r,e[2],15,718787259),r=or(r,i,s,n,e[9],21,-343485551),t[0]=So(n,t[0]),t[1]=So(r,t[1]),t[2]=So(i,t[2]),t[3]=So(s,t[3])}function cg(t,e,n,r,i,s){return e=So(So(e,t),So(r,s)),So(e<<i|e>>>32-i,n)}function rr(t,e,n,r,i,s,o){return cg(e&n|~e&r,t,e,i,s,o)}function ir(t,e,n,r,i,s,o){return cg(e&r|n&~r,t,e,i,s,o)}function sr(t,e,n,r,i,s,o){return cg(e^n^r,t,e,i,s,o)}function or(t,e,n,r,i,s,o){return cg(n^(e|~r),t,e,i,s,o)}function TI(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)jm(r,Bj(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(jm(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,jm(r,i),r}function Bj(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Ru=ot.atob.bind(ot),m0=ot.btoa.bind(ot);var Z_="0123456789abcdef".split("");function jj(t){for(var e="",n=0;n<4;n++)e+=Z_[t>>8*n+4&15]+Z_[t>>8*n&15];return e}function Uj(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function y0(t){return TI(t).map(Uj).join("")}var qj=function(t){for(var e=0;e<t.length;e++)t[e]=jj(t[e]);return t.join("")}(TI("hello"))!="5d41402abc4b2a76b9719d911017c592";function So(t,e){if(qj){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function v0(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],c=0;c<256;c++)a[c]=c;var u=0;for(c=0;c<256;c++){var f=a[c];u=(u+f+o.charCodeAt(c))%256,a[c]=a[u],a[u]=f}n=t,r=a}else a=r;var d=e.length,y=0,g=0,w="";for(c=0;c<d;c++)g=(g+(f=a[y=(y+1)%256]))%256,a[y]=a[g],a[g]=f,o=a[(a[y]+a[g])%256],w+=String.fromCharCode(e.charCodeAt(c)^o);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ew={print:4,modify:8,copy:16,"annot-forms":32};function Ic(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(ew.perm!==void 0)throw new Error("Invalid permission: "+a);i+=ew[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=y0(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=v0(this.encryptionKey,this.padding)}function Nc(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function tw(t){if(Ht(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){ot.console&&Yt.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function ep(t){if(!(this instanceof ep))return new ep(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function CI(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function sa(t,e,n,r,i){if(!(this instanceof sa))return new sa(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,CI.call(this,r,i)}function Lc(t,e,n,r,i){if(!(this instanceof Lc))return new Lc(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,CI.call(this,r,i)}function rt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,c=16,u="S",f=null;Ht(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,y={},g={internal:{},__private__:{}};g.__private__.PubSub=tw;var w="1.3",_=g.__private__.getPdfVersion=function(){return w};g.__private__.setPdfVersion=function(p){w=p};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return T};var S=g.__private__.getPageFormat=function(p){return T[p]};i=i||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},j=k.COMPAT;function Y(){this.saveGraphicsState(),x(new nt(Be,0,0,-Be,0,Js()*Be).toString()+" cm"),this.setFontSize(this.getFontSize()/Be),u="n",j=k.ADVANCED}function oe(){this.restoreGraphicsState(),u="S",j=k.COMPAT}var me=g.__private__.combineFontStyleAndFontWeight=function(p,A){if(p=="bold"&&A=="normal"||p=="bold"&&A==400||p=="normal"&&A=="italic"||p=="bold"&&A=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return A&&(p=A==400||A==="normal"?p==="italic"?"italic":"normal":A!=700&&A!=="bold"||p!=="normal"?(A==700?"bold":A)+""+p:"bold"),p};g.advancedAPI=function(p){var A=j===k.COMPAT;return A&&Y.call(this),typeof p!="function"||(p(this),A&&oe.call(this)),this},g.compatAPI=function(p){var A=j===k.ADVANCED;return A&&oe.call(this),typeof p!="function"||(p(this),A&&Y.call(this)),this},g.isAdvancedAPI=function(){return j===k.ADVANCED};var te,F=function(p){if(j!==k.ADVANCED)throw new Error(p+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ge=g.roundToPrecision=g.__private__.roundToPrecision=function(p,A){var q=e||A;if(isNaN(p)||isNaN(q))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return p.toFixed(q).replace(/0+$/,"")};te=g.hpf=g.__private__.hpf=typeof c=="number"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return ge(p,c)}:c==="smart"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return ge(p,p>-1&&p<1?16:5)}:function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return ge(p,16)};var pe=g.f2=g.__private__.f2=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f2");return ge(p,2)},D=g.__private__.f3=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f3");return ge(p,3)},O=g.scale=g.__private__.scale=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.scale");return j===k.COMPAT?p*Be:j===k.ADVANCED?p:void 0},G=function(p){return j===k.COMPAT?Js()-p:j===k.ADVANCED?p:void 0},H=function(p){return O(G(p))};g.__private__.setPrecision=g.setPrecision=function(p){typeof parseInt(p,10)=="number"&&(e=parseInt(p,10))};var ye,le="00000000000000000000000000000000",de=g.__private__.getFileId=function(){return le},ne=g.__private__.setFileId=function(p){return le=p!==void 0&&/^[a-fA-F0-9]{32}$/.test(p)?p.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(tr=new Ic(f.userPermissions,f.userPassword,f.ownerPassword,le)),le};g.setFileId=function(p){return ne(p),this},g.getFileId=function(){return de()};var _e=g.__private__.convertDateToPDFDate=function(p){var A=p.getTimezoneOffset(),q=A<0?"+":"-",K=Math.floor(Math.abs(A/60)),ae=Math.abs(A%60),Se=[q,V(K),"'",V(ae),"'"].join("");return["D:",p.getFullYear(),V(p.getMonth()+1),V(p.getDate()),V(p.getHours()),V(p.getMinutes()),V(p.getSeconds()),Se].join("")},we=g.__private__.convertPDFDateToDate=function(p){var A=parseInt(p.substr(2,4),10),q=parseInt(p.substr(6,2),10)-1,K=parseInt(p.substr(8,2),10),ae=parseInt(p.substr(10,2),10),Se=parseInt(p.substr(12,2),10),Oe=parseInt(p.substr(14,2),10);return new Date(A,q,K,ae,Se,Oe,0)},Fe=g.__private__.setCreationDate=function(p){var A;if(p===void 0&&(p=new Date),p instanceof Date)A=_e(p);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(p))throw new Error("Invalid argument passed to jsPDF.setCreationDate");A=p}return ye=A},E=g.__private__.getCreationDate=function(p){var A=ye;return p==="jsDate"&&(A=we(ye)),A};g.setCreationDate=function(p){return Fe(p),this},g.getCreationDate=function(p){return E(p)};var U,V=g.__private__.padd2=function(p){return("0"+parseInt(p)).slice(-2)},P=g.__private__.padd2Hex=function(p){return("00"+(p=p.toString())).substr(p.length)},$=0,W=[],J=[],se=0,Le=[],Ee=[],R=!1,B=J,re=function(){$=0,se=0,J=[],W=[],Le=[],ws=An(),gi=An()};g.__private__.setCustomOutputDestination=function(p){R=!0,B=p};var z=function(p){R||(B=p)};g.__private__.resetCustomOutputDestination=function(){R=!1,B=J};var x=g.__private__.out=function(p){return p=p.toString(),se+=p.length+1,B.push(p),B},Ie=g.__private__.write=function(p){return x(arguments.length===1?p.toString():Array.prototype.join.call(arguments," "))},be=g.__private__.getArrayBuffer=function(p){for(var A=p.length,q=new ArrayBuffer(A),K=new Uint8Array(q);A--;)K[A]=p.charCodeAt(A);return q},ie=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return ie};var fe=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(p){return fe=j===k.ADVANCED?p/Be:p,this};var ce,Ae=g.__private__.getFontSize=g.getFontSize=function(){return j===k.COMPAT?fe:fe*Be},Te=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(p){return Te=p,this},g.__private__.getR2L=g.getR2L=function(){return Te};var Pe,Me=g.__private__.setZoomMode=function(p){var A=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(p))ce=p;else if(isNaN(p)){if(A.indexOf(p)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+p+'" is not recognized.');ce=p}else ce=parseInt(p,10)};g.__private__.getZoomMode=function(){return ce};var Ve,Ke=g.__private__.setPageMode=function(p){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(p)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+p+'" is not recognized.');Pe=p};g.__private__.getPageMode=function(){return Pe};var Qe=g.__private__.setLayoutMode=function(p){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(p)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+p+'" is not recognized.');Ve=p};g.__private__.getLayoutMode=function(){return Ve},g.__private__.setDisplayMode=g.setDisplayMode=function(p,A,q){return Me(p),Qe(A),Ke(q),this};var We={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(p){if(Object.keys(We).indexOf(p)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return We[p]},g.__private__.getDocumentProperties=function(){return We},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(p){for(var A in We)We.hasOwnProperty(A)&&p[A]&&(We[A]=p[A]);return this},g.__private__.setDocumentProperty=function(p,A){if(Object.keys(We).indexOf(p)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return We[p]=A};var st,Be,Ln,St,Tr,_t={},Nt={},Ur=[],Ft={},Uo={},un={},di={},_s=null,hn=0,ft=[],Bt=new tw(g),qo=t.hotfixes||[],Yn={},zi={},Hi=[],nt=function p(A,q,K,ae,Se,Oe){if(!(this instanceof p))return new p(A,q,K,ae,Se,Oe);isNaN(A)&&(A=1),isNaN(q)&&(q=0),isNaN(K)&&(K=0),isNaN(ae)&&(ae=1),isNaN(Se)&&(Se=0),isNaN(Oe)&&(Oe=0),this._matrix=[A,q,K,ae,Se,Oe]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(p){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(te).join(p)},nt.prototype.multiply=function(p){var A=p.sx*this.sx+p.shy*this.shx,q=p.sx*this.shy+p.shy*this.sy,K=p.shx*this.sx+p.sy*this.shx,ae=p.shx*this.shy+p.sy*this.sy,Se=p.tx*this.sx+p.ty*this.shx+this.tx,Oe=p.tx*this.shy+p.ty*this.sy+this.ty;return new nt(A,q,K,ae,Se,Oe)},nt.prototype.decompose=function(){var p=this.sx,A=this.shy,q=this.shx,K=this.sy,ae=this.tx,Se=this.ty,Oe=Math.sqrt(p*p+A*A),ze=(p/=Oe)*q+(A/=Oe)*K;q-=p*ze,K-=A*ze;var Je=Math.sqrt(q*q+K*K);return ze/=Je,p*(K/=Je)<A*(q/=Je)&&(p=-p,A=-A,ze=-ze,Oe=-Oe),{scale:new nt(Oe,0,0,Je,0,0),translate:new nt(1,0,0,1,ae,Se),rotate:new nt(p,A,-A,p,0,0),skew:new nt(1,0,ze,1,0,0)}},nt.prototype.toString=function(p){return this.join(" ")},nt.prototype.inversed=function(){var p=this.sx,A=this.shy,q=this.shx,K=this.sy,ae=this.tx,Se=this.ty,Oe=1/(p*K-A*q),ze=K*Oe,Je=-A*Oe,gt=-q*Oe,bt=p*Oe;return new nt(ze,Je,gt,bt,-ze*ae-gt*Se,-Je*ae-bt*Se)},nt.prototype.applyToPoint=function(p){var A=p.x*this.sx+p.y*this.shx+this.tx,q=p.x*this.shy+p.y*this.sy+this.ty;return new nc(A,q)},nt.prototype.applyToRectangle=function(p){var A=this.applyToPoint(p),q=this.applyToPoint(new nc(p.x+p.w,p.y+p.h));return new Ml(A.x,A.y,q.x-A.x,q.y-A.y)},nt.prototype.clone=function(){var p=this.sx,A=this.shy,q=this.shx,K=this.sy,ae=this.tx,Se=this.ty;return new nt(p,A,q,K,ae,Se)},g.Matrix=nt;var pi=g.matrixMult=function(p,A){return A.multiply(p)},Wi=new nt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Wi;var Cr=function(p,A){if(!Uo[p]){var q=(A instanceof sa?"Sh":"P")+(Object.keys(Ft).length+1).toString(10);A.id=q,Uo[p]=q,Ft[q]=A,Bt.publish("addPattern",A)}};g.ShadingPattern=sa,g.TilingPattern=Lc,g.addShadingPattern=function(p,A){return F("addShadingPattern()"),Cr(p,A),this},g.beginTilingPattern=function(p){F("beginTilingPattern()"),tf(p.boundingBox[0],p.boundingBox[1],p.boundingBox[2]-p.boundingBox[0],p.boundingBox[3]-p.boundingBox[1],p.matrix)},g.endTilingPattern=function(p,A){F("endTilingPattern()"),A.stream=Ee[U].join(`
`),Cr(p,A),Bt.publish("endTilingPattern",A),Hi.pop().restore()};var Rn=g.__private__.newObject=function(){var p=An();return qr(p,!0),p},An=g.__private__.newObjectDeferred=function(){return $++,W[$]=function(){return se},$},qr=function(p,A){return A=typeof A=="boolean"&&A,W[p]=se,A&&x(p+" 0 obj"),p},$a=g.__private__.newAdditionalObject=function(){var p={objId:An(),content:""};return Le.push(p),p},ws=An(),gi=An(),mi=g.__private__.decodeColorString=function(p){var A=p.split(" ");if(A.length!==2||A[1]!=="g"&&A[1]!=="G")A.length===5&&(A[4]==="k"||A[4]==="K")&&(A=[(1-A[0])*(1-A[3]),(1-A[1])*(1-A[3]),(1-A[2])*(1-A[3]),"r"]);else{var q=parseFloat(A[0]);A=[q,q,q,"r"]}for(var K="#",ae=0;ae<3;ae++)K+=("0"+Math.floor(255*parseFloat(A[ae])).toString(16)).slice(-2);return K},yi=g.__private__.encodeColorString=function(p){var A;typeof p=="string"&&(p={ch1:p});var q=p.ch1,K=p.ch2,ae=p.ch3,Se=p.ch4,Oe=p.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof q=="string"&&q.charAt(0)!=="#"){var ze=new NI(q);if(ze.ok)q=ze.toHex();else if(!/^\d*\.?\d*$/.test(q))throw new Error('Invalid color "'+q+'" passed to jsPDF.encodeColorString.')}if(typeof q=="string"&&/^#[0-9A-Fa-f]{3}$/.test(q)&&(q="#"+q[1]+q[1]+q[2]+q[2]+q[3]+q[3]),typeof q=="string"&&/^#[0-9A-Fa-f]{6}$/.test(q)){var Je=parseInt(q.substr(1),16);q=Je>>16&255,K=Je>>8&255,ae=255&Je}if(K===void 0||Se===void 0&&q===K&&K===ae)if(typeof q=="string")A=q+" "+Oe[0];else switch(p.precision){case 2:A=pe(q/255)+" "+Oe[0];break;case 3:default:A=D(q/255)+" "+Oe[0]}else if(Se===void 0||Ht(Se)==="object"){if(Se&&!isNaN(Se.a)&&Se.a===0)return A=["1.","1.","1.",Oe[1]].join(" ");if(typeof q=="string")A=[q,K,ae,Oe[1]].join(" ");else switch(p.precision){case 2:A=[pe(q/255),pe(K/255),pe(ae/255),Oe[1]].join(" ");break;default:case 3:A=[D(q/255),D(K/255),D(ae/255),Oe[1]].join(" ")}}else if(typeof q=="string")A=[q,K,ae,Se,Oe[2]].join(" ");else switch(p.precision){case 2:A=[pe(q),pe(K),pe(ae),pe(Se),Oe[2]].join(" ");break;case 3:default:A=[D(q),D(K),D(ae),D(Se),Oe[2]].join(" ")}return A},Gi=g.__private__.getFilters=function(){return o},ei=g.__private__.putStream=function(p){var A=(p=p||{}).data||"",q=p.filters||Gi(),K=p.alreadyAppliedFilters||[],ae=p.addLength1||!1,Se=A.length,Oe=p.objectId,ze=function(nr){return nr};if(f!==null&&Oe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(ze=tr.encryptor(Oe,0));var Je={};q===!0&&(q=["FlateEncode"]);var gt=p.additionalKeyValues||[],bt=(Je=rt.API.processDataByFilters!==void 0?rt.API.processDataByFilters(A,q):{data:A,reverseChain:[]}).reverseChain+(Array.isArray(K)?K.join(" "):K.toString());if(Je.data.length!==0&&(gt.push({key:"Length",value:Je.data.length}),ae===!0&&gt.push({key:"Length1",value:Se})),bt.length!=0)if(bt.split("/").length-1==1)gt.push({key:"Filter",value:bt});else{gt.push({key:"Filter",value:"["+bt+"]"});for(var Ct=0;Ct<gt.length;Ct+=1)if(gt[Ct].key==="DecodeParms"){for(var cn=[],fn=0;fn<Je.reverseChain.split("/").length-1;fn+=1)cn.push("null");cn.push(gt[Ct].value),gt[Ct].value="["+cn.join(" ")+"]"}}x("<<");for(var Sn=0;Sn<gt.length;Sn++)x("/"+gt[Sn].key+" "+gt[Sn].value);x(">>"),Je.data.length!==0&&(x("stream"),x(ze(Je.data)),x("endstream"))},Ki=g.__private__.putPage=function(p){var A=p.number,q=p.data,K=p.objId,ae=p.contentsObjId;qr(K,!0),x("<</Type /Page"),x("/Parent "+p.rootDictionaryObjId+" 0 R"),x("/Resources "+p.resourceDictionaryObjId+" 0 R"),x("/MediaBox ["+parseFloat(te(p.mediaBox.bottomLeftX))+" "+parseFloat(te(p.mediaBox.bottomLeftY))+" "+te(p.mediaBox.topRightX)+" "+te(p.mediaBox.topRightY)+"]"),p.cropBox!==null&&x("/CropBox ["+te(p.cropBox.bottomLeftX)+" "+te(p.cropBox.bottomLeftY)+" "+te(p.cropBox.topRightX)+" "+te(p.cropBox.topRightY)+"]"),p.bleedBox!==null&&x("/BleedBox ["+te(p.bleedBox.bottomLeftX)+" "+te(p.bleedBox.bottomLeftY)+" "+te(p.bleedBox.topRightX)+" "+te(p.bleedBox.topRightY)+"]"),p.trimBox!==null&&x("/TrimBox ["+te(p.trimBox.bottomLeftX)+" "+te(p.trimBox.bottomLeftY)+" "+te(p.trimBox.topRightX)+" "+te(p.trimBox.topRightY)+"]"),p.artBox!==null&&x("/ArtBox ["+te(p.artBox.bottomLeftX)+" "+te(p.artBox.bottomLeftY)+" "+te(p.artBox.topRightX)+" "+te(p.artBox.topRightY)+"]"),typeof p.userUnit=="number"&&p.userUnit!==1&&x("/UserUnit "+p.userUnit),Bt.publish("putPage",{objId:K,pageContext:ft[A],pageNumber:A,page:q}),x("/Contents "+ae+" 0 R"),x(">>"),x("endobj");var Se=q.join(`
`);return j===k.ADVANCED&&(Se+=`
Q`),qr(ae,!0),ei({data:Se,filters:Gi(),objectId:ae}),x("endobj"),K},Vo=g.__private__.putPages=function(){var p,A,q=[];for(p=1;p<=hn;p++)ft[p].objId=An(),ft[p].contentsObjId=An();for(p=1;p<=hn;p++)q.push(Ki({number:p,data:Ee[p],objId:ft[p].objId,contentsObjId:ft[p].contentsObjId,mediaBox:ft[p].mediaBox,cropBox:ft[p].cropBox,bleedBox:ft[p].bleedBox,trimBox:ft[p].trimBox,artBox:ft[p].artBox,userUnit:ft[p].userUnit,rootDictionaryObjId:ws,resourceDictionaryObjId:gi}));qr(ws,!0),x("<</Type /Pages");var K="/Kids [";for(A=0;A<hn;A++)K+=q[A]+" 0 R ";x(K+"]"),x("/Count "+hn),x(">>"),x("endobj"),Bt.publish("postPutPages")},za=function(p){Bt.publish("putFont",{font:p,out:x,newObject:Rn,putStream:ei}),p.isAlreadyPutted!==!0&&(p.objectNumber=Rn(),x("<<"),x("/Type /Font"),x("/BaseFont /"+Nc(p.postScriptName)),x("/Subtype /Type1"),typeof p.encoding=="string"&&x("/Encoding /"+p.encoding),x("/FirstChar 32"),x("/LastChar 255"),x(">>"),x("endobj"))},Ha=function(){for(var p in _t)_t.hasOwnProperty(p)&&(d===!1||d===!0&&y.hasOwnProperty(p))&&za(_t[p])},Wa=function(p){p.objectNumber=Rn();var A=[];A.push({key:"Type",value:"/XObject"}),A.push({key:"Subtype",value:"/Form"}),A.push({key:"BBox",value:"["+[te(p.x),te(p.y),te(p.x+p.width),te(p.y+p.height)].join(" ")+"]"}),A.push({key:"Matrix",value:"["+p.matrix.toString()+"]"});var q=p.pages[1].join(`
`);ei({data:q,additionalKeyValues:A,objectId:p.objectNumber}),x("endobj")},Ga=function(){for(var p in Yn)Yn.hasOwnProperty(p)&&Wa(Yn[p])},Fh=function(p,A){var q,K=[],ae=1/(A-1);for(q=0;q<1;q+=ae)K.push(q);if(K.push(1),p[0].offset!=0){var Se={offset:0,color:p[0].color};p.unshift(Se)}if(p[p.length-1].offset!=1){var Oe={offset:1,color:p[p.length-1].color};p.push(Oe)}for(var ze="",Je=0,gt=0;gt<K.length;gt++){for(q=K[gt];q>p[Je+1].offset;)Je++;var bt=p[Je].offset,Ct=(q-bt)/(p[Je+1].offset-bt),cn=p[Je].color,fn=p[Je+1].color;ze+=P(Math.round((1-Ct)*cn[0]+Ct*fn[0]).toString(16))+P(Math.round((1-Ct)*cn[1]+Ct*fn[1]).toString(16))+P(Math.round((1-Ct)*cn[2]+Ct*fn[2]).toString(16))}return ze.trim()},ug=function(p,A){A||(A=21);var q=Rn(),K=Fh(p.colors,A),ae=[];ae.push({key:"FunctionType",value:"0"}),ae.push({key:"Domain",value:"[0.0 1.0]"}),ae.push({key:"Size",value:"["+A+"]"}),ae.push({key:"BitsPerSample",value:"8"}),ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ei({data:K,additionalKeyValues:ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:q}),x("endobj"),p.objectNumber=Rn(),x("<< /ShadingType "+p.type),x("/ColorSpace /DeviceRGB");var Se="/Coords ["+te(parseFloat(p.coords[0]))+" "+te(parseFloat(p.coords[1]))+" ";p.type===2?Se+=te(parseFloat(p.coords[2]))+" "+te(parseFloat(p.coords[3])):Se+=te(parseFloat(p.coords[2]))+" "+te(parseFloat(p.coords[3]))+" "+te(parseFloat(p.coords[4]))+" "+te(parseFloat(p.coords[5])),x(Se+="]"),p.matrix&&x("/Matrix ["+p.matrix.toString()+"]"),x("/Function "+q+" 0 R"),x("/Extend [true true]"),x(">>"),x("endobj")},hg=function(p,A){var q=An(),K=Rn();A.push({resourcesOid:q,objectOid:K}),p.objectNumber=K;var ae=[];ae.push({key:"Type",value:"/Pattern"}),ae.push({key:"PatternType",value:"1"}),ae.push({key:"PaintType",value:"1"}),ae.push({key:"TilingType",value:"1"}),ae.push({key:"BBox",value:"["+p.boundingBox.map(te).join(" ")+"]"}),ae.push({key:"XStep",value:te(p.xStep)}),ae.push({key:"YStep",value:te(p.yStep)}),ae.push({key:"Resources",value:q+" 0 R"}),p.matrix&&ae.push({key:"Matrix",value:"["+p.matrix.toString()+"]"}),ei({data:p.stream,additionalKeyValues:ae,objectId:p.objectNumber}),x("endobj")},Ka=function(p){var A;for(A in Ft)Ft.hasOwnProperty(A)&&(Ft[A]instanceof sa?ug(Ft[A]):Ft[A]instanceof Lc&&hg(Ft[A],p))},Bh=function(p){for(var A in p.objectNumber=Rn(),x("<<"),p)switch(A){case"opacity":x("/ca "+pe(p[A]));break;case"stroke-opacity":x("/CA "+pe(p[A]))}x(">>"),x("endobj")},fg=function(){var p;for(p in un)un.hasOwnProperty(p)&&Bh(un[p])},Nl=function(){for(var p in x("/XObject <<"),Yn)Yn.hasOwnProperty(p)&&Yn[p].objectNumber>=0&&x("/"+p+" "+Yn[p].objectNumber+" 0 R");Bt.publish("putXobjectDict"),x(">>")},dg=function(){tr.oid=Rn(),x("<<"),x("/Filter /Standard"),x("/V "+tr.v),x("/R "+tr.r),x("/U <"+tr.toHexString(tr.U)+">"),x("/O <"+tr.toHexString(tr.O)+">"),x("/P "+tr.P),x(">>"),x("endobj")},jh=function(){for(var p in x("/Font <<"),_t)_t.hasOwnProperty(p)&&(d===!1||d===!0&&y.hasOwnProperty(p))&&x("/"+p+" "+_t[p].objectNumber+" 0 R");x(">>")},pg=function(){if(Object.keys(Ft).length>0){for(var p in x("/Shading <<"),Ft)Ft.hasOwnProperty(p)&&Ft[p]instanceof sa&&Ft[p].objectNumber>=0&&x("/"+p+" "+Ft[p].objectNumber+" 0 R");Bt.publish("putShadingPatternDict"),x(">>")}},Ya=function(p){if(Object.keys(Ft).length>0){for(var A in x("/Pattern <<"),Ft)Ft.hasOwnProperty(A)&&Ft[A]instanceof g.TilingPattern&&Ft[A].objectNumber>=0&&Ft[A].objectNumber<p&&x("/"+A+" "+Ft[A].objectNumber+" 0 R");Bt.publish("putTilingPatternDict"),x(">>")}},gg=function(){if(Object.keys(un).length>0){var p;for(p in x("/ExtGState <<"),un)un.hasOwnProperty(p)&&un[p].objectNumber>=0&&x("/"+p+" "+un[p].objectNumber+" 0 R");Bt.publish("putGStateDict"),x(">>")}},mn=function(p){qr(p.resourcesOid,!0),x("<<"),x("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),jh(),pg(),Ya(p.objectOid),gg(),Nl(),x(">>"),x("endobj")},Uh=function(){var p=[];Ha(),fg(),Ga(),Ka(p),Bt.publish("putResources"),p.forEach(mn),mn({resourcesOid:gi,objectOid:Number.MAX_SAFE_INTEGER}),Bt.publish("postPutResources")},qh=function(){Bt.publish("putAdditionalObjects");for(var p=0;p<Le.length;p++){var A=Le[p];qr(A.objId,!0),x(A.content),x("endobj")}Bt.publish("postPutAdditionalObjects")},Vh=function(p){Nt[p.fontName]=Nt[p.fontName]||{},Nt[p.fontName][p.fontStyle]=p.id},Tl=function(p,A,q,K,ae){var Se={id:"F"+(Object.keys(_t).length+1).toString(10),postScriptName:p,fontName:A,fontStyle:q,encoding:K,isStandardFont:ae||!1,metadata:{}};return Bt.publish("addFont",{font:Se,instance:this}),_t[Se.id]=Se,Vh(Se),Se.id},mg=function(p){for(var A=0,q=ie.length;A<q;A++){var K=Tl.call(this,p[A][0],p[A][1],p[A][2],ie[A][3],!0);d===!1&&(y[K]=!0);var ae=p[A][0].split("-");Vh({id:K,fontName:ae[0],fontStyle:ae[1]||""})}Bt.publish("addFonts",{fonts:_t,dictionary:Nt})},vi=function(p){return p.foo=function(){try{return p.apply(this,arguments)}catch(K){var A=K.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var q="Error in function "+A.split(`
`)[0].split("<")[0]+": "+K.message;if(!ot.console)throw new Error(q);ot.console.error(q,K),ot.alert&&alert(q)}},p.foo.bar=p,p.foo},Qa=function(p,A){var q,K,ae,Se,Oe,ze,Je,gt,bt;if(ae=(A=A||{}).sourceEncoding||"Unicode",Oe=A.outputEncoding,(A.autoencode||Oe)&&_t[st].metadata&&_t[st].metadata[ae]&&_t[st].metadata[ae].encoding&&(Se=_t[st].metadata[ae].encoding,!Oe&&_t[st].encoding&&(Oe=_t[st].encoding),!Oe&&Se.codePages&&(Oe=Se.codePages[0]),typeof Oe=="string"&&(Oe=Se[Oe]),Oe)){for(Je=!1,ze=[],q=0,K=p.length;q<K;q++)(gt=Oe[p.charCodeAt(q)])?ze.push(String.fromCharCode(gt)):ze.push(p[q]),ze[q].charCodeAt(0)>>8&&(Je=!0);p=ze.join("")}for(q=p.length;Je===void 0&&q!==0;)p.charCodeAt(q-1)>>8&&(Je=!0),q--;if(!Je)return p;for(ze=A.noBOM?[]:[254,255],q=0,K=p.length;q<K;q++){if((bt=(gt=p.charCodeAt(q))>>8)>>8)throw new Error("Character at position "+q+" of string '"+p+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ze.push(bt),ze.push(gt-(bt<<8))}return String.fromCharCode.apply(void 0,ze)},xr=g.__private__.pdfEscape=g.pdfEscape=function(p,A){return Qa(p,A).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cl=g.__private__.beginPage=function(p){Ee[++hn]=[],ft[hn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(p[0]),topRightY:Number(p[1])}},zh(hn),z(Ee[U])},$h=function(p,A){var q,K,ae;switch(n=A||n,typeof p=="string"&&(q=S(p.toLowerCase()),Array.isArray(q)&&(K=q[0],ae=q[1])),Array.isArray(p)&&(K=p[0]*Be,ae=p[1]*Be),isNaN(K)&&(K=i[0],ae=i[1]),(K>14400||ae>14400)&&(Yt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),K=Math.min(14400,K),ae=Math.min(14400,ae)),i=[K,ae],n.substr(0,1)){case"l":ae>K&&(i=[ae,K]);break;case"p":K>ae&&(i=[ae,K])}Cl(i),Qh(Rl),x(_i),Ol!==0&&x(Ol+" J"),Dl!==0&&x(Dl+" j"),Bt.publish("addPage",{pageNumber:hn})},yg=function(p){p>0&&p<=hn&&(Ee.splice(p,1),ft.splice(p,1),hn--,U>hn&&(U=hn),this.setPage(U))},zh=function(p){p>0&&p<=hn&&(U=p)},vg=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Ee.length-1},Hh=function(p,A,q){var K,ae=void 0;return q=q||{},p=p!==void 0?p:_t[st].fontName,A=A!==void 0?A:_t[st].fontStyle,K=p.toLowerCase(),Nt[K]!==void 0&&Nt[K][A]!==void 0?ae=Nt[K][A]:Nt[p]!==void 0&&Nt[p][A]!==void 0?ae=Nt[p][A]:q.disableWarning===!1&&Yt.warn("Unable to look up font label for font '"+p+"', '"+A+"'. Refer to getFontList() for available fonts."),ae||q.noFallback||(ae=Nt.times[A])==null&&(ae=Nt.times.normal),ae},_g=g.__private__.putInfo=function(){var p=Rn(),A=function(K){return K};for(var q in f!==null&&(A=tr.encryptor(p,0)),x("<<"),x("/Producer ("+xr(A("jsPDF "+rt.version))+")"),We)We.hasOwnProperty(q)&&We[q]&&x("/"+q.substr(0,1).toUpperCase()+q.substr(1)+" ("+xr(A(We[q]))+")");x("/CreationDate ("+xr(A(ye))+")"),x(">>"),x("endobj")},xl=g.__private__.putCatalog=function(p){var A=(p=p||{}).rootDictionaryObjId||ws;switch(Rn(),x("<<"),x("/Type /Catalog"),x("/Pages "+A+" 0 R"),ce||(ce="fullwidth"),ce){case"fullwidth":x("/OpenAction [3 0 R /FitH null]");break;case"fullheight":x("/OpenAction [3 0 R /FitV null]");break;case"fullpage":x("/OpenAction [3 0 R /Fit]");break;case"original":x("/OpenAction [3 0 R /XYZ null null 1]");break;default:var q=""+ce;q.substr(q.length-1)==="%"&&(ce=parseInt(ce)/100),typeof ce=="number"&&x("/OpenAction [3 0 R /XYZ null null "+pe(ce)+"]")}switch(Ve||(Ve="continuous"),Ve){case"continuous":x("/PageLayout /OneColumn");break;case"single":x("/PageLayout /SinglePage");break;case"two":case"twoleft":x("/PageLayout /TwoColumnLeft");break;case"tworight":x("/PageLayout /TwoColumnRight")}Pe&&x("/PageMode /"+Pe),Bt.publish("putCatalog"),x(">>"),x("endobj")},wg=g.__private__.putTrailer=function(){x("trailer"),x("<<"),x("/Size "+($+1)),x("/Root "+$+" 0 R"),x("/Info "+($-1)+" 0 R"),f!==null&&x("/Encrypt "+tr.oid+" 0 R"),x("/ID [ <"+le+"> <"+le+"> ]"),x(">>")},bg=g.__private__.putHeader=function(){x("%PDF-"+w),x("%")},Ag=g.__private__.putXRef=function(){var p="0000000000";x("xref"),x("0 "+($+1)),x("0000000000 65535 f ");for(var A=1;A<=$;A++)typeof W[A]=="function"?x((p+W[A]()).slice(-10)+" 00000 n "):W[A]!==void 0?x((p+W[A]).slice(-10)+" 00000 n "):x("0000000000 00000 n ")},bs=g.__private__.buildDocument=function(){re(),z(J),Bt.publish("buildDocument"),bg(),Vo(),qh(),Uh(),f!==null&&dg(),_g(),xl();var p=se;return Ag(),wg(),x("startxref"),x(""+p),x("%%EOF"),z(Ee[U]),J.join(`
`)},Xa=g.__private__.getBlob=function(p){return new Blob([be(p)],{type:"application/pdf"})},Ja=g.output=g.__private__.output=vi(function(p,A){switch(typeof(A=A||{})=="string"?A={filename:A}:A.filename=A.filename||"generated.pdf",p){case void 0:return bs();case"save":g.save(A.filename);break;case"arraybuffer":return be(bs());case"blob":return Xa(bs());case"bloburi":case"bloburl":if(ot.URL!==void 0&&typeof ot.URL.createObjectURL=="function")return ot.URL&&ot.URL.createObjectURL(Xa(bs()))||void 0;Yt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var q="",K=bs();try{q=m0(K)}catch{q=m0(unescape(encodeURIComponent(K)))}return"data:application/pdf;filename="+A.filename+";base64,"+q;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ot)==="[object Window]"){var ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Se=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';A.pdfObjectUrl&&(ae=A.pdfObjectUrl,Se="");var Oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ae+'"'+Se+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(A)+");<\/script></body></html>",ze=ot.open();return ze!==null&&ze.document.write(Oe),ze}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ot)==="[object Window]"){var Je='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(A.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+A.filename+'" width="500px" height="400px" /></body></html>',gt=ot.open();if(gt!==null){gt.document.write(Je);var bt=this;gt.document.documentElement.querySelector("#pdfViewer").onload=function(){gt.document.title=A.filename,gt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(bt.output("bloburl"))}}return gt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ot)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",A)+'"></iframe></body></html>',cn=ot.open();if(cn!==null&&(cn.document.write(Ct),cn.document.title=A.filename),cn||typeof safari>"u")return cn;break;case"datauri":case"dataurl":return ot.document.location.href=this.output("datauristring",A);default:return null}}),Wh=function(p){return Array.isArray(qo)===!0&&qo.indexOf(p)>-1};switch(r){case"pt":Be=1;break;case"mm":Be=72/25.4;break;case"cm":Be=72/2.54;break;case"in":Be=72;break;case"px":Be=Wh("px_scaling")==1?.75:96/72;break;case"pc":case"em":Be=12;break;case"ex":Be=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Be=r}var tr=null;Fe(),ne();var Sg=function(p){return f!==null?tr.encryptor(p,0):function(A){return A}},Gh=g.__private__.getPageInfo=g.getPageInfo=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ft[p].objId,pageNumber:p,pageContext:ft[p]}},ut=g.__private__.getPageInfoByObjId=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var A in ft)if(ft[A].objId===p)break;return Gh(A)},Eg=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:ft[U].objId,pageNumber:U,pageContext:ft[U]}};g.addPage=function(){return $h.apply(this,arguments),this},g.setPage=function(){return zh.apply(this,arguments),z.call(this,Ee[U]),this},g.insertPage=function(p){return this.addPage(),this.movePage(U,p),this},g.movePage=function(p,A){var q,K;if(p>A){q=Ee[p],K=ft[p];for(var ae=p;ae>A;ae--)Ee[ae]=Ee[ae-1],ft[ae]=ft[ae-1];Ee[A]=q,ft[A]=K,this.setPage(A)}else if(p<A){q=Ee[p],K=ft[p];for(var Se=p;Se<A;Se++)Ee[Se]=Ee[Se+1],ft[Se]=ft[Se+1];Ee[A]=q,ft[A]=K,this.setPage(A)}return this},g.deletePage=function(){return yg.apply(this,arguments),this},g.__private__.text=g.text=function(p,A,q,K,ae){var Se,Oe,ze,Je,gt,bt,Ct,cn,fn,Sn=(K=K||{}).scope||this;if(typeof p=="number"&&typeof A=="number"&&(typeof q=="string"||Array.isArray(q))){var nr=q;q=A,A=p,p=nr}if(arguments[3]instanceof nt?(F("The transform parameter of text() with a Matrix value"),fn=ae):(ze=arguments[4],Je=arguments[5],Ht(Ct=arguments[3])==="object"&&Ct!==null||(typeof ze=="string"&&(Je=ze,ze=null),typeof Ct=="string"&&(Je=Ct,Ct=null),typeof Ct=="number"&&(ze=Ct,Ct=null),K={flags:Ct,angle:ze,align:Je})),isNaN(A)||isNaN(q)||p==null)throw new Error("Invalid arguments passed to jsPDF.text");if(p.length===0)return Sn;var Un="",wi=!1,Vr=typeof K.lineHeightFactor=="number"?K.lineHeightFactor:zo,Ss=Sn.internal.scaleFactor;function nf(Qt){return Qt=Qt.split("	").join(Array(K.TabLen||9).join(" ")),xr(Qt,Ct)}function Ul(Qt){for(var Xt,yn=Qt.concat(),Pn=[],Ts=yn.length;Ts--;)typeof(Xt=yn.shift())=="string"?Pn.push(Xt):Array.isArray(Qt)&&(Xt.length===1||Xt[1]===void 0&&Xt[2]===void 0)?Pn.push(Xt[0]):Pn.push([Xt[0],Xt[1],Xt[2]]);return Pn}function ql(Qt,Xt){var yn;if(typeof Qt=="string")yn=Xt(Qt)[0];else if(Array.isArray(Qt)){for(var Pn,Ts,ro=Qt.concat(),fc=[],sf=ro.length;sf--;)typeof(Pn=ro.shift())=="string"?fc.push(Xt(Pn)[0]):Array.isArray(Pn)&&typeof Pn[0]=="string"&&(Ts=Xt(Pn[0],Pn[1],Pn[2]),fc.push([Ts[0],Ts[1],Ts[2]]));yn=fc}return yn}var ic=!1,Vl=!0;if(typeof p=="string")ic=!0;else if(Array.isArray(p)){var $l=p.concat();Oe=[];for(var sc,kr=$l.length;kr--;)(typeof(sc=$l.shift())!="string"||Array.isArray(sc)&&typeof sc[0]!="string")&&(Vl=!1);ic=Vl}if(ic===!1)throw new Error('Type of text must be string or Array. "'+p+'" is not recognized.');typeof p=="string"&&(p=p.match(/[\r?\n]/)?p.split(/\r\n|\r|\n/g):[p]);var oc=fe/Sn.internal.scaleFactor,ac=oc*(Vr-1);switch(K.baseline){case"bottom":q-=ac;break;case"top":q+=oc-ac;break;case"hanging":q+=oc-2*ac;break;case"middle":q+=oc/2-ac}if((bt=K.maxWidth||0)>0&&(typeof p=="string"?p=Sn.splitTextToSize(p,bt):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(Qt,Xt){return Qt.concat(Sn.splitTextToSize(Xt,bt))},[]))),Se={text:p,x:A,y:q,options:K,mutex:{pdfEscape:xr,activeFontKey:st,fonts:_t,activeFontSize:fe}},Bt.publish("preProcessText",Se),p=Se.text,ze=(K=Se.options).angle,!(fn instanceof nt)&&ze&&typeof ze=="number"){ze*=Math.PI/180,K.rotationDirection===0&&(ze=-ze),j===k.ADVANCED&&(ze=-ze);var cc=Math.cos(ze),zl=Math.sin(ze);fn=new nt(cc,zl,-zl,cc,0,0)}else ze&&ze instanceof nt&&(fn=ze);j!==k.ADVANCED||fn||(fn=Wi),(gt=K.charSpace||tc)!==void 0&&(Un+=te(O(gt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(cn=K.horizontalScale)!==void 0&&(Un+=te(100*cn)+` Tz
`),K.lang;var Lr=-1,Og=K.renderingMode!==void 0?K.renderingMode:K.stroke,Hl=Sn.internal.getCurrentPageInfo().pageContext;switch(Og){case 0:case!1:case"fill":Lr=0;break;case 1:case!0:case"stroke":Lr=1;break;case 2:case"fillThenStroke":Lr=2;break;case 3:case"invisible":Lr=3;break;case 4:case"fillAndAddForClipping":Lr=4;break;case 5:case"strokeAndAddPathForClipping":Lr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Lr=6;break;case 7:case"addToPathForClipping":Lr=7}var rf=Hl.usedRenderingMode!==void 0?Hl.usedRenderingMode:-1;Lr!==-1?Un+=Lr+` Tr
`:rf!==-1&&(Un+=`0 Tr
`),Lr!==-1&&(Hl.usedRenderingMode=Lr),Je=K.align||"left";var bi,Wl=fe*Vr,Dg=Sn.internal.pageSize.getWidth(),Mg=_t[st];gt=K.charSpace||tc,bt=K.maxWidth||0,Ct=Object.assign({autoencode:!0,noBOM:!0},K.flags);var Zs=[];if(Object.prototype.toString.call(p)==="[object Array]"){var ti;Oe=Ul(p),Je!=="left"&&(bi=Oe.map(function(Qt){return Sn.getStringUnitWidth(Qt,{font:Mg,charSpace:gt,fontSize:fe,doKerning:!1})*fe/Ss}));var Ai,eo=0;if(Je==="right"){A-=bi[0],p=[],kr=Oe.length;for(var Qi=0;Qi<kr;Qi++)Qi===0?(Ai=As(A),ti=Qs(q)):(Ai=O(eo-bi[Qi]),ti=-Wl),p.push([Oe[Qi],Ai,ti]),eo=bi[Qi]}else if(Je==="center"){A-=bi[0]/2,p=[],kr=Oe.length;for(var Es=0;Es<kr;Es++)Es===0?(Ai=As(A),ti=Qs(q)):(Ai=O((eo-bi[Es])/2),ti=-Wl),p.push([Oe[Es],Ai,ti]),eo=bi[Es]}else if(Je==="left"){p=[],kr=Oe.length;for(var lc=0;lc<kr;lc++)p.push(Oe[lc])}else{if(Je!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');p=[],kr=Oe.length,bt=bt!==0?bt:Dg;for(var Si=0;Si<kr;Si++)ti=Si===0?Qs(q):-Wl,Ai=Si===0?As(A):0,Si<kr-1?Zs.push(te(O((bt-bi[Si])/(Oe[Si].split(" ").length-1)))):Zs.push(0),p.push([Oe[Si],Ai,ti])}}var uc=typeof K.R2L=="boolean"?K.R2L:Te;uc===!0&&(p=ql(p,function(Qt,Xt,yn){return[Qt.split("").reverse().join(""),Xt,yn]})),Se={text:p,x:A,y:q,options:K,mutex:{pdfEscape:xr,activeFontKey:st,fonts:_t,activeFontSize:fe}},Bt.publish("postProcessText",Se),p=Se.text,wi=Se.mutex.isHex||!1;var Gl=_t[st].encoding;Gl!=="WinAnsiEncoding"&&Gl!=="StandardEncoding"||(p=ql(p,function(Qt,Xt,yn){return[nf(Qt),Xt,yn]})),Oe=Ul(p),p=[];for(var to,Ei,Is,Go=0,hc=1,Ko=Array.isArray(Oe[0])?hc:Go,no="",Kl=function(Qt,Xt,yn){var Pn="";return yn instanceof nt?(yn=typeof K.angle=="number"?pi(yn,new nt(1,0,0,1,Qt,Xt)):pi(new nt(1,0,0,1,Qt,Xt),yn),j===k.ADVANCED&&(yn=pi(new nt(1,0,0,-1,0,0),yn)),Pn=yn.join(" ")+` Tm
`):Pn=te(Qt)+" "+te(Xt)+` Td
`,Pn},ni=0;ni<Oe.length;ni++){switch(no="",Ko){case hc:Is=(wi?"<":"(")+Oe[ni][0]+(wi?">":")"),to=parseFloat(Oe[ni][1]),Ei=parseFloat(Oe[ni][2]);break;case Go:Is=(wi?"<":"(")+Oe[ni]+(wi?">":")"),to=As(A),Ei=Qs(q)}Zs!==void 0&&Zs[ni]!==void 0&&(no=Zs[ni]+` Tw
`),ni===0?p.push(no+Kl(to,Ei,fn)+Is):Ko===Go?p.push(no+Is):Ko===hc&&p.push(no+Kl(to,Ei,fn)+Is)}p=Ko===Go?p.join(` Tj
T* `):p.join(` Tj
`),p+=` Tj
`;var Ns=`BT
/`;return Ns+=st+" "+fe+` Tf
`,Ns+=te(fe*Vr)+` TL
`,Ns+=Ho+`
`,Ns+=Un,Ns+=p,x(Ns+="ET"),y[st]=!0,Sn};var Ig=g.__private__.clip=g.clip=function(p){return x(p==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Ig("evenodd")},g.__private__.discardPath=g.discardPath=function(){return x("n"),this};var Yi=g.__private__.isValidStyle=function(p){var A=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(p)!==-1&&(A=!0),A};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(p){return Yi(p)&&(u=p),this};var Kh=g.__private__.getStyle=g.getStyle=function(p){var A=u;switch(p){case"D":case"S":A="S";break;case"F":A="f";break;case"FD":case"DF":A="B";break;case"f":case"f*":case"B":case"B*":A=p}return A},Yh=g.close=function(){return x("h"),this};g.stroke=function(){return x("S"),this},g.fill=function(p){return Za("f",p),this},g.fillEvenOdd=function(p){return Za("f*",p),this},g.fillStroke=function(p){return Za("B",p),this},g.fillStrokeEvenOdd=function(p){return Za("B*",p),this};var Za=function(p,A){Ht(A)==="object"?Tg(A,p):x(p)},kl=function(p){p===null||j===k.ADVANCED&&p===void 0||(p=Kh(p),x(p))};function Ng(p,A,q,K,ae){var Se=new Lc(A||this.boundingBox,q||this.xStep,K||this.yStep,this.gState,ae||this.matrix);Se.stream=this.stream;var Oe=p+"$$"+this.cloneIndex+++"$$";return Cr(Oe,Se),Se}var Tg=function(p,A){var q=Uo[p.key],K=Ft[q];if(K instanceof sa)x("q"),x(Cg(A)),K.gState&&g.setGState(K.gState),x(p.matrix.toString()+" cm"),x("/"+q+" sh"),x("Q");else if(K instanceof Lc){var ae=new nt(1,0,0,-1,0,Js());p.matrix&&(ae=ae.multiply(p.matrix||Wi),q=Ng.call(K,p.key,p.boundingBox,p.xStep,p.yStep,ae).id),x("q"),x("/Pattern cs"),x("/"+q+" scn"),K.gState&&g.setGState(K.gState),x(A),x("Q")}},Cg=function(p){switch(p){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ll=g.moveTo=function(p,A){return x(te(O(p))+" "+te(H(A))+" m"),this},$o=g.lineTo=function(p,A){return x(te(O(p))+" "+te(H(A))+" l"),this},Ys=g.curveTo=function(p,A,q,K,ae,Se){return x([te(O(p)),te(H(A)),te(O(q)),te(H(K)),te(O(ae)),te(H(Se)),"c"].join(" ")),this};g.__private__.line=g.line=function(p,A,q,K,ae){if(isNaN(p)||isNaN(A)||isNaN(q)||isNaN(K)||!Yi(ae))throw new Error("Invalid arguments passed to jsPDF.line");return j===k.COMPAT?this.lines([[q-p,K-A]],p,A,[1,1],ae||"S"):this.lines([[q-p,K-A]],p,A,[1,1]).stroke()},g.__private__.lines=g.lines=function(p,A,q,K,ae,Se){var Oe,ze,Je,gt,bt,Ct,cn,fn,Sn,nr,Un,wi;if(typeof p=="number"&&(wi=q,q=A,A=p,p=wi),K=K||[1,1],Se=Se||!1,isNaN(A)||isNaN(q)||!Array.isArray(p)||!Array.isArray(K)||!Yi(ae)||typeof Se!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ll(A,q),Oe=K[0],ze=K[1],gt=p.length,nr=A,Un=q,Je=0;Je<gt;Je++)(bt=p[Je]).length===2?(nr=bt[0]*Oe+nr,Un=bt[1]*ze+Un,$o(nr,Un)):(Ct=bt[0]*Oe+nr,cn=bt[1]*ze+Un,fn=bt[2]*Oe+nr,Sn=bt[3]*ze+Un,nr=bt[4]*Oe+nr,Un=bt[5]*ze+Un,Ys(Ct,cn,fn,Sn,nr,Un));return Se&&Yh(),kl(ae),this},g.path=function(p){for(var A=0;A<p.length;A++){var q=p[A],K=q.c;switch(q.op){case"m":Ll(K[0],K[1]);break;case"l":$o(K[0],K[1]);break;case"c":Ys.apply(this,K);break;case"h":Yh()}}return this},g.__private__.rect=g.rect=function(p,A,q,K,ae){if(isNaN(p)||isNaN(A)||isNaN(q)||isNaN(K)||!Yi(ae))throw new Error("Invalid arguments passed to jsPDF.rect");return j===k.COMPAT&&(K=-K),x([te(O(p)),te(H(A)),te(O(q)),te(O(K)),"re"].join(" ")),kl(ae),this},g.__private__.triangle=g.triangle=function(p,A,q,K,ae,Se,Oe){if(isNaN(p)||isNaN(A)||isNaN(q)||isNaN(K)||isNaN(ae)||isNaN(Se)||!Yi(Oe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[q-p,K-A],[ae-q,Se-K],[p-ae,A-Se]],p,A,[1,1],Oe,!0),this},g.__private__.roundedRect=g.roundedRect=function(p,A,q,K,ae,Se,Oe){if(isNaN(p)||isNaN(A)||isNaN(q)||isNaN(K)||isNaN(ae)||isNaN(Se)||!Yi(Oe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ze=4/3*(Math.SQRT2-1);return ae=Math.min(ae,.5*q),Se=Math.min(Se,.5*K),this.lines([[q-2*ae,0],[ae*ze,0,ae,Se-Se*ze,ae,Se],[0,K-2*Se],[0,Se*ze,-ae*ze,Se,-ae,Se],[2*ae-q,0],[-ae*ze,0,-ae,-Se*ze,-ae,-Se],[0,2*Se-K],[0,-Se*ze,ae*ze,-Se,ae,-Se]],p+ae,A,[1,1],Oe,!0),this},g.__private__.ellipse=g.ellipse=function(p,A,q,K,ae){if(isNaN(p)||isNaN(A)||isNaN(q)||isNaN(K)||!Yi(ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Se=4/3*(Math.SQRT2-1)*q,Oe=4/3*(Math.SQRT2-1)*K;return Ll(p+q,A),Ys(p+q,A-Oe,p+Se,A-K,p,A-K),Ys(p-Se,A-K,p-q,A-Oe,p-q,A),Ys(p-q,A+Oe,p-Se,A+K,p,A+K),Ys(p+Se,A+K,p+q,A+Oe,p+q,A),kl(ae),this},g.__private__.circle=g.circle=function(p,A,q,K){if(isNaN(p)||isNaN(A)||isNaN(q)||!Yi(K))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(p,A,q,q,K)},g.setFont=function(p,A,q){return q&&(A=me(A,q)),st=Hh(p,A,{disableWarning:!1}),this};var xg=g.__private__.getFont=g.getFont=function(){return _t[Hh.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var p,A,q={};for(p in Nt)if(Nt.hasOwnProperty(p))for(A in q[p]=[],Nt[p])Nt[p].hasOwnProperty(A)&&q[p].push(A);return q},g.addFont=function(p,A,q,K,ae){var Se=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Se.indexOf(arguments[3])!==-1?ae=arguments[3]:arguments[3]&&Se.indexOf(arguments[3])==-1&&(q=me(q,K)),ae=ae||"Identity-H",Tl.call(this,p,A,q,ae)};var zo,Rl=t.lineWidth||.200025,ec=g.__private__.getLineWidth=g.getLineWidth=function(){return Rl},Qh=g.__private__.setLineWidth=g.setLineWidth=function(p){return Rl=p,x(te(O(p))+" w"),this};g.__private__.setLineDash=rt.API.setLineDash=rt.API.setLineDashPattern=function(p,A){if(p=p||[],A=A||0,isNaN(A)||!Array.isArray(p))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return p=p.map(function(q){return te(O(q))}).join(" "),A=te(O(A)),x("["+p+"] "+A+" d"),this};var Xh=g.__private__.getLineHeight=g.getLineHeight=function(){return fe*zo};g.__private__.getLineHeight=g.getLineHeight=function(){return fe*zo};var Jh=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(p){return typeof(p=p||1.15)=="number"&&(zo=p),this},Zh=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return zo};Jh(t.lineHeight);var As=g.__private__.getHorizontalCoordinate=function(p){return O(p)},Qs=g.__private__.getVerticalCoordinate=function(p){return j===k.ADVANCED?p:ft[U].mediaBox.topRightY-ft[U].mediaBox.bottomLeftY-O(p)},kg=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(p){return te(As(p))},Xs=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(p){return te(Qs(p))},_i=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return mi(_i)},g.__private__.setStrokeColor=g.setDrawColor=function(p,A,q,K){return _i=yi({ch1:p,ch2:A,ch3:q,ch4:K,pdfColorType:"draw",precision:2}),x(_i),this};var Pl=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return mi(Pl)},g.__private__.setFillColor=g.setFillColor=function(p,A,q,K){return Pl=yi({ch1:p,ch2:A,ch3:q,ch4:K,pdfColorType:"fill",precision:2}),x(Pl),this};var Ho=t.textColor||"0 g",Lg=g.__private__.getTextColor=g.getTextColor=function(){return mi(Ho)};g.__private__.setTextColor=g.setTextColor=function(p,A,q,K){return Ho=yi({ch1:p,ch2:A,ch3:q,ch4:K,pdfColorType:"text",precision:3}),this};var tc=t.charSpace,Rg=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(tc||0)};g.__private__.setCharSpace=g.setCharSpace=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return tc=p,this};var Ol=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(p){var A=g.CapJoinStyles[p];if(A===void 0)throw new Error("Line cap style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ol=A,x(A+" J"),this};var Dl=0;g.__private__.setLineJoin=g.setLineJoin=function(p){var A=g.CapJoinStyles[p];if(A===void 0)throw new Error("Line join style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dl=A,x(A+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(p){if(p=p||0,isNaN(p))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return x(te(O(p))+" M"),this},g.GState=ep,g.setGState=function(p){(p=typeof p=="string"?un[di[p]]:ef(null,p)).equals(_s)||(x("/"+p.id+" gs"),_s=p)};var ef=function(p,A){if(!p||!di[p]){var q=!1;for(var K in un)if(un.hasOwnProperty(K)&&un[K].equals(A)){q=!0;break}if(q)A=un[K];else{var ae="GS"+(Object.keys(un).length+1).toString(10);un[ae]=A,A.id=ae}return p&&(di[p]=A.id),Bt.publish("addGState",A),A}};g.addGState=function(p,A){return ef(p,A),this},g.saveGraphicsState=function(){return x("q"),Ur.push({key:st,size:fe,color:Ho}),this},g.restoreGraphicsState=function(){x("Q");var p=Ur.pop();return st=p.key,fe=p.size,Ho=p.color,_s=null,this},g.setCurrentTransformationMatrix=function(p){return x(p.toString()+" cm"),this},g.comment=function(p){return x("#"+p),this};var nc=function(p,A){var q=p||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return q},set:function(Se){isNaN(Se)||(q=parseFloat(Se))}});var K=A||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return K},set:function(Se){isNaN(Se)||(K=parseFloat(Se))}});var ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ae},set:function(Se){ae=Se.toString()}}),this},Ml=function(p,A,q,K){nc.call(this,p,A),this.type="rect";var ae=q||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ae},set:function(Oe){isNaN(Oe)||(ae=parseFloat(Oe))}});var Se=K||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Se},set:function(Oe){isNaN(Oe)||(Se=parseFloat(Oe))}}),this},Fl=function(){this.page=hn,this.currentPage=U,this.pages=Ee.slice(0),this.pagesContext=ft.slice(0),this.x=Ln,this.y=St,this.matrix=Tr,this.width=Wo(U),this.height=Js(U),this.outputDestination=B,this.id="",this.objectNumber=-1};Fl.prototype.restore=function(){hn=this.page,U=this.currentPage,ft=this.pagesContext,Ee=this.pages,Ln=this.x,St=this.y,Tr=this.matrix,Bl(U,this.width),jl(U,this.height),B=this.outputDestination};var tf=function(p,A,q,K,ae){Hi.push(new Fl),hn=U=0,Ee=[],Ln=p,St=A,Tr=ae,Cl([q,K])},Pg=function(p){if(zi[p])Hi.pop().restore();else{var A=new Fl,q="Xo"+(Object.keys(Yn).length+1).toString(10);A.id=q,zi[p]=q,Yn[q]=A,Bt.publish("addFormObject",A),Hi.pop().restore()}};for(var rc in g.beginFormObject=function(p,A,q,K,ae){return tf(p,A,q,K,ae),this},g.endFormObject=function(p){return Pg(p),this},g.doFormObject=function(p,A){var q=Yn[zi[p]];return x("q"),x(A.toString()+" cm"),x("/"+q.id+" Do"),x("Q"),this},g.getFormObject=function(p){var A=Yn[zi[p]];return{x:A.x,y:A.y,width:A.width,height:A.height,matrix:A.matrix}},g.save=function(p,A){return p=p||"generated.pdf",(A=A||{}).returnPromise=A.returnPromise||!1,A.returnPromise===!1?(ta(Xa(bs()),p),typeof ta.unload=="function"&&ot.setTimeout&&setTimeout(ta.unload,911),this):new Promise(function(q,K){try{var ae=ta(Xa(bs()),p);typeof ta.unload=="function"&&ot.setTimeout&&setTimeout(ta.unload,911),q(ae)}catch(Se){K(Se.message)}})},rt.API)rt.API.hasOwnProperty(rc)&&(rc==="events"&&rt.API.events.length?function(p,A){var q,K,ae;for(ae=A.length-1;ae!==-1;ae--)q=A[ae][0],K=A[ae][1],p.subscribe.apply(p,[q].concat(typeof K=="function"?[K]:K))}(Bt,rt.API.events):g[rc]=rt.API[rc]);var Wo=g.getPageWidth=function(p){return(ft[p=p||U].mediaBox.topRightX-ft[p].mediaBox.bottomLeftX)/Be},Bl=g.setPageWidth=function(p,A){ft[p].mediaBox.topRightX=A*Be+ft[p].mediaBox.bottomLeftX},Js=g.getPageHeight=function(p){return(ft[p=p||U].mediaBox.topRightY-ft[p].mediaBox.bottomLeftY)/Be},jl=g.setPageHeight=function(p,A){ft[p].mediaBox.topRightY=A*Be+ft[p].mediaBox.bottomLeftY};return g.internal={pdfEscape:xr,getStyle:Kh,getFont:xg,getFontSize:Ae,getCharSpace:Rg,getTextColor:Lg,getLineHeight:Xh,getLineHeightFactor:Zh,getLineWidth:ec,write:Ie,getHorizontalCoordinate:As,getVerticalCoordinate:Qs,getCoordinateString:kg,getVerticalCoordinateString:Xs,collections:{},newObject:Rn,newAdditionalObject:$a,newObjectDeferred:An,newObjectDeferredBegin:qr,getFilters:Gi,putStream:ei,events:Bt,scaleFactor:Be,pageSize:{getWidth:function(){return Wo(U)},setWidth:function(p){Bl(U,p)},getHeight:function(){return Js(U)},setHeight:function(p){jl(U,p)}},encryptionOptions:f,encryption:tr,getEncryptor:Sg,output:Ja,getNumberOfPages:vg,pages:Ee,out:x,f2:pe,f3:D,getPageInfo:Gh,getPageInfoByObjId:ut,getCurrentPageInfo:Eg,getPDFVersion:_,Point:nc,Rectangle:Ml,Matrix:nt,hasHotfix:Wh},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Wo(U)},set:function(p){Bl(U,p)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Js(U)},set:function(p){jl(U,p)},enumerable:!0,configurable:!0}),mg.call(g,ie),st="F1",$h(i,n),Bt.publish("initialized"),g}Ic.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ic.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ic.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Ic.prototype.processOwnerPassword=function(t,e){return v0(y0(e).substr(0,5),t)},Ic.prototype.encryptor=function(t,e){var n=y0(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return v0(n,r)}},ep.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Ht(t)!==Ht(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},rt.API={events:[]},rt.version="2.5.1";var pn=rt.API,Cy=1,Va=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},dt=function(t){return t.toFixed(2)},go=function(t){return t.toFixed(5)};pn.__acroform__={};var jr=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},nw=function(t){return t*Cy},Zi=function(t){var e=new kI,n=Ge.internal.getHeight(t)||0,r=Ge.internal.getWidth(t)||0;return e.BBox=[0,0,Number(dt(r)),Number(dt(n))],e},Vj=pn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},$j=pn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},zj=pn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},vn=pn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return zj(t,e-1)},_n=pn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Vj(t,e-1)},wn=pn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return $j(t,e-1)},Hj=pn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(s+a)||0,c.upperRight_X=n(i+o)||0,c.upperRight_Y=r(s)||0,[Number(dt(c.lowerLeft_X)),Number(dt(c.lowerLeft_Y)),Number(dt(c.upperRight_X)),Number(dt(c.upperRight_Y))]},Wj=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=_0(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+dt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Zi(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},_0=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(D){return D.split(`
`)}):i.map(function(D){return[D]});var s=n,o=Ge.internal.getHeight(t)||0;o=o<0?-o:o;var a=Ge.internal.getWidth(t)||0;a=a<0?-a:a;var c=function(D,O,G){if(D+1<i.length){var H=O+" "+i[D+1][0];return zf(H,t,G).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,f,d=zf("3",t,s).height,y=t.multiline?o-s:(o-d)/2,g=y+=2,w=0,_=0,T=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+zf(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var S="",k=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var Y=!1;if(i[j].length!==1&&T!==i[j].length-1){if((d+2)*(k+2)+2>o)continue e;S+=i[j][T],Y=!0,_=j,j--}else{S=(S+=i[j][T]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var oe=parseInt(j),me=c(oe,S,s),te=j>=i.length-1;if(me&&!te){S+=" ",T=0;continue}if(me||te){if(te)_=oe;else if(t.multiline&&(d+2)*(k+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(k+2)+2>o)continue e;_=oe}}for(var F="",ge=w;ge<=_;ge++){var pe=i[ge];if(t.multiline){if(ge===_){F+=pe[T]+" ",T=(T+1)%pe.length;continue}if(ge===w){F+=pe[pe.length-1]+" ";continue}}F+=pe[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,f=zf(F,t,s).width,t.textAlign){case"right":u=a-f-2;break;case"center":u=(a-f)/2;break;case"left":default:u=2}e+=dt(u)+" "+dt(g)+` Td
`,e+="("+Va(F)+`) Tj
`,e+=-dt(u)+` 0 Td
`,g=-(s+2),f=0,w=Y?_:_+1,k++,S=""}break}return r.text=e,r.fontSize=s,r},zf=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Gj={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Kj=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Yj=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Ht(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},Qj=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Vi.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Gj)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Cy=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new LI,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&Kj(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],c=[],u=a.Rect;if(a.Rect&&(a.Rect=Hj(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ge.createDefaultAppearanceStream(a),Ht(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(c=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var f=Wj(a);c.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(a.appearanceStreamContent){var d="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var g=a.appearanceStreamContent[y];if(d+="/"+y+" ",d+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var w=g[o];typeof w=="function"&&(w=w.call(i,a)),d+="/"+o+" "+w+" ",i.internal.acroformPlugin.xForms.indexOf(w)>=0||i.internal.acroformPlugin.xForms.push(w)}}else typeof(w=g)=="function"&&(w=w.call(i,a)),d+="/"+o+" "+w,i.internal.acroformPlugin.xForms.indexOf(w)>=0||i.internal.acroformPlugin.xForms.push(w);d+=">>"}c.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:a.objId}),i.internal.out("endobj")}s&&Yj(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},xI=pn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Ht(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Va(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Um=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Va(r(t))+")"},ss=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ss.prototype.toString=function(){return this.objId+" 0 R"},ss.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ss.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:xI(i,this.objId,this.scope)}):i instanceof ss?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var kI=function(){ss.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};jr(kI,ss);var LI=function(){ss.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Va(n(t))+")"}},set:function(n){t=n}})};jr(LI,ss);var Vi=function t(){ss.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');e=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(e,3))},set:function(S){Boolean(S)===!0?this.F=_n(e,3):this.F=wn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');n=S}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(S){r=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(S){r[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(S){r[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(S){r[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(S){r[3]=S}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof tp)return;s="FieldObject"+t.FieldNum++}var S=function(k){return k};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+Va(S(s))+")"},set:function(S){s=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(S){s=S}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(S){a=S}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(S){c=S}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Cy:u},set:function(S){u=S}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(S){f=S}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof tp||this instanceof wa))return Um(d,this.objId,this.scope)},set:function(S){S=S.toString(),d=S}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Wn?y:Um(y,this.objId,this.scope)},set:function(S){S=S.toString(),y=this instanceof Wn?S:S.substr(0,1)==="("?vc(S.substr(1,S.length-2)):vc(S)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wn?vc(y.substr(1,y.length-1)):y},set:function(S){S=S.toString(),y=this instanceof Wn?"/"+S:S}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Wn?g:Um(g,this.objId,this.scope)},set:function(S){S=S.toString(),g=this instanceof Wn?S:S.substr(0,1)==="("?vc(S.substr(1,S.length-2)):vc(S)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wn?vc(g.substr(1,g.length-1)):g},set:function(S){S=S.toString(),g=this instanceof Wn?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(S){S=Boolean(S),_=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(S){w=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,1))},set:function(S){Boolean(S)===!0?this.Ff=_n(this.Ff,1):this.Ff=wn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,2))},set:function(S){Boolean(S)===!0?this.Ff=_n(this.Ff,2):this.Ff=wn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,3))},set:function(S){Boolean(S)===!0?this.Ff=_n(this.Ff,3):this.Ff=wn(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');T=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(T){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};jr(Vi,ss);var Vc=function(){Vi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return xI(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var c,u=[];c=o.exec(s);)u.push(c[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,18))},set:function(n){Boolean(n)===!0?this.Ff=_n(this.Ff,18):this.Ff=wn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,19))},set:function(n){this.combo===!0&&(Boolean(n)===!0?this.Ff=_n(this.Ff,19):this.Ff=wn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,20))},set:function(n){Boolean(n)===!0?(this.Ff=_n(this.Ff,20),e.sort()):this.Ff=wn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,22))},set:function(n){Boolean(n)===!0?this.Ff=_n(this.Ff,22):this.Ff=wn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,23))},set:function(n){Boolean(n)===!0?this.Ff=_n(this.Ff,23):this.Ff=wn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,27))},set:function(n){Boolean(n)===!0?this.Ff=_n(this.Ff,27):this.Ff=wn(this.Ff,27)}}),this.hasAppearanceStream=!1};jr(Vc,Vi);var $c=function(){Vc.call(this),this.fontName="helvetica",this.combo=!1};jr($c,Vc);var zc=function(){$c.call(this),this.combo=!0};jr(zc,$c);var hd=function(){zc.call(this),this.edit=!0};jr(hd,zc);var Wn=function(){Vi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,15))},set:function(n){Boolean(n)===!0?this.Ff=_n(this.Ff,15):this.Ff=wn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,16))},set:function(n){Boolean(n)===!0?this.Ff=_n(this.Ff,16):this.Ff=wn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,17))},set:function(n){Boolean(n)===!0?this.Ff=_n(this.Ff,17):this.Ff=wn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,26))},set:function(n){Boolean(n)===!0?this.Ff=_n(this.Ff,26):this.Ff=wn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Va(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ht(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};jr(Wn,Vi);var fd=function(){Wn.call(this),this.pushButton=!0};jr(fd,Wn);var Hc=function(){Wn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};jr(Hc,Wn);var tp=function(){var t,e;Vi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Va(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ht(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ge.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};jr(tp,Vi),Hc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Hc.prototype.createOption=function(t){var e=new tp;return e.Parent=this,e.optionName=t,this.Kids.push(e),Xj.call(this.scope,e),e};var dd=function(){Wn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ge.CheckBox.createAppearanceStream()};jr(dd,Wn);var wa=function(){Vi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=_n(this.Ff,13):this.Ff=wn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=_n(this.Ff,21):this.Ff=wn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=_n(this.Ff,23):this.Ff=wn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=_n(this.Ff,24):this.Ff=wn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=_n(this.Ff,25):this.Ff=wn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=_n(this.Ff,26):this.Ff=wn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};jr(wa,Vi);var pd=function(){wa.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(vn(this.Ff,14))},set:function(t){Boolean(t)===!0?this.Ff=_n(this.Ff,14):this.Ff=wn(this.Ff,14)}}),this.password=!0};jr(pd,wa);var Ge={CheckBox:{createAppearanceStream:function(){return{N:{On:Ge.CheckBox.YesNormal},D:{On:Ge.CheckBox.YesPushDown,Off:Ge.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Zi(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=_0(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+dt(Ge.internal.getWidth(t))+" "+dt(Ge.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+dt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Zi(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Ge.internal.getHeight(t),o=Ge.internal.getWidth(t),a=_0(t,t.caption);return i.push("1 g"),i.push("0 0 "+dt(o)+" "+dt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+dt(o-1)+" "+dt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+dt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Zi(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+dt(Ge.internal.getWidth(t))+" "+dt(Ge.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Ge.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Ge.RadioButton.Circle.YesNormal,e.D[t]=Ge.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Zi(t);e.scope=t.scope;var n=[],r=Ge.internal.getWidth(t)<=Ge.internal.getHeight(t)?Ge.internal.getWidth(t)/4:Ge.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Ge.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+go(Ge.internal.getWidth(t)/2)+" "+go(Ge.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Zi(t);e.scope=t.scope;var n=[],r=Ge.internal.getWidth(t)<=Ge.internal.getHeight(t)?Ge.internal.getWidth(t)/4:Ge.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ge.internal.Bezier_C).toFixed(5)),o=Number((r*Ge.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+go(Ge.internal.getWidth(t)/2)+" "+go(Ge.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+go(Ge.internal.getWidth(t)/2)+" "+go(Ge.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Zi(t);e.scope=t.scope;var n=[],r=Ge.internal.getWidth(t)<=Ge.internal.getHeight(t)?Ge.internal.getWidth(t)/4:Ge.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ge.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+go(Ge.internal.getWidth(t)/2)+" "+go(Ge.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Ge.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Ge.RadioButton.Cross.YesNormal,e.D[t]=Ge.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Zi(t);e.scope=t.scope;var n=[],r=Ge.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+dt(Ge.internal.getWidth(t)-2)+" "+dt(Ge.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(dt(r.x1.x)+" "+dt(r.x1.y)+" m"),n.push(dt(r.x2.x)+" "+dt(r.x2.y)+" l"),n.push(dt(r.x4.x)+" "+dt(r.x4.y)+" m"),n.push(dt(r.x3.x)+" "+dt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Zi(t);e.scope=t.scope;var n=Ge.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+dt(Ge.internal.getWidth(t))+" "+dt(Ge.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+dt(Ge.internal.getWidth(t)-2)+" "+dt(Ge.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(dt(n.x1.x)+" "+dt(n.x1.y)+" m"),r.push(dt(n.x2.x)+" "+dt(n.x2.y)+" l"),r.push(dt(n.x4.x)+" "+dt(n.x4.y)+" m"),r.push(dt(n.x3.x)+" "+dt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Zi(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+dt(Ge.internal.getWidth(t))+" "+dt(Ge.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Ge.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Ge.internal.getWidth(t),n=Ge.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Ge.internal.getWidth=function(t){var e=0;return Ht(t)==="object"&&(e=nw(t.Rect[2])),e},Ge.internal.getHeight=function(t){var e=0;return Ht(t)==="object"&&(e=nw(t.Rect[3])),e};var Xj=pn.addField=function(t){if(Qj(this,t),!(t instanceof Vi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};pn.AcroFormChoiceField=Vc,pn.AcroFormListBox=$c,pn.AcroFormComboBox=zc,pn.AcroFormEditBox=hd,pn.AcroFormButton=Wn,pn.AcroFormPushButton=fd,pn.AcroFormRadioButton=Hc,pn.AcroFormCheckBox=dd,pn.AcroFormTextField=wa,pn.AcroFormPasswordField=pd,pn.AcroFormAppearance=Ge,pn.AcroForm={ChoiceField:Vc,ListBox:$c,ComboBox:zc,EditBox:hd,Button:Wn,PushButton:fd,RadioButton:Hc,CheckBox:dd,TextField:wa,PasswordField:pd,Appearance:Ge},rt.AcroForm={ChoiceField:Vc,ListBox:$c,ComboBox:zc,EditBox:hd,Button:Wn,PushButton:fd,RadioButton:Hc,CheckBox:dd,TextField:wa,PasswordField:pd,Appearance:Ge};rt.AcroForm;function RI(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(D,O){var G,H,ye,le,de,ne=e;if((O=O||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(me(D))for(de in n)for(ye=n[de],G=0;G<ye.length;G+=1){for(le=!0,H=0;H<ye[G].length;H+=1)if(ye[G][H]!==void 0&&ye[G][H]!==D[H]){le=!1;break}if(le===!0){ne=de;break}}else for(de in n)for(ye=n[de],G=0;G<ye.length;G+=1){for(le=!0,H=0;H<ye[G].length;H+=1)if(ye[G][H]!==void 0&&ye[G][H]!==D.charCodeAt(H)){le=!1;break}if(le===!0){ne=de;break}}return ne===e&&O!==e&&(ne=O),ne},i=function D(O){for(var G=this.internal.write,H=this.internal.putStream,ye=(0,this.internal.getFilters)();ye.indexOf("FlateEncode")!==-1;)ye.splice(ye.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:O.width}),le.push({key:"Height",value:O.height}),O.colorSpace===T.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===T.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var de="",ne=0,_e=O.transparency.length;ne<_e;ne++)de+=O.transparency[ne]+" "+O.transparency[ne]+" ";le.push({key:"Mask",value:"["+de+"]"})}O.sMask!==void 0&&le.push({key:"SMask",value:O.objectId+1+" 0 R"});var we=O.filter!==void 0?["/"+O.filter]:void 0;if(H({data:O.data,additionalKeyValues:le,alreadyAppliedFilters:we,objectId:O.objectId}),G("endobj"),"sMask"in O&&O.sMask!==void 0){var Fe="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,E={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:Fe,data:O.sMask};"filter"in O&&(E.filter=O.filter),D.call(this,E)}if(O.colorSpace===T.INDEXED){var U=this.internal.newObject();H({data:F(new Uint8Array(O.palette)),objectId:U}),G("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var O in D)i.call(this,D[O])},o=function(){var D,O=this.internal.collections.addImage_images,G=this.internal.write;for(var H in O)G("/I"+(D=O[H]).index,D.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var D=this.internal.collections.addImage_images;return a.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(D){return typeof t["process"+D.toUpperCase()]=="function"},d=function(D){return Ht(D)==="object"&&D.nodeType===1},y=function(D,O){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var G=""+D.getAttribute("src");if(G.indexOf("data:image/")===0)return Ru(unescape(G).split("base64,").pop());var H=t.loadFile(G,!0);if(H!==void 0)return H}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var ye;switch(O){case"PNG":ye="image/png";break;case"WEBP":ye="image/webp";break;case"JPEG":case"JPG":default:ye="image/jpeg"}return Ru(D.toDataURL(ye,1).split("base64,").pop())}},g=function(D){var O=this.internal.collections.addImage_images;if(O){for(var G in O)if(D===O[G].alias)return O[G]}},w=function(D,O,G){return D||O||(D=-96,O=-96),D<0&&(D=-1*G.width*72/D/this.internal.scaleFactor),O<0&&(O=-1*G.height*72/O/this.internal.scaleFactor),D===0&&(D=O*G.width/G.height),O===0&&(O=D*G.height/G.width),[D,O]},_=function(D,O,G,H,ye,le){var de=w.call(this,G,H,ye),ne=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,we=c.call(this);if(G=de[0],H=de[1],we[ye.index]=ye,le){le*=Math.PI/180;var Fe=Math.cos(le),E=Math.sin(le),U=function(P){return P.toFixed(4)},V=[U(Fe),U(E),U(-1*E),U(Fe),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,ne(D),_e(O+H),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([ne(G),"0","0",ne(H),"0","0","cm"].join(" "))):this.internal.write([ne(G),"0","0",ne(H),ne(D),_e(O+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ye.index+" Do"),this.internal.write("Q")},T=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(D){var O,G,H=0;if(typeof D=="string")for(G=D.length,O=0;O<G;O++)H=(H<<5)-H+D.charCodeAt(O),H|=0;else if(me(D))for(G=D.byteLength/2,O=0;O<G;O++)H=(H<<5)-H+D[O],H|=0;return H},j=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var O=!0;return D.length===0&&(O=!1),D.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(O=!1),O},Y=t.__addimage__.extractImageFromDataUrl=function(D){var O=(D=D||"").split("base64,"),G=null;if(O.length===2){var H=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(O[0]);Array.isArray(H)&&(G={mimeType:H[1],charset:H[2],data:O[1]})}return G},oe=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(D){return oe()&&D instanceof ArrayBuffer};var me=t.__addimage__.isArrayBufferView=function(D){return oe()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},te=t.__addimage__.binaryStringToUint8Array=function(D){for(var O=D.length,G=new Uint8Array(O),H=0;H<O;H++)G[H]=D.charCodeAt(H);return G},F=t.__addimage__.arrayBufferToBinaryString=function(D){for(var O="",G=me(D)?D:new Uint8Array(D),H=0;H<G.length;H+=8192)O+=String.fromCharCode.apply(null,G.subarray(H,H+8192));return O};t.addImage=function(){var D,O,G,H,ye,le,de,ne,_e;if(typeof arguments[1]=="number"?(O=e,G=arguments[1],H=arguments[2],ye=arguments[3],le=arguments[4],de=arguments[5],ne=arguments[6],_e=arguments[7]):(O=arguments[1],G=arguments[2],H=arguments[3],ye=arguments[4],le=arguments[5],de=arguments[6],ne=arguments[7],_e=arguments[8]),Ht(D=arguments[0])==="object"&&!d(D)&&"imageData"in D){var we=D;D=we.imageData,O=we.format||O||e,G=we.x||G||0,H=we.y||H||0,ye=we.w||we.width||ye,le=we.h||we.height||le,de=we.alias||de,ne=we.compression||ne,_e=we.rotation||we.angle||_e}var Fe=this.internal.getFilters();if(ne===void 0&&Fe.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(G)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var E=ge.call(this,D,O,de,ne);return _.call(this,G,H,ye,le,E,_e),this};var ge=function(D,O,G,H){var ye,le,de;if(typeof D=="string"&&r(D)===e){D=unescape(D);var ne=pe(D,!1);(ne!==""||(ne=t.loadFile(D,!0))!==void 0)&&(D=ne)}if(d(D)&&(D=y(D,O)),O=r(D,O),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((de=G)==null||de.length===0)&&(G=function(_e){return typeof _e=="string"||me(_e)?k(_e):me(_e.data)?k(_e.data):null}(D)),(ye=g.call(this,G))||(oe()&&(D instanceof Uint8Array||O==="RGBA"||(le=D,D=te(D))),ye=this["process"+O.toUpperCase()](D,u.call(this),G,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in t.image_compression?_e:S.NONE}(H),le)),!ye)throw new Error("An unknown error occurred whilst processing the image.");return ye},pe=t.__addimage__.convertBase64ToBinaryString=function(D,O){var G;O=typeof O!="boolean"||O;var H,ye="";if(typeof D=="string"){H=(G=Y(D))!==null?G.data:D;try{ye=Ru(H)}catch(le){if(O)throw j(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ye};t.getImageProperties=function(D){var O,G,H="";if(d(D)&&(D=y(D)),typeof D=="string"&&r(D)===e&&((H=pe(D,!1))===""&&(H=t.loadFile(D)||""),D=H),G=r(D),!f(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(!oe()||D instanceof Uint8Array||(D=te(D)),!(O=this["process"+G.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=G,O}})(rt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};rt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,f=!1,d=0;d<u.length&&!f;d++)switch((r=u[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<u.length;y++){r=u[y];var g=this.internal.pdfEscape,w=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(_.objId),k=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(S(r.contents))+")",s+=" /Popup "+T.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(S(k))+") >>",_.content=s;var j=_.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(s+=" /Open true"),s+=" >>",T.content=s,this.internal.write(_.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var Y=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(w(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Y+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var oe=this.annotations._nameMap[r.options.name];r.options.pageNumber=oe.page,r.options.top=oe.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(w(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var me=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+me+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:c(n),y:u(r),w:c(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,c=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var f=this.splitTextToSize(n,a).length;o=Math.ceil(u*f)}else a=c,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-u,a,o,s),c},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(rt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},a=t.__arabicParser__.isArabicEndLetter=function(_){return o(_)&&s(_)&&e[_.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(_){return o(_)&&i.indexOf(_.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return o(_)&&s(_)&&e[_.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(_){return o(_)&&s(_)&&e[_.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(_){return o(_)&&s(_)&&e[_.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(_){return o(_)&&s(_)&&e[_.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(_){var T=0,S=n,k="",j=0;for(T=0;T<_.length;T+=1)S[_.charCodeAt(T)]!==void 0?(j++,typeof(S=S[_.charCodeAt(T)])=="number"&&(k+=String.fromCharCode(S),S=n,j=0),T===_.length-1&&(S=n,k+=_.charAt(T-(j-1)),T-=j-1,j=0)):(S=n,k+=_.charAt(T-j),T-=j,j=0);return k};t.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(_,T,S){return o(_)?s(_)===!1?-1:!u(_)||!o(T)&&!o(S)||!o(S)&&a(T)||a(_)&&!o(T)||a(_)&&c(T)||a(_)&&a(T)?0:f(_)&&o(T)&&!a(T)&&o(S)&&u(S)?3:a(_)||!o(S)?1:2:-1},g=function(_){var T=0,S=0,k=0,j="",Y="",oe="",me=(_=_||"").split("\\s+"),te=[];for(T=0;T<me.length;T+=1){for(te.push(""),S=0;S<me[T].length;S+=1)j=me[T][S],Y=me[T][S-1],oe=me[T][S+1],o(j)?(k=y(j,Y,oe),te[T]+=k!==-1?String.fromCharCode(e[j.charCodeAt(0)][k]):j):te[T]+=j;te[T]=d(te[T])}return te.join(" ")},w=t.__arabicParser__.processArabic=t.processArabic=function(){var _,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(T)){var k=0;for(S=[],k=0;k<T.length;k+=1)Array.isArray(T[k])?S.push([g(T[k][0]),T[k][1],T[k][2]]):S.push([g(T[k])]);_=S}else _=g(T);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};t.events.push(["preProcessText",w])}(rt.API),rt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(rt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(_){u=_}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(_){y=_}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(_){w=_}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){r.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),y=u.scaleFactor||this.internal.scaleFactor,g=0,w=0,_=0,T=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var S=u.maxWidth;S>0?typeof c=="string"?c=this.splitTextToSize(c,S):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,Y){return j.concat(T.splitTextToSize(Y,S))},[])):c=Array.isArray(c)?c:[c];for(var k=0;k<c.length;k++)g<(_=this.getStringUnitWidth(c[k],{font:d})*f)&&(g=_);return g!==0&&(w=c.length),{w:g/=y,h:Math.max((w*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=d.top,g&&y&&(this.printHeaderRow(c.lineNumber,!0),c.y+=y[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,f,d,y){if(r.call(this),!f)throw new Error("No data for PDF table.");var g,w,_,T,S=[],k=[],j=[],Y={},oe={},me=[],te=[],F=(y=y||{}).autoSize||!1,ge=y.printHeaders!==!1,pe=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,D=y.margins||Object.assign({width:this.getPageWidth()},e),O=typeof y.padding=="number"?y.padding:3,G=y.headerBackgroundColor||"#c8c8c8",H=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=ge,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=pe,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=H,this.setFontSize(pe),d==null)k=S=Object.keys(f[0]),j=S.map(function(){return"left"});else if(Array.isArray(d)&&Ht(d[0])==="object")for(S=d.map(function(we){return we.name}),k=d.map(function(we){return we.prompt||we.name||""}),j=d.map(function(we){return we.align||"left"}),g=0;g<d.length;g+=1)oe[d[g].name]=d[g].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(k=S=d,j=S.map(function(){return"left"}));if(F||Array.isArray(d)&&typeof d[0]=="string")for(g=0;g<S.length;g+=1){for(Y[T=S[g]]=f.map(function(we){return we[T]}),this.setFont(void 0,"bold"),me.push(this.getTextDimensions(k[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=Y[T],this.setFont(void 0,"normal"),_=0;_<w.length;_+=1)me.push(this.getTextDimensions(w[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);oe[T]=Math.max.apply(null,me)+O+O,me=[]}if(ge){var ye={};for(g=0;g<S.length;g+=1)ye[S[g]]={},ye[S[g]].text=k[g],ye[S[g]].align=j[g];var le=a.call(this,ye,oe);te=S.map(function(we){return new s(c,u,oe[we],le,ye[we].text,void 0,ye[we].align)}),this.setTableHeaderRow(te),this.printHeaderRow(1,!1)}var de=d.reduce(function(we,Fe){return we[Fe.name]=Fe.align,we},{});for(g=0;g<f.length;g+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:g,data:f[g]},this);var ne=a.call(this,f[g],oe);for(_=0;_<S.length;_+=1){var _e=f[g][S[_]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:g,col:_,data:_e},this),o.call(this,new s(c,u,oe[S[_]],ne,_e,g+2,de[S[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var a=function(c,u){var f=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(c).map(function(g){var w=c[g];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,u[g]-f-f)},this).map(function(g){return this.getLineHeightFactor()*g.length*d/y+f+f},this).reduce(function(g,w){return Math.max(g,w)},0)};t.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){f=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=c;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(w)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}}(rt.API);var PI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},OI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],w0=RI(OI),DI=[100,200,300,400,500,600,700,800,900],Jj=RI(DI);function b0(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return PI[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof w0[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function rw(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Zj={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},iw={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function sw(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function eU(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},Zj,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=b0(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+sw(s)+"' and default family '"+r+"'.");if(o=function(c,u){if(u[c])return u[c];var f=w0[c],d=f<=w0.normal?-1:1,y=rw(u,OI,f,d);if(!y)throw new Error("Could not find a matching font-stretch value for "+c);return y}(s.stretch,o),o=function(c,u){if(u[c])return u[c];for(var f=PI[c],d=0;d<f.length;++d)if(u[f[d]])return u[f[d]];throw new Error("Could not find a matching font-style for "+c)}(s.style,o),!(o=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var f=Jj[c],d=rw(u,DI,f,c<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+c);return d}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+sw(s)+"'.");return o}function ow(t){return t.trimLeft()}function tU(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function nU(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Hf,aw,cw,qm=["times"];(function(t){var e,n,r,i,s,o,a,c,u,f=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new c,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new o,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new o,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,c=this.internal.Matrix,u=new f}]);var d=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=E;Object.defineProperty(this,"pdf",{get:function(){return U}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(z){V=Boolean(z)}});var P=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return P},set:function(z){P=Boolean(z)}});var $=0;Object.defineProperty(this,"posX",{get:function(){return $},set:function(z){isNaN(z)||($=z)}});var W=0;Object.defineProperty(this,"posY",{get:function(){return W},set:function(z){isNaN(z)||(W=z)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(z){var x;typeof z=="number"?x=[z,z,z,z]:((x=new Array(4))[0]=z[0],x[1]=z.length>=2?z[1]:x[0],x[2]=z.length>=3?z[2]:x[0],x[3]=z.length>=4?z[3]:x[1]),u.margin=x}});var J=!1;Object.defineProperty(this,"autoPaging",{get:function(){return J},set:function(z){J=z}});var se=0;Object.defineProperty(this,"lastBreak",{get:function(){return se},set:function(z){se=z}});var Le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Le},set:function(z){Le=z}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(z){z instanceof f&&(u=z)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(z){u.path=z}});var Ee=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ee},set:function(z){Ee=z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(z){var x;x=y(z),this.ctx.fillStyle=x.style,this.ctx.isFillTransparent=x.a===0,this.ctx.fillOpacity=x.a,this.pdf.setFillColor(x.r,x.g,x.b,{a:x.a}),this.pdf.setTextColor(x.r,x.g,x.b,{a:x.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(z){var x=y(z);this.ctx.strokeStyle=x.style,this.ctx.isStrokeTransparent=x.a===0,this.ctx.strokeOpacity=x.a,x.a===0?this.pdf.setDrawColor(255,255,255):(x.a,this.pdf.setDrawColor(x.r,x.g,x.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(z){["butt","round","square"].indexOf(z)!==-1&&(this.ctx.lineCap=z,this.pdf.setLineCap(z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(z){isNaN(z)||(this.ctx.lineWidth=z,this.pdf.setLineWidth(z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(z){["bevel","round","miter"].indexOf(z)!==-1&&(this.ctx.lineJoin=z,this.pdf.setLineJoin(z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(z){isNaN(z)||(this.ctx.miterLimit=z,this.pdf.setMiterLimit(z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(z){this.ctx.textBaseline=z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(z){["right","end","center","left","start"].indexOf(z)!==-1&&(this.ctx.textAlign=z)}});var R=null;function B(z,x){if(R===null){var Ie=function(be){var ie=[];return Object.keys(be).forEach(function(fe){be[fe].forEach(function(ce){var Ae=null;switch(ce){case"bold":Ae={family:fe,weight:"bold"};break;case"italic":Ae={family:fe,style:"italic"};break;case"bolditalic":Ae={family:fe,weight:"bold",style:"italic"};break;case"":case"normal":Ae={family:fe}}Ae!==null&&(Ae.ref={name:fe,style:ce},ie.push(Ae))})}),ie}(z.getFontList());R=function(be){for(var ie={},fe=0;fe<be.length;++fe){var ce=b0(be[fe]),Ae=ce.family,Te=ce.stretch,Pe=ce.style,Me=ce.weight;ie[Ae]=ie[Ae]||{},ie[Ae][Te]=ie[Ae][Te]||{},ie[Ae][Te][Pe]=ie[Ae][Te][Pe]||{},ie[Ae][Te][Pe][Me]=ce}return ie}(Ie.concat(x))}return R}var re=null;Object.defineProperty(this,"fontFaces",{get:function(){return re},set:function(z){R=null,re=z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(z){var x;if(this.ctx.font=z,(x=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(z))!==null){var Ie=x[1],be=(x[2],x[3]),ie=x[4],fe=(x[5],x[6]),ce=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ie)[2];ie=Math.floor(ce==="px"?parseFloat(ie)*this.pdf.internal.scaleFactor:ce==="em"?parseFloat(ie)*this.pdf.getFontSize():parseFloat(ie)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ie);var Ae=function(We){var st,Be,Ln=[],St=We.trim();if(St==="")return qm;if(St in iw)return[iw[St]];for(;St!=="";){switch(Be=null,st=(St=ow(St)).charAt(0)){case'"':case"'":Be=tU(St.substring(1),st);break;default:Be=nU(St)}if(Be===null||(Ln.push(Be[0]),(St=ow(Be[1]))!==""&&St.charAt(0)!==","))return qm;St=St.replace(/^,/,"")}return Ln}(fe);if(this.fontFaces){var Te=eU(B(this.pdf,this.fontFaces),Ae.map(function(We){return{family:We,stretch:"normal",weight:be,style:Ie}}));this.pdf.setFont(Te.ref.name,Te.ref.style)}else{var Pe="";(be==="bold"||parseInt(be,10)>=700||Ie==="bold")&&(Pe="bold"),Ie==="italic"&&(Pe+="italic"),Pe.length===0&&(Pe="normal");for(var Me="",Ve={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ke=0;Ke<Ae.length;Ke++){if(this.pdf.internal.getFont(Ae[Ke],Pe,{noFallback:!0,disableWarning:!0})!==void 0){Me=Ae[Ke];break}if(Pe==="bolditalic"&&this.pdf.internal.getFont(Ae[Ke],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Me=Ae[Ke],Pe="bold";else if(this.pdf.internal.getFont(Ae[Ke],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Me=Ae[Ke],Pe="normal";break}}if(Me===""){for(var Qe=0;Qe<Ae.length;Qe++)if(Ve[Ae[Qe]]){Me=Ve[Ae[Qe]];break}}Me=Me===""?"Times":Me,this.pdf.setFont(Me,Pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(z){this.ctx.globalCompositeOperation=z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(z){this.ctx.globalAlpha=z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(z){this.ctx.lineDashOffset=z,Fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(z){this.ctx.lineDash=z,Fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(z){this.ctx.ignoreClearRect=Boolean(z)}})};d.prototype.setLineDash=function(E){this.lineDash=E},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){Y.call(this,"fill",!1)},d.prototype.stroke=function(){Y.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(E,U){if(isNaN(E)||isNaN(U))throw Yt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(E,U));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(E,U)},d.prototype.closePath=function(){var E=new o(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&Ht(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){E=new o(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(E.x,E.y)},d.prototype.lineTo=function(E,U){if(isNaN(E)||isNaN(U))throw Yt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(E,U));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Y.call(this,null,!0)},d.prototype.quadraticCurveTo=function(E,U,V,P){if(isNaN(V)||isNaN(P)||isNaN(E)||isNaN(U))throw Yt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var $=this.ctx.transform.applyToPoint(new o(V,P)),W=this.ctx.transform.applyToPoint(new o(E,U));this.path.push({type:"qct",x1:W.x,y1:W.y,x:$.x,y:$.y}),this.ctx.lastPoint=new o($.x,$.y)},d.prototype.bezierCurveTo=function(E,U,V,P,$,W){if(isNaN($)||isNaN(W)||isNaN(E)||isNaN(U)||isNaN(V)||isNaN(P))throw Yt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var J=this.ctx.transform.applyToPoint(new o($,W)),se=this.ctx.transform.applyToPoint(new o(E,U)),Le=this.ctx.transform.applyToPoint(new o(V,P));this.path.push({type:"bct",x1:se.x,y1:se.y,x2:Le.x,y2:Le.y,x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},d.prototype.arc=function(E,U,V,P,$,W){if(isNaN(E)||isNaN(U)||isNaN(V)||isNaN(P)||isNaN($))throw Yt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(W=Boolean(W),!this.ctx.transform.isIdentity){var J=this.ctx.transform.applyToPoint(new o(E,U));E=J.x,U=J.y;var se=this.ctx.transform.applyToPoint(new o(0,V)),Le=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(se.x-Le.x,2)+Math.pow(se.y-Le.y,2))}Math.abs($-P)>=2*Math.PI&&(P=0,$=2*Math.PI),this.path.push({type:"arc",x:E,y:U,radius:V,startAngle:P,endAngle:$,counterclockwise:W})},d.prototype.arcTo=function(E,U,V,P,$){throw new Error("arcTo not implemented.")},d.prototype.rect=function(E,U,V,P){if(isNaN(E)||isNaN(U)||isNaN(V)||isNaN(P))throw Yt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,U),this.lineTo(E+V,U),this.lineTo(E+V,U+P),this.lineTo(E,U+P),this.lineTo(E,U),this.lineTo(E+V,U),this.lineTo(E,U)},d.prototype.fillRect=function(E,U,V,P){if(isNaN(E)||isNaN(U)||isNaN(V)||isNaN(P))throw Yt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var $={};this.lineCap!=="butt"&&($.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&($.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,U,V,P),this.fill(),$.hasOwnProperty("lineCap")&&(this.lineCap=$.lineCap),$.hasOwnProperty("lineJoin")&&(this.lineJoin=$.lineJoin)}},d.prototype.strokeRect=function(E,U,V,P){if(isNaN(E)||isNaN(U)||isNaN(V)||isNaN(P))throw Yt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(E,U,V,P),this.stroke())},d.prototype.clearRect=function(E,U,V,P){if(isNaN(E)||isNaN(U)||isNaN(V)||isNaN(P))throw Yt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,U,V,P))},d.prototype.save=function(E){E=typeof E!="boolean"||E;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var P=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=P}},d.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(U),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(E){var U,V,P,$;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))U=0,V=0,P=0,$=0;else{var W=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(W!==null)U=parseInt(W[1]),V=parseInt(W[2]),P=parseInt(W[3]),$=1;else if((W=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)U=parseInt(W[1]),V=parseInt(W[2]),P=parseInt(W[3]),$=parseFloat(W[4]);else{if($=1,typeof E=="string"&&E.charAt(0)!=="#"){var J=new NI(E);E=J.ok?J.toHex():"#000000"}E.length===4?(U=E.substring(1,2),U+=U,V=E.substring(2,3),V+=V,P=E.substring(3,4),P+=P):(U=E.substring(1,3),V=E.substring(3,5),P=E.substring(5,7)),U=parseInt(U,16),V=parseInt(V,16),P=parseInt(P,16)}}return{r:U,g:V,b:P,a:$,style:E}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(E,U,V,P){if(isNaN(U)||isNaN(V)||typeof E!="string")throw Yt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(P=isNaN(P)?void 0:P,!g.call(this)){var $=ne(this.ctx.transform.rotation),W=this.ctx.transform.scaleX;O.call(this,{text:E,x:U,y:V,scale:W,angle:$,align:this.textAlign,maxWidth:P})}},d.prototype.strokeText=function(E,U,V,P){if(isNaN(U)||isNaN(V)||typeof E!="string")throw Yt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){P=isNaN(P)?void 0:P;var $=ne(this.ctx.transform.rotation),W=this.ctx.transform.scaleX;O.call(this,{text:E,x:U,y:V,scale:W,renderingMode:"stroke",angle:$,align:this.textAlign,maxWidth:P})}},d.prototype.measureText=function(E){if(typeof E!="string")throw Yt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,V=this.pdf.internal.scaleFactor,P=U.internal.getFontSize(),$=U.getStringUnitWidth(E)*P/U.internal.scaleFactor,W=function(J){var se=(J=J||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return se}}),this};return new W({width:$*=Math.round(96*V/72*1e4)/1e4})},d.prototype.scale=function(E,U){if(isNaN(E)||isNaN(U))throw Yt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new c(E,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.rotate=function(E){if(isNaN(E))throw Yt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new c(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},d.prototype.translate=function(E,U){if(isNaN(E)||isNaN(U))throw Yt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new c(1,0,0,1,E,U);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.transform=function(E,U,V,P,$,W){if(isNaN(E)||isNaN(U)||isNaN(V)||isNaN(P)||isNaN($)||isNaN(W))throw Yt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var J=new c(E,U,V,P,$,W);this.ctx.transform=this.ctx.transform.multiply(J)},d.prototype.setTransform=function(E,U,V,P,$,W){E=isNaN(E)?1:E,U=isNaN(U)?0:U,V=isNaN(V)?0:V,P=isNaN(P)?1:P,$=isNaN($)?0:$,W=isNaN(W)?0:W,this.ctx.transform=new c(E,U,V,P,$,W)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(E,U,V,P,$,W,J,se,Le){var Ee=this.pdf.getImageProperties(E),R=1,B=1,re=1,z=1;P!==void 0&&se!==void 0&&(re=se/P,z=Le/$,R=Ee.width/P*se/P,B=Ee.height/$*Le/$),W===void 0&&(W=U,J=V,U=0,V=0),P!==void 0&&se===void 0&&(se=P,Le=$),P===void 0&&se===void 0&&(se=Ee.width,Le=Ee.height);for(var x,Ie=this.ctx.transform.decompose(),be=ne(Ie.rotate.shx),ie=new c,fe=(ie=(ie=(ie=ie.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new a(W-U*re,J-V*z,P*R,$*B)),ce=T.call(this,fe),Ae=[],Te=0;Te<ce.length;Te+=1)Ae.indexOf(ce[Te])===-1&&Ae.push(ce[Te]);if(j(Ae),this.autoPaging)for(var Pe=Ae[0],Me=Ae[Ae.length-1],Ve=Pe;Ve<Me+1;Ve++){this.pdf.setPage(Ve);var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qe=Ve===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Be=Ve===1?0:We+(Ve-2)*st;if(this.ctx.clip_path.length!==0){var Ln=this.path;x=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(x,this.posX+this.margin[3],-Be+Qe+this.ctx.prevPageLastElemOffset),oe.call(this,"fill",!0),this.path=Ln}var St=JSON.parse(JSON.stringify(fe));St=k([St],this.posX+this.margin[3],-Be+Qe+this.ctx.prevPageLastElemOffset)[0];var Tr=(Ve>Pe||Ve<Me)&&_.call(this);Tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,st,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",St.x,St.y,St.w,St.h,null,null,be),Tr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",fe.x,fe.y,fe.w,fe.h,null,null,be)};var T=function(E,U,V){var P=[];U=U||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var $=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":P.push(Math.floor((E.y+$)/V)+1);break;case"arc":P.push(Math.floor((E.y+$-E.radius)/V)+1),P.push(Math.floor((E.y+$+E.radius)/V)+1);break;case"qct":var W=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);P.push(Math.floor((W.y+$)/V)+1),P.push(Math.floor((W.y+W.h+$)/V)+1);break;case"bct":var J=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);P.push(Math.floor((J.y+$)/V)+1),P.push(Math.floor((J.y+J.h+$)/V)+1);break;case"rect":P.push(Math.floor((E.y+$)/V)+1),P.push(Math.floor((E.y+E.h+$)/V)+1)}for(var se=0;se<P.length;se+=1)for(;this.pdf.internal.getNumberOfPages()<P[se];)S.call(this);return P},S=function(){var E=this.fillStyle,U=this.strokeStyle,V=this.font,P=this.lineCap,$=this.lineWidth,W=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=U,this.font=V,this.lineCap=P,this.lineWidth=$,this.lineJoin=W},k=function(E,U,V){for(var P=0;P<E.length;P++)switch(E[P].type){case"bct":E[P].x2+=U,E[P].y2+=V;case"qct":E[P].x1+=U,E[P].y1+=V;case"mt":case"lt":case"arc":default:E[P].x+=U,E[P].y+=V}return E},j=function(E){return E.sort(function(U,V){return U-V})},Y=function(E,U){for(var V,P,$=this.fillStyle,W=this.strokeStyle,J=this.lineCap,se=this.lineWidth,Le=Math.abs(se*this.ctx.transform.scaleX),Ee=this.lineJoin,R=JSON.parse(JSON.stringify(this.path)),B=JSON.parse(JSON.stringify(this.path)),re=[],z=0;z<B.length;z++)if(B[z].x!==void 0)for(var x=T.call(this,B[z]),Ie=0;Ie<x.length;Ie+=1)re.indexOf(x[Ie])===-1&&re.push(x[Ie]);for(var be=0;be<re.length;be++)for(;this.pdf.internal.getNumberOfPages()<re[be];)S.call(this);if(j(re),this.autoPaging)for(var ie=re[0],fe=re[re.length-1],ce=ie;ce<fe+1;ce++){this.pdf.setPage(ce),this.fillStyle=$,this.strokeStyle=W,this.lineCap=J,this.lineWidth=Le,this.lineJoin=Ee;var Ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Te=ce===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Me=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ve=ce===1?0:Pe+(ce-2)*Me;if(this.ctx.clip_path.length!==0){var Ke=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(V,this.posX+this.margin[3],-Ve+Te+this.ctx.prevPageLastElemOffset),oe.call(this,E,!0),this.path=Ke}if(P=JSON.parse(JSON.stringify(R)),this.path=k(P,this.posX+this.margin[3],-Ve+Te+this.ctx.prevPageLastElemOffset),U===!1||ce===0){var Qe=(ce>ie||ce<fe)&&_.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,Me,null).clip().discardPath()),oe.call(this,E,U),Qe&&this.pdf.restoreGraphicsState()}this.lineWidth=se}else this.lineWidth=Le,oe.call(this,E,U),this.lineWidth=se;this.path=R},oe=function(E,U){if((E!=="stroke"||U||!w.call(this))&&(E==="stroke"||U||!g.call(this))){for(var V,P,$=[],W=this.path,J=0;J<W.length;J++){var se=W[J];switch(se.type){case"begin":$.push({begin:!0});break;case"close":$.push({close:!0});break;case"mt":$.push({start:se,deltas:[],abs:[]});break;case"lt":var Le=$.length;if(W[J-1]&&!isNaN(W[J-1].x)&&(V=[se.x-W[J-1].x,se.y-W[J-1].y],Le>0)){for(;Le>=0;Le--)if($[Le-1].close!==!0&&$[Le-1].begin!==!0){$[Le-1].deltas.push(V),$[Le-1].abs.push(se);break}}break;case"bct":V=[se.x1-W[J-1].x,se.y1-W[J-1].y,se.x2-W[J-1].x,se.y2-W[J-1].y,se.x-W[J-1].x,se.y-W[J-1].y],$[$.length-1].deltas.push(V);break;case"qct":var Ee=W[J-1].x+2/3*(se.x1-W[J-1].x),R=W[J-1].y+2/3*(se.y1-W[J-1].y),B=se.x+2/3*(se.x1-se.x),re=se.y+2/3*(se.y1-se.y),z=se.x,x=se.y;V=[Ee-W[J-1].x,R-W[J-1].y,B-W[J-1].x,re-W[J-1].y,z-W[J-1].x,x-W[J-1].y],$[$.length-1].deltas.push(V);break;case"arc":$.push({deltas:[],abs:[],arc:!0}),Array.isArray($[$.length-1].abs)&&$[$.length-1].abs.push(se)}}P=U?null:E==="stroke"?"stroke":"fill";for(var Ie=!1,be=0;be<$.length;be++)if($[be].arc)for(var ie=$[be].abs,fe=0;fe<ie.length;fe++){var ce=ie[fe];ce.type==="arc"?F.call(this,ce.x,ce.y,ce.radius,ce.startAngle,ce.endAngle,ce.counterclockwise,void 0,U,!Ie):G.call(this,ce.x,ce.y),Ie=!0}else if($[be].close===!0)this.pdf.internal.out("h"),Ie=!1;else if($[be].begin!==!0){var Ae=$[be].start.x,Te=$[be].start.y;H.call(this,$[be].deltas,Ae,Te),Ie=!0}P&&ge.call(this,P),U&&pe.call(this)}},me=function(E){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-V;case"top":return E+U-V;case"hanging":return E+U-2*V;case"middle":return E+U/2-V;case"ideographic":return E;case"alphabetic":default:return E}},te=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(U,V){this.colorStops.push([U,V])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(E,U,V,P,$,W,J,se,Le){for(var Ee=le.call(this,V,P,$,W),R=0;R<Ee.length;R++){var B=Ee[R];R===0&&(Le?D.call(this,B.x1+E,B.y1+U):G.call(this,B.x1+E,B.y1+U)),ye.call(this,E,U,B.x2,B.y2,B.x3,B.y3,B.x4,B.y4)}se?pe.call(this):ge.call(this,J)},ge=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},pe=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(E,U){this.pdf.internal.out(n(E)+" "+r(U)+" m")},O=function(E){var U;switch(E.align){case"right":case"end":U="right";break;case"center":U="center";break;case"left":case"start":default:U="left"}var V=this.pdf.getTextDimensions(E.text),P=me.call(this,E.y),$=te.call(this,P)-V.h,W=this.ctx.transform.applyToPoint(new o(E.x,P)),J=this.ctx.transform.decompose(),se=new c;se=(se=(se=se.multiply(J.translate)).multiply(J.skew)).multiply(J.scale);for(var Le,Ee,R,B=this.ctx.transform.applyToRectangle(new a(E.x,P,V.w,V.h)),re=se.applyToRectangle(new a(E.x,$,V.w,V.h)),z=T.call(this,re),x=[],Ie=0;Ie<z.length;Ie+=1)x.indexOf(z[Ie])===-1&&x.push(z[Ie]);if(j(x),this.autoPaging)for(var be=x[0],ie=x[x.length-1],fe=be;fe<ie+1;fe++){this.pdf.setPage(fe);var ce=fe===1?this.posY+this.margin[0]:this.margin[0],Ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Te=this.pdf.internal.pageSize.height-this.margin[2],Pe=Te-this.margin[0],Me=this.pdf.internal.pageSize.width-this.margin[1],Ve=Me-this.margin[3],Ke=fe===1?0:Ae+(fe-2)*Pe;if(this.ctx.clip_path.length!==0){var Qe=this.path;Le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Le,this.posX+this.margin[3],-1*Ke+ce),oe.call(this,"fill",!0),this.path=Qe}var We=k([JSON.parse(JSON.stringify(re))],this.posX+this.margin[3],-Ke+ce+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(Ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ee*E.scale),R=this.lineWidth,this.lineWidth=R*E.scale);var st=this.autoPaging!=="text";if(st||We.y+We.h<=Te){if(st||We.y>=ce&&We.x<=Me){var Be=st?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||Me-We.x)[0],Ln=k([JSON.parse(JSON.stringify(B))],this.posX+this.margin[3],-Ke+ce+this.ctx.prevPageLastElemOffset)[0],St=st&&(fe>be||fe<ie)&&_.call(this);St&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ve,Pe,null).clip().discardPath()),this.pdf.text(Be,Ln.x,Ln.y,{angle:E.angle,align:U,renderingMode:E.renderingMode}),St&&this.pdf.restoreGraphicsState()}}else We.y<Te&&(this.ctx.prevPageLastElemOffset+=Te-We.y);E.scale>=.01&&(this.pdf.setFontSize(Ee),this.lineWidth=R)}else E.scale>=.01&&(Ee=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ee*E.scale),R=this.lineWidth,this.lineWidth=R*E.scale),this.pdf.text(E.text,W.x+this.posX,W.y+this.posY,{angle:E.angle,align:U,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(Ee),this.lineWidth=R)},G=function(E,U,V,P){V=V||0,P=P||0,this.pdf.internal.out(n(E+V)+" "+r(U+P)+" l")},H=function(E,U,V){return this.pdf.lines(E,U,V,null,null)},ye=function(E,U,V,P,$,W,J,se){this.pdf.internal.out([e(i(V+E)),e(s(P+U)),e(i($+E)),e(s(W+U)),e(i(J+E)),e(s(se+U)),"c"].join(" "))},le=function(E,U,V,P){for(var $=2*Math.PI,W=Math.PI/2;U>V;)U-=$;var J=Math.abs(V-U);J<$&&P&&(J=$-J);for(var se=[],Le=P?-1:1,Ee=U;J>1e-5;){var R=Ee+Le*Math.min(J,W);se.push(de.call(this,E,Ee,R)),J-=Math.abs(R-Ee),Ee=R}return se},de=function(E,U,V){var P=(V-U)/2,$=E*Math.cos(P),W=E*Math.sin(P),J=$,se=-W,Le=J*J+se*se,Ee=Le+J*$+se*W,R=4/3*(Math.sqrt(2*Le*Ee)-Ee)/(J*W-se*$),B=J-R*se,re=se+R*J,z=B,x=-re,Ie=P+U,be=Math.cos(Ie),ie=Math.sin(Ie);return{x1:E*Math.cos(U),y1:E*Math.sin(U),x2:B*be-re*ie,y2:B*ie+re*be,x3:z*be-x*ie,y3:z*ie+x*be,x4:E*Math.cos(V),y4:E*Math.sin(V)}},ne=function(E){return 180*E/Math.PI},_e=function(E,U,V,P,$,W){var J=E+.5*(V-E),se=U+.5*(P-U),Le=$+.5*(V-$),Ee=W+.5*(P-W),R=Math.min(E,$,J,Le),B=Math.max(E,$,J,Le),re=Math.min(U,W,se,Ee),z=Math.max(U,W,se,Ee);return new a(R,re,B-R,z-re)},we=function(E,U,V,P,$,W,J,se){var Le,Ee,R,B,re,z,x,Ie,be,ie,fe,ce,Ae,Te,Pe=V-E,Me=P-U,Ve=$-V,Ke=W-P,Qe=J-$,We=se-W;for(Ee=0;Ee<41;Ee++)be=(x=(R=E+(Le=Ee/40)*Pe)+Le*((re=V+Le*Ve)-R))+Le*(re+Le*($+Le*Qe-re)-x),ie=(Ie=(B=U+Le*Me)+Le*((z=P+Le*Ke)-B))+Le*(z+Le*(W+Le*We-z)-Ie),Ee==0?(fe=be,ce=ie,Ae=be,Te=ie):(fe=Math.min(fe,be),ce=Math.min(ce,ie),Ae=Math.max(Ae,be),Te=Math.max(Te,ie));return new a(Math.round(fe),Math.round(ce),Math.round(Ae-fe),Math.round(Te-ce))},Fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,U,V=(E=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:U}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(rt.API),function(t){var e=function(s){var o,a,c,u,f,d,y,g,w,_;for(a=[],c=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(f=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(d=(f=((f=((f=((f=(f-(_=f%85))/85)-(w=f%85))/85)-(g=f%85))/85)-(y=f%85))/85)%85,a.push(d+33,y+33,g+33,w+33,_+33)):a.push(122);return function(T,S){for(var k=S;k>0;k--)T.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,c,u,f,d=String,y="length",g=255,w="charCodeAt",_="slice",T="replace";for(s[_](-2),s=s[_](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),c=[],u=0,f=(s+=o="uuuuu"[_](s[y]%5||5))[y];f>u;u+=5)a=52200625*(s[w](u)-33)+614125*(s[w](u+1)-33)+7225*(s[w](u+2)-33)+85*(s[w](u+3)-33)+(s[w](u+4)-33),c.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(S,k){for(var j=k;j>0;j--)S.pop()}(c,o[y]),d.fromCharCode.apply(d,c)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",c=0;c<s.length;c+=2)a+=String.fromCharCode("0x"+(s[c]+s[c+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=g0(o)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,o){var a=0,c=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(rt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(c,u,f){var d=new XMLHttpRequest,y=0,g=function(w){var _=w.length,T=[],S=String.fromCharCode;for(y=0;y<_;y+=1)T.push(S(255&w.charCodeAt(y)));return T.join("")};if(d.open("GET",c,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?f(g(this.responseText)):f(void 0)}),d.send(null),u&&d.status===200)return g(d.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(rt.API),function(t){function e(){return(ot.html2canvas?Promise.resolve(ot.html2canvas):u0(()=>import("./html2canvas.esm-0a33ed42.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(ot.DOMPurify?Promise.resolve(ot.DOMPurify):u0(()=>import("./purify.es-3ef59d4c.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Ht(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var c=document.createElement(o);for(var u in a.className&&(c.className=a.className),a.innerHTML&&a.dompurify&&(c.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)c.style[u]=a.style[u];return c},s=function o(a){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function c(u,f){for(var d=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),y=u.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||d.appendChild(c(y,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(d.width=u.width,d.height=u.height,d.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(d.value=u.value),d.addEventListener("load",function(){d.scrollTop=u.scrollTop,d.scrollLeft=u.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,a(this.prop.container,c)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var c=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var y=0;y<u.length;++y){var g=u[y],w=g.src.find(function(_){return _.format==="truetype"});w&&c.addFont(w.url,g.ref.name,g.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,c.context2d.save(!0),a(this.prop.container,d)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var c=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(c):c})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(o=o||rt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,c,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,c,u){return this.setProgress(o?this.progress.val+o:null,a||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var c=this;return this.thenCore(o,a,function(u,f){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(d){return c.updateProgress(null,u),d}).then(u,f).then(function(d){return c.updateProgress(1),d})})},s.prototype.thenCore=function(o,a,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=c.call(u,o,a);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(c){a=a.thenCore(c)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,rt.getPageSize=function(o,a,c){if(Ht(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,c=u.format||c}a=a||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,d=(""+c).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+a}var g,w=0,_=0;if(y.hasOwnProperty(d))w=y[d][1]/f,_=y[d][0]/f;else try{w=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",_>w&&(g=_,_=w,w=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",w>_&&(g=_,_=w,w=g)}return{width:_,height:w,unit:a,k:f,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(b0):null;var c=new s(a);return a.worker?c:c.from(o).doCallback()}}(rt.API),rt.API.addJS=function(t){return cw=t,this.internal.events.subscribe("postPutResources",function(){Hf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Hf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),aw=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+cw+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Hf!==void 0&&aw!==void 0&&this.internal.out("/Names <</JavaScript "+Hf+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var c=a[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(s=0;s<u;s++){var d=n.internal.newObject();f.push(d);var y=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<f.length;s++)n.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(rt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var c,u=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(d){for(var y,g=256*d.charCodeAt(4)+d.charCodeAt(5),w=d.length,_={width:0,height:0,numcomponents:1},T=4;T<w;T+=2){if(T+=g,e.indexOf(d.charCodeAt(T+1))!==-1){y=256*d.charCodeAt(T+5)+d.charCodeAt(T+6),_={width:256*d.charCodeAt(T+7)+d.charCodeAt(T+8),height:y,numcomponents:d.charCodeAt(T+9)};break}g=256*d.charCodeAt(T+2)+d.charCodeAt(T+3)}return _}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}f={data:n,width:c.width,height:c.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return f}}(rt.API);var _c,Wf,lw,uw,hw,rU=function(){var t,e,n;function r(s){var o,a,c,u,f,d,y,g,w,_,T,S,k,j;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),w=function(){var Y,oe;for(oe=[],Y=0;Y<4;++Y)oe.push(String.fromCharCode(this.data[this.pos++]));return oe}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),u=this.readUInt16()||100,d.delay=1e3*f/u,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,o-=4),s=(d!=null?d.data:void 0)||this.imgData,S=0;0<=o?S<o:S>o;0<=o?++S:--S)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((_=c-this.transparency.indexed.length)>0)for(k=0;0<=_?k<_:k>_;0<=_?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":y=(T=this.read(o)).indexOf(0),g=String.fromCharCode.apply(String,T.slice(0,y)),this.text[g]=String.fromCharCode.apply(String,T.slice(y+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(d,y,g,w){var _,T,S,k,j,Y,oe,me,te,F,ge,pe,D,O,G,H,ye,le,de,ne,_e,we=Math.ceil((u.width-d)/g),Fe=Math.ceil((u.height-y)/w),E=u.width==we&&u.height==Fe;for(O=o*we,pe=E?a:new Uint8Array(O*Fe),Y=s.length,D=0,T=0;D<Fe&&c<Y;){switch(s[c++]){case 0:for(k=ye=0;ye<O;k=ye+=1)pe[T++]=s[c++];break;case 1:for(k=le=0;le<O;k=le+=1)_=s[c++],j=k<o?0:pe[T-o],pe[T++]=(_+j)%256;break;case 2:for(k=de=0;de<O;k=de+=1)_=s[c++],S=(k-k%o)/o,G=D&&pe[(D-1)*O+S*o+k%o],pe[T++]=(G+_)%256;break;case 3:for(k=ne=0;ne<O;k=ne+=1)_=s[c++],S=(k-k%o)/o,j=k<o?0:pe[T-o],G=D&&pe[(D-1)*O+S*o+k%o],pe[T++]=(_+Math.floor((j+G)/2))%256;break;case 4:for(k=_e=0;_e<O;k=_e+=1)_=s[c++],S=(k-k%o)/o,j=k<o?0:pe[T-o],D===0?G=H=0:(G=pe[(D-1)*O+S*o+k%o],H=S&&pe[(D-1)*O+(S-1)*o+k%o]),oe=j+G-H,me=Math.abs(oe-j),F=Math.abs(oe-G),ge=Math.abs(oe-H),te=me<=F&&me<=ge?j:F<=ge?G:H,pe[T++]=(_+te)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!E){var U=((y+D*w)*u.width+d)*o,V=D*O;for(k=0;k<we;k+=1){for(var P=0;P<o;P+=1)a[U++]=pe[V++];U+=(g-1)*o}}D++}}return s=Fj(s),u.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,c,u,f,d,y,g;for(a=this.palette,f=this.transparency.indexed||[],u=new Uint8Array((f.length||0)+a.length),c=0,s=0,o=d=0,y=a.length;d<y;o=d+=3)u[c++]=a[o],u[c++]=a[o+1],u[c++]=a[o+2],u[c++]=(g=f[s++])!=null?g:255;return u},r.prototype.copyToImageData=function(s,o){var a,c,u,f,d,y,g,w,_,T,S;if(c=this.colors,_=null,a=this.hasAlphaChannel,this.palette.length&&(_=(S=this._decodedPalette)!=null?S:this._decodedPalette=this.decodePalette(),c=4,a=!0),w=(u=s.data||s).length,d=_||o,f=y=0,c===1)for(;f<w;)g=_?4*o[f/4]:y,T=d[g++],u[f++]=T,u[f++]=T,u[f++]=T,u[f++]=a?d[g++]:255,y=g;else for(;f<w;)g=_?4*o[f/4]:y,u[f++]=d[g++],u[f++]=d[g++],u[f++]=d[g++],u[f++]=a?d[g++]:255,y=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(ot)==="[object Window]"){try{e=ot.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,c,u,f,d,y,g;if(this.animation){for(g=[],a=f=0,d=(y=this.animation.frames).length;f<d;a=++f)o=y[a],c=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,g.push(o.image=t(c));return g}},r.prototype.renderFrame=function(s,o){var a,c,u;return a=(c=this.animation.frames)[o],u=c[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,c,u,f,d,y=this;return a=0,d=this.animation,u=d.numFrames,c=d.frames,f=d.numPlays,(o=function(){var g,w;if(g=a++%u,w=c[g],y.renderFrame(s,g),u>1&&a/u<f)return y.animation._timeout=setTimeout(o,w.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function iU(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,c=null;s&&(a=e,c=o,e+=3*o);var u=!0,f=[],d=0,y=null,g=0,w=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,w=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=t[e++];d=t[e++]|t[e++]<<8,y=t[e++],!(1&_)&&(y=null),g=_>>2&7,e++;break;case 254:for(;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var T=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,Y=t[e++],oe=Y>>6&1,me=1<<(7&Y)+1,te=a,F=c,ge=!1;Y>>7&&(ge=!0,te=e,F=me,e+=3*me);var pe=e;for(e++;;){var D;if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}f.push({x:T,y:S,width:k,height:j,has_local_palette:ge,palette_offset:te,palette_size:F,data_offset:pe,data_length:e-pe,transparent_index:y,interlaced:!!oe,delay:d,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return w},this.frameInfo=function(O){if(O<0||O>=f.length)throw new Error("Frame index out of range.");return f[O]},this.decodeAndBlitFrameBGRA=function(O,G){var H=this.frameInfo(O),ye=H.width*H.height,le=new Uint8Array(ye);fw(t,H.data_offset,le,ye);var de=H.palette_offset,ne=H.transparent_index;ne===null&&(ne=256);var _e=H.width,we=n-_e,Fe=_e,E=4*(H.y*n+H.x),U=4*((H.y+H.height)*n+H.x),V=E,P=4*we;H.interlaced===!0&&(P+=4*n*7);for(var $=8,W=0,J=le.length;W<J;++W){var se=le[W];if(Fe===0&&(Fe=_e,(V+=P)>=U&&(P=4*we+4*n*($-1),V=E+(_e+we)*($<<1),$>>=1)),se===ne)V+=4;else{var Le=t[de+3*se],Ee=t[de+3*se+1],R=t[de+3*se+2];G[V++]=R,G[V++]=Ee,G[V++]=Le,G[V++]=255}--Fe}},this.decodeAndBlitFrameRGBA=function(O,G){var H=this.frameInfo(O),ye=H.width*H.height,le=new Uint8Array(ye);fw(t,H.data_offset,le,ye);var de=H.palette_offset,ne=H.transparent_index;ne===null&&(ne=256);var _e=H.width,we=n-_e,Fe=_e,E=4*(H.y*n+H.x),U=4*((H.y+H.height)*n+H.x),V=E,P=4*we;H.interlaced===!0&&(P+=4*n*7);for(var $=8,W=0,J=le.length;W<J;++W){var se=le[W];if(Fe===0&&(Fe=_e,(V+=P)>=U&&(P=4*we+4*n*($-1),V=E+(_e+we)*($<<1),$>>=1)),se===ne)V+=4;else{var Le=t[de+3*se],Ee=t[de+3*se+1],R=t[de+3*se+2];G[V++]=Le,G[V++]=Ee,G[V++]=R,G[V++]=255}--Fe}}}function fw(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,c=i+1,u=(1<<c)-1,f=0,d=0,y=0,g=t[e++],w=new Int32Array(4096),_=null;;){for(;f<16&&g!==0;)d|=t[e++]<<f,f+=8,g===1?g=t[e++]:--g;if(f<c)break;var T=d&u;if(d>>=c,f-=c,T!==s){if(T===o)break;for(var S=T<a?T:_,k=0,j=S;j>s;)j=w[j]>>8,++k;var Y=j;if(y+k+(S!==T?1:0)>r)return void Yt.log("Warning, gif stream longer than expected.");n[y++]=Y;var oe=y+=k;for(S!==T&&(n[y++]=Y),j=S;k--;)j=w[j],n[--oe]=255&j,j>>=8;_!==null&&a<4096&&(w[a++]=_<<8|Y,a>=u+1&&c<12&&(++c,u=u<<1|1)),_=T}else a=o+1,u=(1<<(c=i+1))-1,_=null}return y!==r&&Yt.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Vm(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),c=new Array(64),u=new Array(64),f=new Array(64),d=new Array(65535),y=new Array(65535),g=new Array(64),w=new Array(64),_=[],T=0,S=7,k=new Array(64),j=new Array(64),Y=new Array(64),oe=new Array(256),me=new Array(2048),te=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ge=[0,1,2,3,4,5,6,7,8,9,10,11],pe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ye=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(E,U){for(var V=0,P=0,$=new Array,W=1;W<=16;W++){for(var J=1;J<=E[W];J++)$[U[P]]=[],$[U[P]][0]=V,$[U[P]][1]=W,P++,V++;V*=2}return $}function de(E){for(var U=E[0],V=E[1]-1;V>=0;)U&1<<V&&(T|=1<<S),V--,--S<0&&(T==255?(ne(255),ne(0)):ne(T),S=7,T=0)}function ne(E){_.push(E)}function _e(E){ne(E>>8&255),ne(255&E)}function we(E,U,V,P,$){for(var W,J=$[0],se=$[240],Le=function(ie,fe){var ce,Ae,Te,Pe,Me,Ve,Ke,Qe,We,st,Be=0;for(We=0;We<8;++We){ce=ie[Be],Ae=ie[Be+1],Te=ie[Be+2],Pe=ie[Be+3],Me=ie[Be+4],Ve=ie[Be+5],Ke=ie[Be+6];var Ln=ce+(Qe=ie[Be+7]),St=ce-Qe,Tr=Ae+Ke,_t=Ae-Ke,Nt=Te+Ve,Ur=Te-Ve,Ft=Pe+Me,Uo=Pe-Me,un=Ln+Ft,di=Ln-Ft,_s=Tr+Nt,hn=Tr-Nt;ie[Be]=un+_s,ie[Be+4]=un-_s;var ft=.707106781*(hn+di);ie[Be+2]=di+ft,ie[Be+6]=di-ft;var Bt=.382683433*((un=Uo+Ur)-(hn=_t+St)),qo=.5411961*un+Bt,Yn=1.306562965*hn+Bt,zi=.707106781*(_s=Ur+_t),Hi=St+zi,nt=St-zi;ie[Be+5]=nt+qo,ie[Be+3]=nt-qo,ie[Be+1]=Hi+Yn,ie[Be+7]=Hi-Yn,Be+=8}for(Be=0,We=0;We<8;++We){ce=ie[Be],Ae=ie[Be+8],Te=ie[Be+16],Pe=ie[Be+24],Me=ie[Be+32],Ve=ie[Be+40],Ke=ie[Be+48];var pi=ce+(Qe=ie[Be+56]),Wi=ce-Qe,Cr=Ae+Ke,Rn=Ae-Ke,An=Te+Ve,qr=Te-Ve,$a=Pe+Me,ws=Pe-Me,gi=pi+$a,mi=pi-$a,yi=Cr+An,Gi=Cr-An;ie[Be]=gi+yi,ie[Be+32]=gi-yi;var ei=.707106781*(Gi+mi);ie[Be+16]=mi+ei,ie[Be+48]=mi-ei;var Ki=.382683433*((gi=ws+qr)-(Gi=Rn+Wi)),Vo=.5411961*gi+Ki,za=1.306562965*Gi+Ki,Ha=.707106781*(yi=qr+Rn),Wa=Wi+Ha,Ga=Wi-Ha;ie[Be+40]=Ga+Vo,ie[Be+24]=Ga-Vo,ie[Be+8]=Wa+za,ie[Be+56]=Wa-za,Be++}for(We=0;We<64;++We)st=ie[We]*fe[We],g[We]=st>0?st+.5|0:st-.5|0;return g}(E,U),Ee=0;Ee<64;++Ee)w[te[Ee]]=Le[Ee];var R=w[0]-V;V=w[0],R==0?de(P[0]):(de(P[y[W=32767+R]]),de(d[W]));for(var B=63;B>0&&w[B]==0;)B--;if(B==0)return de(J),V;for(var re,z=1;z<=B;){for(var x=z;w[z]==0&&z<=B;)++z;var Ie=z-x;if(Ie>=16){re=Ie>>4;for(var be=1;be<=re;++be)de(se);Ie&=15}W=32767+w[z],de($[(Ie<<4)+y[W]]),de(d[W]),z++}return B!=63&&de(J),V}function Fe(E){E=Math.min(Math.max(E,1),100),s!=E&&(function(U){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],P=0;P<64;P++){var $=o((V[P]*U+50)/100);$=Math.min(Math.max($,1),255),a[te[P]]=$}for(var W=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],J=0;J<64;J++){var se=o((W[J]*U+50)/100);se=Math.min(Math.max(se,1),255),c[te[J]]=se}for(var Le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ee=0,R=0;R<8;R++)for(var B=0;B<8;B++)u[Ee]=1/(a[te[Ee]]*Le[R]*Le[B]*8),f[Ee]=1/(c[te[Ee]]*Le[R]*Le[B]*8),Ee++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),s=E)}this.encode=function(E,U){U&&Fe(U),_=new Array,T=0,S=7,_e(65496),_e(65504),_e(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),_e(1),_e(1),ne(0),ne(0),function(){_e(65499),_e(132),ne(0);for(var Ae=0;Ae<64;Ae++)ne(a[Ae]);ne(1);for(var Te=0;Te<64;Te++)ne(c[Te])}(),function(Ae,Te){_e(65472),_e(17),ne(8),_e(Te),_e(Ae),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)}(E.width,E.height),function(){_e(65476),_e(418),ne(0);for(var Ae=0;Ae<16;Ae++)ne(F[Ae+1]);for(var Te=0;Te<=11;Te++)ne(ge[Te]);ne(16);for(var Pe=0;Pe<16;Pe++)ne(pe[Pe+1]);for(var Me=0;Me<=161;Me++)ne(D[Me]);ne(1);for(var Ve=0;Ve<16;Ve++)ne(O[Ve+1]);for(var Ke=0;Ke<=11;Ke++)ne(G[Ke]);ne(17);for(var Qe=0;Qe<16;Qe++)ne(H[Qe+1]);for(var We=0;We<=161;We++)ne(ye[We])}(),_e(65498),_e(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var V=0,P=0,$=0;T=0,S=7,this.encode.displayName="_encode_";for(var W,J,se,Le,Ee,R,B,re,z,x=E.data,Ie=E.width,be=E.height,ie=4*Ie,fe=0;fe<be;){for(W=0;W<ie;){for(Ee=ie*fe+W,B=-1,re=0,z=0;z<64;z++)R=Ee+(re=z>>3)*ie+(B=4*(7&z)),fe+re>=be&&(R-=ie*(fe+1+re-be)),W+B>=ie&&(R-=W+B-ie+4),J=x[R++],se=x[R++],Le=x[R++],k[z]=(me[J]+me[se+256>>0]+me[Le+512>>0]>>16)-128,j[z]=(me[J+768>>0]+me[se+1024>>0]+me[Le+1280>>0]>>16)-128,Y[z]=(me[J+1280>>0]+me[se+1536>>0]+me[Le+1792>>0]>>16)-128;V=we(k,u,V,e,r),P=we(j,f,P,n,i),$=we(Y,f,$,n,i),W+=32}fe+=8}if(S>=0){var ce=[];ce[1]=S+1,ce[0]=(1<<S+1)-1,de(ce)}return _e(65497),new Uint8Array(_)},t=t||50,function(){for(var E=String.fromCharCode,U=0;U<256;U++)oe[U]=E(U)}(),e=le(F,ge),n=le(O,G),r=le(pe,D),i=le(H,ye),function(){for(var E=1,U=2,V=1;V<=15;V++){for(var P=E;P<U;P++)y[32767+P]=V,d[32767+P]=[],d[32767+P][1]=V,d[32767+P][0]=P;for(var $=-(U-1);$<=-E;$++)y[32767+$]=V,d[32767+$]=[],d[32767+$][1]=V,d[32767+$][0]=U-1+$;E<<=1,U<<=1}}(),function(){for(var E=0;E<256;E++)me[E]=19595*E,me[E+256>>0]=38470*E,me[E+512>>0]=7471*E+32768,me[E+768>>0]=-11059*E,me[E+1024>>0]=-21709*E,me[E+1280>>0]=32768*E+8421375,me[E+1536>>0]=-27439*E,me[E+1792>>0]=-5329*E}(),Fe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ci(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function dw(t){function e(F){if(!F)throw Error("assert :P")}function n(F,ge,pe){for(var D=0;4>D;D++)if(F[ge+D]!=pe.charCodeAt(D))return!0;return!1}function r(F,ge,pe,D,O){for(var G=0;G<O;G++)F[ge+G]=pe[D+G]}function i(F,ge,pe,D){for(var O=0;O<D;O++)F[ge+O]=pe}function s(F){return new Int32Array(F)}function o(F,ge){for(var pe=[],D=0;D<F;D++)pe.push(new ge);return pe}function a(F,ge){var pe=[];return function D(O,G,H){for(var ye=H[G],le=0;le<ye&&(O.push(H.length>G+1?[]:new ge),!(H.length<G+1));le++)D(O[le],G+1,H)}(pe,0,F),pe}var c=function(){var F=this;function ge(l,h){for(var m=1<<h-1>>>0;l&m;)m>>>=1;return m?(l&m-1)+m:l}function pe(l,h,m,v,b){e(!(v%m));do l[h+(v-=m)]=b;while(0<v)}function D(l,h,m,v,b){if(e(2328>=b),512>=b)var I=s(512);else if((I=s(b))==null)return 0;return function(N,C,L,M,Q,ue){var he,ee,ke=C,ve=1<<L,X=s(16),Z=s(16);for(e(Q!=0),e(M!=null),e(N!=null),e(0<L),ee=0;ee<Q;++ee){if(15<M[ee])return 0;++X[M[ee]]}if(X[0]==Q)return 0;for(Z[1]=0,he=1;15>he;++he){if(X[he]>1<<he)return 0;Z[he+1]=Z[he]+X[he]}for(ee=0;ee<Q;++ee)he=M[ee],0<M[ee]&&(ue[Z[he]++]=ee);if(Z[15]==1)return(M=new O).g=0,M.value=ue[0],pe(N,ke,1,ve,M),ve;var Ce,Re=-1,xe=ve-1,He=0,je=1,et=1,qe=1<<L;for(ee=0,he=1,Q=2;he<=L;++he,Q<<=1){if(je+=et<<=1,0>(et-=X[he]))return 0;for(;0<X[he];--X[he])(M=new O).g=he,M.value=ue[ee++],pe(N,ke+He,Q,qe,M),He=ge(He,he)}for(he=L+1,Q=2;15>=he;++he,Q<<=1){if(je+=et<<=1,0>(et-=X[he]))return 0;for(;0<X[he];--X[he]){if(M=new O,(He&xe)!=Re){for(ke+=qe,Ce=1<<(Re=he)-L;15>Re&&!(0>=(Ce-=X[Re]));)++Re,Ce<<=1;ve+=qe=1<<(Ce=Re-L),N[C+(Re=He&xe)].g=Ce+L,N[C+Re].value=ke-C-Re}M.g=he-L,M.value=ue[ee++],pe(N,ke+(He>>L),Q,qe,M),He=ge(He,he)}}return je!=2*Z[15]-1?0:ve}(l,h,m,v,b,I)}function O(){this.value=this.g=0}function G(){this.value=this.g=0}function H(){this.G=o(5,O),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(kr,G)}function ye(l,h,m,v){e(l!=null),e(h!=null),e(2147483648>v),l.Ca=254,l.I=0,l.b=-8,l.Ka=0,l.oa=h,l.pa=m,l.Jd=h,l.Yc=m+v,l.Zc=4<=v?m+v-4+1:m,W(l)}function le(l,h){for(var m=0;0<h--;)m|=se(l,128)<<h;return m}function de(l,h){var m=le(l,h);return J(l)?-m:m}function ne(l,h,m,v){var b,I=0;for(e(l!=null),e(h!=null),e(4294967288>v),l.Sb=v,l.Ra=0,l.u=0,l.h=0,4<v&&(v=4),b=0;b<v;++b)I+=h[m+b]<<8*b;l.Ra=I,l.bb=v,l.oa=h,l.pa=m}function _e(l){for(;8<=l.u&&l.bb<l.Sb;)l.Ra>>>=8,l.Ra+=l.oa[l.pa+l.bb]<<cc-8>>>0,++l.bb,l.u-=8;V(l)&&(l.h=1,l.u=0)}function we(l,h){if(e(0<=h),!l.h&&h<=ac){var m=U(l)&oc[h];return l.u+=h,_e(l),m}return l.h=1,l.u=0}function Fe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(l){return l.Ra>>>(l.u&cc-1)>>>0}function V(l){return e(l.bb<=l.Sb),l.h||l.bb==l.Sb&&l.u>cc}function P(l,h){l.u=h,l.h=V(l)}function $(l){l.u>=zl&&(e(l.u>=zl),_e(l))}function W(l){e(l!=null&&l.oa!=null),l.pa<l.Zc?(l.I=(l.oa[l.pa++]|l.I<<8)>>>0,l.b+=8):(e(l!=null&&l.oa!=null),l.pa<l.Yc?(l.b+=8,l.I=l.oa[l.pa++]|l.I<<8):l.Ka?l.b=0:(l.I<<=8,l.b+=8,l.Ka=1))}function J(l){return le(l,1)}function se(l,h){var m=l.Ca;0>l.b&&W(l);var v=l.b,b=m*h>>>8,I=(l.I>>>v>b)+0;for(I?(m-=b,l.I-=b+1<<v>>>0):m=b+1,v=m,b=0;256<=v;)b+=8,v>>=8;return v=7^b+Lr[v],l.b-=v,l.Ca=(m<<v)-1,I}function Le(l,h,m){l[h+0]=m>>24&255,l[h+1]=m>>16&255,l[h+2]=m>>8&255,l[h+3]=m>>0&255}function Ee(l,h){return l[h+0]<<0|l[h+1]<<8}function R(l,h){return Ee(l,h)|l[h+2]<<16}function B(l,h){return Ee(l,h)|Ee(l,h+2)<<16}function re(l,h){var m=1<<h;return e(l!=null),e(0<h),l.X=s(m),l.X==null?0:(l.Mb=32-h,l.Xa=h,1)}function z(l,h){e(l!=null),e(h!=null),e(l.Xa==h.Xa),r(h.X,0,l.X,0,1<<h.Xa)}function x(){this.X=[],this.Xa=this.Mb=0}function Ie(l,h,m,v){e(m!=null),e(v!=null);var b=m[0],I=v[0];return b==0&&(b=(l*I+h/2)/h),I==0&&(I=(h*b+l/2)/l),0>=b||0>=I?0:(m[0]=b,v[0]=I,1)}function be(l,h){return l+(1<<h)-1>>>h}function ie(l,h){return((4278255360&l)+(4278255360&h)>>>0&4278255360)+((16711935&l)+(16711935&h)>>>0&16711935)>>>0}function fe(l,h){F[h]=function(m,v,b,I,N,C,L){var M;for(M=0;M<N;++M){var Q=F[l](C[L+M-1],b,I+M);C[L+M]=ie(m[v+M],Q)}}}function ce(){this.ud=this.hd=this.jd=0}function Ae(l,h){return((4278124286&(l^h))>>>1)+(l&h)>>>0}function Te(l){return 0<=l&&256>l?l:0>l?0:255<l?255:void 0}function Pe(l,h){return Te(l+(l-h+.5>>1))}function Me(l,h,m){return Math.abs(h-m)-Math.abs(l-m)}function Ve(l,h,m,v,b,I,N){for(v=I[N-1],m=0;m<b;++m)I[N+m]=v=ie(l[h+m],v)}function Ke(l,h,m,v,b){var I;for(I=0;I<m;++I){var N=l[h+I],C=N>>8&255,L=16711935&(L=(L=16711935&N)+((C<<16)+C));v[b+I]=(4278255360&N)+L>>>0}}function Qe(l,h){h.jd=l>>0&255,h.hd=l>>8&255,h.ud=l>>16&255}function We(l,h,m,v,b,I){var N;for(N=0;N<v;++N){var C=h[m+N],L=C>>>8,M=C,Q=255&(Q=(Q=C>>>16)+((l.jd<<24>>24)*(L<<24>>24)>>>5));M=255&(M=(M=M+((l.hd<<24>>24)*(L<<24>>24)>>>5))+((l.ud<<24>>24)*(Q<<24>>24)>>>5)),b[I+N]=(4278255360&C)+(Q<<16)+M}}function st(l,h,m,v,b){F[h]=function(I,N,C,L,M,Q,ue,he,ee){for(L=ue;L<he;++L)for(ue=0;ue<ee;++ue)M[Q++]=b(C[v(I[N++])])},F[l]=function(I,N,C,L,M,Q,ue){var he=8>>I.b,ee=I.Ea,ke=I.K[0],ve=I.w;if(8>he)for(I=(1<<I.b)-1,ve=(1<<he)-1;N<C;++N){var X,Z=0;for(X=0;X<ee;++X)X&I||(Z=v(L[M++])),Q[ue++]=b(ke[Z&ve]),Z>>=he}else F["VP8LMapColor"+m](L,M,ke,ve,Q,ue,N,C,ee)}}function Be(l,h,m,v,b){for(m=h+m;h<m;){var I=l[h++];v[b++]=I>>16&255,v[b++]=I>>8&255,v[b++]=I>>0&255}}function Ln(l,h,m,v,b){for(m=h+m;h<m;){var I=l[h++];v[b++]=I>>16&255,v[b++]=I>>8&255,v[b++]=I>>0&255,v[b++]=I>>24&255}}function St(l,h,m,v,b){for(m=h+m;h<m;){var I=(N=l[h++])>>16&240|N>>12&15,N=N>>0&240|N>>28&15;v[b++]=I,v[b++]=N}}function Tr(l,h,m,v,b){for(m=h+m;h<m;){var I=(N=l[h++])>>16&248|N>>13&7,N=N>>5&224|N>>3&31;v[b++]=I,v[b++]=N}}function _t(l,h,m,v,b){for(m=h+m;h<m;){var I=l[h++];v[b++]=I>>0&255,v[b++]=I>>8&255,v[b++]=I>>16&255}}function Nt(l,h,m,v,b,I){if(I==0)for(m=h+m;h<m;)Le(v,((I=l[h++])[0]>>24|I[1]>>8&65280|I[2]<<8&16711680|I[3]<<24)>>>0),b+=32;else r(v,b,l,h,m)}function Ur(l,h){F[h][0]=F[l+"0"],F[h][1]=F[l+"1"],F[h][2]=F[l+"2"],F[h][3]=F[l+"3"],F[h][4]=F[l+"4"],F[h][5]=F[l+"5"],F[h][6]=F[l+"6"],F[h][7]=F[l+"7"],F[h][8]=F[l+"8"],F[h][9]=F[l+"9"],F[h][10]=F[l+"10"],F[h][11]=F[l+"11"],F[h][12]=F[l+"12"],F[h][13]=F[l+"13"],F[h][14]=F[l+"0"],F[h][15]=F[l+"0"]}function Ft(l){return l==jg||l==Ug||l==hf||l==qg}function Uo(){this.eb=[],this.size=this.A=this.fb=0}function un(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function di(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Uo,this.f.kb=new un,this.sd=null}function _s(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function hn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ft(l){return alert("todo:WebPSamplerProcessPlane"),l.T}function Bt(l,h){var m=l.T,v=h.ba.f.RGBA,b=v.eb,I=v.fb+l.ka*v.A,N=ii[h.ba.S],C=l.y,L=l.O,M=l.f,Q=l.N,ue=l.ea,he=l.W,ee=h.cc,ke=h.dc,ve=h.Mc,X=h.Nc,Z=l.ka,Ce=l.ka+l.T,Re=l.U,xe=Re+1>>1;for(Z==0?N(C,L,null,null,M,Q,ue,he,M,Q,ue,he,b,I,null,null,Re):(N(h.ec,h.fc,C,L,ee,ke,ve,X,M,Q,ue,he,b,I-v.A,b,I,Re),++m);Z+2<Ce;Z+=2)ee=M,ke=Q,ve=ue,X=he,Q+=l.Rc,he+=l.Rc,I+=2*v.A,N(C,(L+=2*l.fa)-l.fa,C,L,ee,ke,ve,X,M,Q,ue,he,b,I-v.A,b,I,Re);return L+=l.fa,l.j+Ce<l.o?(r(h.ec,h.fc,C,L,Re),r(h.cc,h.dc,M,Q,xe),r(h.Mc,h.Nc,ue,he,xe),m--):1&Ce||N(C,L,null,null,M,Q,ue,he,M,Q,ue,he,b,I+v.A,null,null,Re),m}function qo(l,h,m){var v=l.F,b=[l.J];if(v!=null){var I=l.U,N=h.ba.S,C=N==uf||N==hf;h=h.ba.f.RGBA;var L=[0],M=l.ka;L[0]=l.T,l.Kb&&(M==0?--L[0]:(--M,b[0]-=l.width),l.j+l.ka+l.T==l.o&&(L[0]=l.o-l.j-M));var Q=h.eb;M=h.fb+M*h.A,l=sf(v,b[0],l.width,I,L,Q,M+(C?0:3),h.A),e(m==L),l&&Ft(N)&&ro(Q,M,C,I,L,h.A)}return 0}function Yn(l){var h=l.ma,m=h.ba.S,v=11>m,b=m==cf||m==lf||m==uf||m==Bg||m==12||Ft(m);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Vl(h.Oa,l,b?11:12))return 0;if(b&&Ft(m)&&Oe(),l.da)alert("todo:use_scaling");else{if(v){if(h.Ib=ft,l.Kb){if(m=l.U+1>>1,h.memory=s(l.U+2*m),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+l.U,h.Mc=h.cc,h.Nc=h.dc+m,h.Ib=Bt,Oe()}}else alert("todo:EmitYUV");b&&(h.Jb=qo,v&&ae())}if(v&&!Gy){for(l=0;256>l;++l)gN[l]=89858*(l-128)+df>>ff,vN[l]=-22014*(l-128)+df,yN[l]=-45773*(l-128),mN[l]=113618*(l-128)+df>>ff;for(l=Ql;l<zg;++l)h=76283*(l-16)+df>>ff,_N[l-Ql]=Vr(h,255),wN[l-Ql]=Vr(h+8>>4,15);Gy=1}return 1}function zi(l){var h=l.ma,m=l.U,v=l.T;return e(!(1&l.ka)),0>=m||0>=v?0:(m=h.Ib(l,h),h.Jb!=null&&h.Jb(l,h,m),h.Dc+=m,1)}function Hi(l){l.ma.memory=null}function nt(l,h,m,v){return we(l,8)!=47?0:(h[0]=we(l,14)+1,m[0]=we(l,14)+1,v[0]=we(l,1),we(l,3)!=0?0:!l.h)}function pi(l,h){if(4>l)return l+1;var m=l-2>>1;return(2+(1&l)<<m)+we(h,m)+1}function Wi(l,h){return 120<h?h-120:1<=(m=((m=tN[h-1])>>4)*l+(8-(15&m)))?m:1;var m}function Cr(l,h,m){var v=U(m),b=l[h+=255&v].g-8;return 0<b&&(P(m,m.u+8),v=U(m),h+=l[h].value,h+=v&(1<<b)-1),P(m,m.u+l[h].g),l[h].value}function Rn(l,h,m){return m.g+=l.g,m.value+=l.value<<h>>>0,e(8>=m.g),l.g}function An(l,h,m){var v=l.xc;return e((h=v==0?0:l.vc[l.md*(m>>v)+(h>>v)])<l.Wb),l.Ya[h]}function qr(l,h,m,v){var b=l.ab,I=l.c*h,N=l.C;h=N+h;var C=m,L=v;for(v=l.Ta,m=l.Ua;0<b--;){var M=l.gc[b],Q=N,ue=h,he=C,ee=L,ke=(L=v,C=m,M.Ea);switch(e(Q<ue),e(ue<=M.nc),M.hc){case 2:rf(he,ee,(ue-Q)*ke,L,C);break;case 0:var ve=Q,X=ue,Z=L,Ce=C,Re=(qe=M).Ea;ve==0&&(Og(he,ee,null,null,1,Z,Ce),Ve(he,ee+1,0,0,Re-1,Z,Ce+1),ee+=Re,Ce+=Re,++ve);for(var xe=1<<qe.b,He=xe-1,je=be(Re,qe.b),et=qe.K,qe=qe.w+(ve>>qe.b)*je;ve<X;){var Mt=et,qt=qe,Rt=1;for(Hl(he,ee,Z,Ce-Re,1,Z,Ce);Rt<Re;){var Et=(Rt&~He)+xe;Et>Re&&(Et=Re),(0,Zs[Mt[qt++]>>8&15])(he,ee+ +Rt,Z,Ce+Rt-Re,Et-Rt,Z,Ce+Rt),Rt=Et}ee+=Re,Ce+=Re,++ve&He||(qe+=je)}ue!=M.nc&&r(L,C-ke,L,C+(ue-Q-1)*ke,ke);break;case 1:for(ke=he,X=ee,Re=(he=M.Ea)-(Ce=he&~(Z=(ee=1<<M.b)-1)),ve=be(he,M.b),xe=M.K,M=M.w+(Q>>M.b)*ve;Q<ue;){for(He=xe,je=M,et=new ce,qe=X+Ce,Mt=X+he;X<qe;)Qe(He[je++],et),ti(et,ke,X,ee,L,C),X+=ee,C+=ee;X<Mt&&(Qe(He[je++],et),ti(et,ke,X,Re,L,C),X+=Re,C+=Re),++Q&Z||(M+=ve)}break;case 3:if(he==L&&ee==C&&0<M.b){for(X=L,he=ke=C+(ue-Q)*ke-(Ce=(ue-Q)*be(M.Ea,M.b)),ee=L,Z=C,ve=[],Ce=(Re=Ce)-1;0<=Ce;--Ce)ve[Ce]=ee[Z+Ce];for(Ce=Re-1;0<=Ce;--Ce)X[he+Ce]=ve[Ce];bi(M,Q,ue,L,ke,L,C)}else bi(M,Q,ue,he,ee,L,C)}C=v,L=m}L!=m&&r(v,m,C,L,I)}function $a(l,h){var m=l.V,v=l.Ba+l.c*l.C,b=h-l.C;if(e(h<=l.l.o),e(16>=b),0<b){var I=l.l,N=l.Ta,C=l.Ua,L=I.width;if(qr(l,b,m,v),b=C=[C],e((m=l.C)<(v=h)),e(I.v<I.va),v>I.o&&(v=I.o),m<I.j){var M=I.j-m;m=I.j,b[0]+=M*L}if(m>=v?m=0:(b[0]+=4*I.v,I.ka=m-I.j,I.U=I.va-I.v,I.T=v-m,m=1),m){if(C=C[0],11>(m=l.ca).S){var Q=m.f.RGBA,ue=(v=m.S,b=I.U,I=I.T,M=Q.eb,Q.A),he=I;for(Q=Q.fb+l.Ma*Q.A;0<he--;){var ee=N,ke=C,ve=b,X=M,Z=Q;switch(v){case af:Ai(ee,ke,ve,X,Z);break;case cf:eo(ee,ke,ve,X,Z);break;case jg:eo(ee,ke,ve,X,Z),ro(X,Z,0,ve,1,0);break;case Fy:lc(ee,ke,ve,X,Z);break;case lf:Nt(ee,ke,ve,X,Z,1);break;case Ug:Nt(ee,ke,ve,X,Z,1),ro(X,Z,0,ve,1,0);break;case uf:Nt(ee,ke,ve,X,Z,0);break;case hf:Nt(ee,ke,ve,X,Z,0),ro(X,Z,1,ve,1,0);break;case Bg:Qi(ee,ke,ve,X,Z);break;case qg:Qi(ee,ke,ve,X,Z),fc(X,Z,ve,1,0);break;case By:Es(ee,ke,ve,X,Z);break;default:e(0)}C+=L,Q+=ue}l.Ma+=I}else alert("todo:EmitRescaledRowsYUVA");e(l.Ma<=m.height)}}l.C=h,e(l.C<=l.i)}function ws(l){var h;if(0<l.ua)return 0;for(h=0;h<l.Wb;++h){var m=l.Ya[h].G,v=l.Ya[h].H;if(0<m[1][v[1]+0].g||0<m[2][v[2]+0].g||0<m[3][v[3]+0].g)return 0}return 1}function gi(l,h,m,v,b,I){if(l.Z!=0){var N=l.qd,C=l.rd;for(e(so[l.Z]!=null);h<m;++h)so[l.Z](N,C,v,b,v,b,I),N=v,C=b,b+=I;l.qd=N,l.rd=C}}function mi(l,h){var m=l.l.ma,v=m.Z==0||m.Z==1?l.l.j:l.C;if(v=l.C<v?v:l.C,e(h<=l.l.o),h>v){var b=l.l.width,I=m.ca,N=m.tb+b*v,C=l.V,L=l.Ba+l.c*v,M=l.gc;e(l.ab==1),e(M[0].hc==3),Dg(M[0],v,h,C,L,I,N),gi(m,v,h,I,N,b)}l.C=l.Ma=h}function yi(l,h,m,v,b,I,N){var C=l.$/v,L=l.$%v,M=l.m,Q=l.s,ue=m+l.$,he=ue;b=m+v*b;var ee=m+v*I,ke=280+Q.ua,ve=l.Pb?C:16777216,X=0<Q.ua?Q.Wa:null,Z=Q.wc,Ce=ue<ee?An(Q,L,C):null;e(l.C<I),e(ee<=b);var Re=!1;e:for(;;){for(;Re||ue<ee;){var xe=0;if(C>=ve){var He=ue-m;e((ve=l).Pb),ve.wd=ve.m,ve.xd=He,0<ve.s.ua&&z(ve.s.Wa,ve.s.vb),ve=C+rN}if(L&Z||(Ce=An(Q,L,C)),e(Ce!=null),Ce.Qb&&(h[ue]=Ce.qb,Re=!0),!Re)if($(M),Ce.jc){xe=M,He=h;var je=ue,et=Ce.pd[U(xe)&kr-1];e(Ce.jc),256>et.g?(P(xe,xe.u+et.g),He[je]=et.value,xe=0):(P(xe,xe.u+et.g-256),e(256<=et.value),xe=et.value),xe==0&&(Re=!0)}else xe=Cr(Ce.G[0],Ce.H[0],M);if(M.h)break;if(Re||256>xe){if(!Re)if(Ce.nd)h[ue]=(Ce.qb|xe<<8)>>>0;else{if($(M),Re=Cr(Ce.G[1],Ce.H[1],M),$(M),He=Cr(Ce.G[2],Ce.H[2],M),je=Cr(Ce.G[3],Ce.H[3],M),M.h)break;h[ue]=(je<<24|Re<<16|xe<<8|He)>>>0}if(Re=!1,++ue,++L>=v&&(L=0,++C,N!=null&&C<=I&&!(C%16)&&N(l,C),X!=null))for(;he<ue;)xe=h[he++],X.X[(506832829*xe&4294967295)>>>X.Mb]=xe}else if(280>xe){if(xe=pi(xe-256,M),He=Cr(Ce.G[4],Ce.H[4],M),$(M),He=Wi(v,He=pi(He,M)),M.h)break;if(ue-m<He||b-ue<xe)break e;for(je=0;je<xe;++je)h[ue+je]=h[ue+je-He];for(ue+=xe,L+=xe;L>=v;)L-=v,++C,N!=null&&C<=I&&!(C%16)&&N(l,C);if(e(ue<=b),L&Z&&(Ce=An(Q,L,C)),X!=null)for(;he<ue;)xe=h[he++],X.X[(506832829*xe&4294967295)>>>X.Mb]=xe}else{if(!(xe<ke))break e;for(Re=xe-280,e(X!=null);he<ue;)xe=h[he++],X.X[(506832829*xe&4294967295)>>>X.Mb]=xe;xe=ue,e(!(Re>>>(He=X).Xa)),h[xe]=He.X[Re],Re=!0}Re||e(M.h==V(M))}if(l.Pb&&M.h&&ue<b)e(l.m.h),l.a=5,l.m=l.wd,l.$=l.xd,0<l.s.ua&&z(l.s.vb,l.s.Wa);else{if(M.h)break e;N!=null&&N(l,C>I?I:C),l.a=0,l.$=ue-m}return 1}return l.a=3,0}function Gi(l){e(l!=null),l.vc=null,l.yc=null,l.Ya=null;var h=l.Wa;h!=null&&(h.X=null),l.vb=null,e(l!=null)}function ei(){var l=new Pg;return l==null?null:(l.a=0,l.xb=qy,Ur("Predictor","VP8LPredictors"),Ur("Predictor","VP8LPredictors_C"),Ur("PredictorAdd","VP8LPredictorsAdd"),Ur("PredictorAdd","VP8LPredictorsAdd_C"),rf=Ke,ti=We,Ai=Be,eo=Ln,Qi=St,Es=Tr,lc=_t,F.VP8LMapColor32b=Wl,F.VP8LMapColor8b=Mg,l)}function Ki(l,h,m,v,b){var I=1,N=[l],C=[h],L=v.m,M=v.s,Q=null,ue=0;e:for(;;){if(m)for(;I&&we(L,1);){var he=N,ee=C,ke=v,ve=1,X=ke.m,Z=ke.gc[ke.ab],Ce=we(X,2);if(ke.Oc&1<<Ce)I=0;else{switch(ke.Oc|=1<<Ce,Z.hc=Ce,Z.Ea=he[0],Z.nc=ee[0],Z.K=[null],++ke.ab,e(4>=ke.ab),Ce){case 0:case 1:Z.b=we(X,3)+2,ve=Ki(be(Z.Ea,Z.b),be(Z.nc,Z.b),0,ke,Z.K),Z.K=Z.K[0];break;case 3:var Re,xe=we(X,8)+1,He=16<xe?0:4<xe?1:2<xe?2:3;if(he[0]=be(Z.Ea,He),Z.b=He,Re=ve=Ki(xe,1,0,ke,Z.K)){var je,et=xe,qe=Z,Mt=1<<(8>>qe.b),qt=s(Mt);if(qt==null)Re=0;else{var Rt=qe.K[0],Et=qe.w;for(qt[0]=qe.K[0][0],je=1;je<1*et;++je)qt[je]=ie(Rt[Et+je],qt[je-1]);for(;je<4*Mt;++je)qt[je]=0;qe.K[0]=null,qe.K[0]=qt,Re=1}}ve=Re;break;case 2:break;default:e(0)}I=ve}}if(N=N[0],C=C[0],I&&we(L,1)&&!(I=1<=(ue=we(L,4))&&11>=ue)){v.a=3;break e}var Kt;if(Kt=I)t:{var Wt,yt,En,Rr=v,In=N,Pr=C,Vt=ue,zr=m,Hr=Rr.m,qn=Rr.s,Qn=[null],br=1,si=0,Xi=nN[Vt];n:for(;;){if(zr&&we(Hr,1)){var Vn=we(Hr,3)+2,xs=be(In,Vn),Yo=be(Pr,Vn),dc=xs*Yo;if(!Ki(xs,Yo,0,Rr,Qn))break n;for(Qn=Qn[0],qn.xc=Vn,Wt=0;Wt<dc;++Wt){var oo=Qn[Wt]>>8&65535;Qn[Wt]=oo,oo>=br&&(br=oo+1)}}if(Hr.h)break n;for(yt=0;5>yt;++yt){var dn=jy[yt];!yt&&0<Vt&&(dn+=1<<Vt),si<dn&&(si=dn)}var Hg=o(br*Xi,O),Qy=br,Xy=o(Qy,H);if(Xy==null)var gf=null;else e(65536>=Qy),gf=Xy;var Xl=s(si);if(gf==null||Xl==null||Hg==null){Rr.a=1;break n}var mf=Hg;for(Wt=En=0;Wt<br;++Wt){var Ni=gf[Wt],pc=Ni.G,gc=Ni.H,Jy=0,yf=1,Zy=0;for(yt=0;5>yt;++yt){dn=jy[yt],pc[yt]=mf,gc[yt]=En,!yt&&0<Vt&&(dn+=1<<Vt);i:{var vf,Wg=dn,_f=Rr,Jl=Xl,SN=mf,EN=En,Gg=0,ao=_f.m,IN=we(ao,1);if(i(Jl,0,0,Wg),IN){var NN=we(ao,1)+1,TN=we(ao,1),e5=we(ao,TN==0?1:8);Jl[e5]=1,NN==2&&(Jl[e5=we(ao,8)]=1);var wf=1}else{var t5=s(19),n5=we(ao,4)+4;if(19<n5){_f.a=3;var bf=0;break i}for(vf=0;vf<n5;++vf)t5[eN[vf]]=we(ao,3);var Kg=void 0,Zl=void 0,r5=_f,CN=t5,Af=Wg,i5=Jl,Yg=0,co=r5.m,s5=8,o5=o(128,O);r:for(;D(o5,0,7,CN,19);){if(we(co,1)){var xN=2+2*we(co,3);if((Kg=2+we(co,xN))>Af)break r}else Kg=Af;for(Zl=0;Zl<Af&&Kg--;){$(co);var a5=o5[0+(127&U(co))];P(co,co.u+a5.g);var mc=a5.value;if(16>mc)i5[Zl++]=mc,mc!=0&&(s5=mc);else{var kN=mc==16,c5=mc-16,LN=JI[c5],l5=we(co,XI[c5])+LN;if(Zl+l5>Af)break r;for(var RN=kN?s5:0;0<l5--;)i5[Zl++]=RN}}Yg=1;break r}Yg||(r5.a=3),wf=Yg}(wf=wf&&!ao.h)&&(Gg=D(SN,EN,8,Jl,Wg)),wf&&Gg!=0?bf=Gg:(_f.a=3,bf=0)}if(bf==0)break n;if(yf&&ZI[yt]==1&&(yf=mf[En].g==0),Jy+=mf[En].g,En+=bf,3>=yt){var eu,Qg=Xl[0];for(eu=1;eu<dn;++eu)Xl[eu]>Qg&&(Qg=Xl[eu]);Zy+=Qg}}if(Ni.nd=yf,Ni.Qb=0,yf&&(Ni.qb=(pc[3][gc[3]+0].value<<24|pc[1][gc[1]+0].value<<16|pc[2][gc[2]+0].value)>>>0,Jy==0&&256>pc[0][gc[0]+0].value&&(Ni.Qb=1,Ni.qb+=pc[0][gc[0]+0].value<<8)),Ni.jc=!Ni.Qb&&6>Zy,Ni.jc){var Sf,ks=Ni;for(Sf=0;Sf<kr;++Sf){var lo=Sf,uo=ks.pd[lo],Ef=ks.G[0][ks.H[0]+lo];256<=Ef.value?(uo.g=Ef.g+256,uo.value=Ef.value):(uo.g=0,uo.value=0,lo>>=Rn(Ef,8,uo),lo>>=Rn(ks.G[1][ks.H[1]+lo],16,uo),lo>>=Rn(ks.G[2][ks.H[2]+lo],0,uo),Rn(ks.G[3][ks.H[3]+lo],24,uo))}}}qn.vc=Qn,qn.Wb=br,qn.Ya=gf,qn.yc=Hg,Kt=1;break t}Kt=0}if(!(I=Kt)){v.a=3;break e}if(0<ue){if(M.ua=1<<ue,!re(M.Wa,ue)){v.a=1,I=0;break e}}else M.ua=0;var Xg=v,u5=N,PN=C,Jg=Xg.s,Zg=Jg.xc;if(Xg.c=u5,Xg.i=PN,Jg.md=be(u5,Zg),Jg.wc=Zg==0?-1:(1<<Zg)-1,m){v.xb=uN;break e}if((Q=s(N*C))==null){v.a=1,I=0;break e}I=(I=yi(v,Q,0,N,C,C,null))&&!L.h;break e}return I?(b!=null?b[0]=Q:(e(Q==null),e(m)),v.$=0,m||Gi(M)):Gi(M),I}function Vo(l,h){var m=l.c*l.i,v=m+h+16*h;return e(l.c<=h),l.V=s(v),l.V==null?(l.Ta=null,l.Ua=0,l.a=1,0):(l.Ta=l.V,l.Ua=l.Ba+m+h,1)}function za(l,h){var m=l.C,v=h-m,b=l.V,I=l.Ba+l.c*m;for(e(h<=l.l.o);0<v;){var N=16<v?16:v,C=l.l.ma,L=l.l.width,M=L*N,Q=C.ca,ue=C.tb+L*m,he=l.Ta,ee=l.Ua;qr(l,N,b,I),Ly(he,ee,Q,ue,M),gi(C,m,m+N,Q,ue,L),v-=N,b+=N*l.c,m+=N}e(m==h),l.C=l.Ma=h}function Ha(){this.ub=this.yd=this.td=this.Rb=0}function Wa(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ga(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Fh(){this.Yb=function(){var l=[];return function h(m,v,b){for(var I=b[v],N=0;N<I&&(m.push(b.length>v+1?[]:0),!(b.length<v+1));N++)h(m[N],v+1,b)}(l,0,[3,11]),l}()}function ug(){this.jb=s(3),this.Wc=a([4,8],Fh),this.Xc=a([4,17],Fh)}function hg(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ka(){this.ld=this.La=this.dd=this.tc=0}function Bh(){this.Na=this.la=0}function fg(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Nl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function dg(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ka),this.Y=0,this.ya=Array(new Nl),this.aa=0,this.l=new Ya}function jh(){this.y=s(16),this.f=s(8),this.ea=s(8)}function pg(){this.cb=this.a=0,this.sc="",this.m=new Fe,this.Od=new Ha,this.Kc=new Wa,this.ed=new hg,this.Qa=new Ga,this.Ic=this.$c=this.Aa=0,this.D=new dg,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Fe),this.ia=0,this.pb=o(4,fg),this.Pa=new ug,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new jh),this.Hd=0,this.rb=Array(new Bh),this.sb=0,this.wa=Array(new Ka),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Nl),this.L=this.aa=0,this.gd=a([4,2],Ka),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ya(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function gg(){var l=new pg;return l!=null&&(l.a=0,l.sc="OK",l.cb=0,l.Xb=0,Yl||(Yl=Vh)),l}function mn(l,h,m){return l.a==0&&(l.a=h,l.sc=m,l.cb=0),0}function Uh(l,h,m){return 3<=m&&l[h+0]==157&&l[h+1]==1&&l[h+2]==42}function qh(l,h){if(l==null)return 0;if(l.a=0,l.sc="OK",h==null)return mn(l,2,"null VP8Io passed to VP8GetHeaders()");var m=h.data,v=h.w,b=h.ha;if(4>b)return mn(l,7,"Truncated header.");var I=m[v+0]|m[v+1]<<8|m[v+2]<<16,N=l.Od;if(N.Rb=!(1&I),N.td=I>>1&7,N.yd=I>>4&1,N.ub=I>>5,3<N.td)return mn(l,3,"Incorrect keyframe parameters.");if(!N.yd)return mn(l,4,"Frame not displayable.");v+=3,b-=3;var C=l.Kc;if(N.Rb){if(7>b)return mn(l,7,"cannot parse picture header");if(!Uh(m,v,b))return mn(l,3,"Bad code word");C.c=16383&(m[v+4]<<8|m[v+3]),C.Td=m[v+4]>>6,C.i=16383&(m[v+6]<<8|m[v+5]),C.Ud=m[v+6]>>6,v+=7,b-=7,l.za=C.c+15>>4,l.Ub=C.i+15>>4,h.width=C.c,h.height=C.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((I=l.Pa).jb,0,255,I.jb.length),e((I=l.Qa)!=null),I.Cb=0,I.Bb=0,I.Fb=1,i(I.Zb,0,0,I.Zb.length),i(I.Lb,0,0,I.Lb)}if(N.ub>b)return mn(l,7,"bad partition length");ye(I=l.m,m,v,N.ub),v+=N.ub,b-=N.ub,N.Rb&&(C.Ld=J(I),C.Kd=J(I)),C=l.Qa;var L,M=l.Pa;if(e(I!=null),e(C!=null),C.Cb=J(I),C.Cb){if(C.Bb=J(I),J(I)){for(C.Fb=J(I),L=0;4>L;++L)C.Zb[L]=J(I)?de(I,7):0;for(L=0;4>L;++L)C.Lb[L]=J(I)?de(I,6):0}if(C.Bb)for(L=0;3>L;++L)M.jb[L]=J(I)?le(I,8):255}else C.Bb=0;if(I.Ka)return mn(l,3,"cannot parse segment header");if((C=l.ed).zd=J(I),C.Tb=le(I,6),C.wb=le(I,3),C.Pc=J(I),C.Pc&&J(I)){for(M=0;4>M;++M)J(I)&&(C.vd[M]=de(I,6));for(M=0;4>M;++M)J(I)&&(C.od[M]=de(I,6))}if(l.L=C.Tb==0?0:C.zd?1:2,I.Ka)return mn(l,3,"cannot parse filter header");var Q=b;if(b=L=v,v=L+Q,C=Q,l.Xb=(1<<le(l.m,2))-1,Q<3*(M=l.Xb))m=7;else{for(L+=3*M,C-=3*M,Q=0;Q<M;++Q){var ue=m[b+0]|m[b+1]<<8|m[b+2]<<16;ue>C&&(ue=C),ye(l.Jc[+Q],m,L,ue),L+=ue,C-=ue,b+=3}ye(l.Jc[+M],m,L,C),m=L<v?0:5}if(m!=0)return mn(l,m,"cannot parse partitions");for(m=le(L=l.m,7),b=J(L)?de(L,4):0,v=J(L)?de(L,4):0,C=J(L)?de(L,4):0,M=J(L)?de(L,4):0,L=J(L)?de(L,4):0,Q=l.Qa,ue=0;4>ue;++ue){if(Q.Cb){var he=Q.Zb[ue];Q.Fb||(he+=m)}else{if(0<ue){l.pb[ue]=l.pb[0];continue}he=m}var ee=l.pb[ue];ee.Sc[0]=Vg[Vr(he+b,127)],ee.Sc[1]=$g[Vr(he+0,127)],ee.Eb[0]=2*Vg[Vr(he+v,127)],ee.Eb[1]=101581*$g[Vr(he+C,127)]>>16,8>ee.Eb[1]&&(ee.Eb[1]=8),ee.Qc[0]=Vg[Vr(he+M,117)],ee.Qc[1]=$g[Vr(he+L,127)],ee.lc=he+L}if(!N.Rb)return mn(l,4,"Not a key frame.");for(J(I),N=l.Pa,m=0;4>m;++m){for(b=0;8>b;++b)for(v=0;3>v;++v)for(C=0;11>C;++C)M=se(I,cN[m][b][v][C])?le(I,8):oN[m][b][v][C],N.Wc[m][b].Yb[v][C]=M;for(b=0;17>b;++b)N.Xc[m][b]=N.Wc[m][lN[b]]}return l.kc=J(I),l.kc&&(l.Bd=le(I,8)),l.cb=1}function Vh(l,h,m,v,b,I,N){var C=h[b].Yb[m];for(m=0;16>b;++b){if(!se(l,C[m+0]))return b;for(;!se(l,C[m+1]);)if(C=h[++b].Yb[0],m=0,b==16)return 16;var L=h[b+1].Yb;if(se(l,C[m+2])){var M=l,Q=0;if(se(M,(he=C)[(ue=m)+3]))if(se(M,he[ue+6])){for(C=0,ue=2*(Q=se(M,he[ue+8]))+(he=se(M,he[ue+9+Q])),Q=0,he=iN[ue];he[C];++C)Q+=Q+se(M,he[C]);Q+=3+(8<<ue)}else se(M,he[ue+7])?(Q=7+2*se(M,165),Q+=se(M,145)):Q=5+se(M,159);else Q=se(M,he[ue+4])?3+se(M,he[ue+5]):2;C=L[2]}else Q=1,C=L[1];L=N+sN[b],0>(M=l).b&&W(M);var ue,he=M.b,ee=(ue=M.Ca>>1)-(M.I>>he)>>31;--M.b,M.Ca+=ee,M.Ca|=1,M.I-=(ue+1&ee)<<he,I[L]=((Q^ee)-ee)*v[(0<b)+0]}return 16}function Tl(l){var h=l.rb[l.sb-1];h.la=0,h.Na=0,i(l.zc,0,0,l.zc.length),l.ja=0}function mg(l,h){if(l==null)return 0;if(h==null)return mn(l,2,"NULL VP8Io parameter in VP8Decode().");if(!l.cb&&!qh(l,h))return 0;if(e(l.cb),h.ac==null||h.ac(h)){h.ob&&(l.L=0);var m=pf[l.L];if(l.L==2?(l.yb=0,l.zb=0):(l.yb=h.v-m>>4,l.zb=h.j-m>>4,0>l.yb&&(l.yb=0),0>l.zb&&(l.zb=0)),l.Va=h.o+15+m>>4,l.Hb=h.va+15+m>>4,l.Hb>l.za&&(l.Hb=l.za),l.Va>l.Ub&&(l.Va=l.Ub),0<l.L){var v=l.ed;for(m=0;4>m;++m){var b;if(l.Qa.Cb){var I=l.Qa.Lb[m];l.Qa.Fb||(I+=v.Tb)}else I=v.Tb;for(b=0;1>=b;++b){var N=l.gd[m][b],C=I;if(v.Pc&&(C+=v.vd[0],b&&(C+=v.od[0])),0<(C=0>C?0:63<C?63:C)){var L=C;0<v.wb&&(L=4<v.wb?L>>2:L>>1)>9-v.wb&&(L=9-v.wb),1>L&&(L=1),N.dd=L,N.tc=2*C+L,N.ld=40<=C?2:15<=C?1:0}else N.tc=0;N.La=b}}}m=0}else mn(l,6,"Frame setup failed"),m=l.a;if(m=m==0){if(m){l.$c=0,0<l.Aa||(l.Ic=AN);e:{m=l.Ic,v=4*(L=l.za);var M=32*L,Q=L+1,ue=0<l.L?L*(0<l.Aa?2:1):0,he=(l.Aa==2?2:1)*L;if((N=v+832+(b=3*(16*m+pf[l.L])/2*M)+(I=l.Fa!=null&&0<l.Fa.length?l.Kc.c*l.Kc.i:0))!=N)m=0;else{if(N>l.Vb){if(l.Vb=0,l.Ec=s(N),l.Fc=0,l.Ec==null){m=mn(l,1,"no memory during frame initialization.");break e}l.Vb=N}N=l.Ec,C=l.Fc,l.Ac=N,l.Bc=C,C+=v,l.Gd=o(M,jh),l.Hd=0,l.rb=o(Q+1,Bh),l.sb=1,l.wa=ue?o(ue,Ka):null,l.Y=0,l.D.Nb=0,l.D.wa=l.wa,l.D.Y=l.Y,0<l.Aa&&(l.D.Y+=L),e(!0),l.oc=N,l.pc=C,C+=832,l.ya=o(he,Nl),l.aa=0,l.D.ya=l.ya,l.D.aa=l.aa,l.Aa==2&&(l.D.aa+=L),l.R=16*L,l.B=8*L,L=(M=pf[l.L])*l.R,M=M/2*l.B,l.sa=N,l.ta=C+L,l.qa=l.sa,l.ra=l.ta+16*m*l.R+M,l.Ha=l.qa,l.Ia=l.ra+8*m*l.B+M,l.$c=0,C+=b,l.mb=I?N:null,l.nb=I?C:null,e(C+I<=l.Fc+l.Vb),Tl(l),i(l.Ac,l.Bc,0,v),m=1}}if(m){if(h.ka=0,h.y=l.sa,h.O=l.ta,h.f=l.qa,h.N=l.ra,h.ea=l.Ha,h.Vd=l.Ia,h.fa=l.R,h.Rc=l.B,h.F=null,h.J=0,!My){for(m=-255;255>=m;++m)Ry[255+m]=0>m?-m:m;for(m=-1020;1020>=m;++m)Py[1020+m]=-128>m?-128:127<m?127:m;for(m=-112;112>=m;++m)Oy[112+m]=-16>m?-16:15<m?15:m;for(m=-255;510>=m;++m)Dy[255+m]=0>m?0:255<m?255:m;My=1}Si=_g,uc=yg,to=zh,Ei=vg,Is=Hh,Gl=$h,Go=Pl,hc=Ho,Ko=Rg,no=Ol,Kl=Lg,ni=tc,Ns=Dl,Qt=ef,Xt=Zh,yn=As,Pn=Qs,Ts=kg,Ii[0]=Yi,Ii[1]=wg,Ii[2]=Eg,Ii[3]=Ig,Ii[4]=Kh,Ii[5]=Za,Ii[6]=Yh,Ii[7]=kl,Ii[8]=Tg,Ii[9]=Ng,io[0]=Wh,io[1]=Ag,io[2]=bs,io[3]=Xa,io[4]=tr,io[5]=Sg,io[6]=Gh,Cs[0]=Ys,Cs[1]=bg,Cs[2]=Cg,Cs[3]=Ll,Cs[4]=zo,Cs[5]=xg,Cs[6]=Rl,m=1}else m=0}m&&(m=function(ee,ke){for(ee.M=0;ee.M<ee.Va;++ee.M){var ve,X=ee.Jc[ee.M&ee.Xb],Z=ee.m,Ce=ee;for(ve=0;ve<Ce.za;++ve){var Re=Z,xe=Ce,He=xe.Ac,je=xe.Bc+4*ve,et=xe.zc,qe=xe.ya[xe.aa+ve];if(xe.Qa.Bb?qe.$b=se(Re,xe.Pa.jb[0])?2+se(Re,xe.Pa.jb[2]):se(Re,xe.Pa.jb[1]):qe.$b=0,xe.kc&&(qe.Ad=se(Re,xe.Bd)),qe.Za=!se(Re,145)+0,qe.Za){var Mt=qe.Ob,qt=0;for(xe=0;4>xe;++xe){var Rt,Et=et[0+xe];for(Rt=0;4>Rt;++Rt){Et=aN[He[je+Rt]][Et];for(var Kt=Uy[se(Re,Et[0])];0<Kt;)Kt=Uy[2*Kt+se(Re,Et[Kt])];Et=-Kt,He[je+Rt]=Et}r(Mt,qt,He,je,4),qt+=4,et[0+xe]=Et}}else Et=se(Re,156)?se(Re,128)?1:3:se(Re,163)?2:0,qe.Ob[0]=Et,i(He,je,Et,4),i(et,0,Et,4);qe.Dd=se(Re,142)?se(Re,114)?se(Re,183)?1:3:2:0}if(Ce.m.Ka)return mn(ee,7,"Premature end-of-partition0 encountered.");for(;ee.ja<ee.za;++ee.ja){if(Ce=X,Re=(Z=ee).rb[Z.sb-1],He=Z.rb[Z.sb+Z.ja],ve=Z.ya[Z.aa+Z.ja],je=Z.kc?ve.Ad:0)Re.la=He.la=0,ve.Za||(Re.Na=He.Na=0),ve.Hc=0,ve.Gc=0,ve.ia=0;else{var Wt,yt;if(Re=He,He=Ce,je=Z.Pa.Xc,et=Z.ya[Z.aa+Z.ja],qe=Z.pb[et.$b],xe=et.ad,Mt=0,qt=Z.rb[Z.sb-1],Et=Rt=0,i(xe,Mt,0,384),et.Za)var En=0,Rr=je[3];else{Kt=s(16);var In=Re.Na+qt.Na;if(In=Yl(He,je[1],In,qe.Eb,0,Kt,0),Re.Na=qt.Na=(0<In)+0,1<In)Si(Kt,0,xe,Mt);else{var Pr=Kt[0]+3>>3;for(Kt=0;256>Kt;Kt+=16)xe[Mt+Kt]=Pr}En=1,Rr=je[0]}var Vt=15&Re.la,zr=15&qt.la;for(Kt=0;4>Kt;++Kt){var Hr=1&zr;for(Pr=yt=0;4>Pr;++Pr)Vt=Vt>>1|(Hr=(In=Yl(He,Rr,In=Hr+(1&Vt),qe.Sc,En,xe,Mt))>En)<<7,yt=yt<<2|(3<In?3:1<In?2:xe[Mt+0]!=0),Mt+=16;Vt>>=4,zr=zr>>1|Hr<<7,Rt=(Rt<<8|yt)>>>0}for(Rr=Vt,En=zr>>4,Wt=0;4>Wt;Wt+=2){for(yt=0,Vt=Re.la>>4+Wt,zr=qt.la>>4+Wt,Kt=0;2>Kt;++Kt){for(Hr=1&zr,Pr=0;2>Pr;++Pr)In=Hr+(1&Vt),Vt=Vt>>1|(Hr=0<(In=Yl(He,je[2],In,qe.Qc,0,xe,Mt)))<<3,yt=yt<<2|(3<In?3:1<In?2:xe[Mt+0]!=0),Mt+=16;Vt>>=2,zr=zr>>1|Hr<<5}Et|=yt<<4*Wt,Rr|=Vt<<4<<Wt,En|=(240&zr)<<Wt}Re.la=Rr,qt.la=En,et.Hc=Rt,et.Gc=Et,et.ia=43690&Et?0:qe.ia,je=!(Rt|Et)}if(0<Z.L&&(Z.wa[Z.Y+Z.ja]=Z.gd[ve.$b][ve.Za],Z.wa[Z.Y+Z.ja].La|=!je),Ce.Ka)return mn(ee,7,"Premature end-of-file encountered.")}if(Tl(ee),Z=ke,Ce=1,ve=(X=ee).D,Re=0<X.L&&X.M>=X.zb&&X.M<=X.Va,X.Aa==0)e:{if(ve.M=X.M,ve.uc=Re,ql(X,ve),Ce=1,ve=(yt=X.D).Nb,Re=(Et=pf[X.L])*X.R,He=Et/2*X.B,Kt=16*ve*X.R,Pr=8*ve*X.B,je=X.sa,et=X.ta-Re+Kt,qe=X.qa,xe=X.ra-He+Pr,Mt=X.Ha,qt=X.Ia-He+Pr,zr=(Vt=yt.M)==0,Rt=Vt>=X.Va-1,X.Aa==2&&ql(X,yt),yt.uc)for(Hr=(In=X).D.M,e(In.D.uc),yt=In.yb;yt<In.Hb;++yt){En=yt,Rr=Hr;var qn=(Qn=(dn=In).D).Nb;Wt=dn.R;var Qn=Qn.wa[Qn.Y+En],br=dn.sa,si=dn.ta+16*qn*Wt+16*En,Xi=Qn.dd,Vn=Qn.tc;if(Vn!=0)if(e(3<=Vn),dn.L==1)0<En&&yn(br,si,Wt,Vn+4),Qn.La&&Ts(br,si,Wt,Vn),0<Rr&&Xt(br,si,Wt,Vn+4),Qn.La&&Pn(br,si,Wt,Vn);else{var xs=dn.B,Yo=dn.qa,dc=dn.ra+8*qn*xs+8*En,oo=dn.Ha,dn=dn.Ia+8*qn*xs+8*En;qn=Qn.ld,0<En&&(hc(br,si,Wt,Vn+4,Xi,qn),no(Yo,dc,oo,dn,xs,Vn+4,Xi,qn)),Qn.La&&(ni(br,si,Wt,Vn,Xi,qn),Qt(Yo,dc,oo,dn,xs,Vn,Xi,qn)),0<Rr&&(Go(br,si,Wt,Vn+4,Xi,qn),Ko(Yo,dc,oo,dn,xs,Vn+4,Xi,qn)),Qn.La&&(Kl(br,si,Wt,Vn,Xi,qn),Ns(Yo,dc,oo,dn,xs,Vn,Xi,qn))}}if(X.ia&&alert("todo:DitherRow"),Z.put!=null){if(yt=16*Vt,Vt=16*(Vt+1),zr?(Z.y=X.sa,Z.O=X.ta+Kt,Z.f=X.qa,Z.N=X.ra+Pr,Z.ea=X.Ha,Z.W=X.Ia+Pr):(yt-=Et,Z.y=je,Z.O=et,Z.f=qe,Z.N=xe,Z.ea=Mt,Z.W=qt),Rt||(Vt-=Et),Vt>Z.o&&(Vt=Z.o),Z.F=null,Z.J=null,X.Fa!=null&&0<X.Fa.length&&yt<Vt&&(Z.J=jl(X,Z,yt,Vt-yt),Z.F=X.mb,Z.F==null&&Z.F.length==0)){Ce=mn(X,3,"Could not decode alpha data.");break e}yt<Z.j&&(Et=Z.j-yt,yt=Z.j,e(!(1&Et)),Z.O+=X.R*Et,Z.N+=X.B*(Et>>1),Z.W+=X.B*(Et>>1),Z.F!=null&&(Z.J+=Z.width*Et)),yt<Vt&&(Z.O+=Z.v,Z.N+=Z.v>>1,Z.W+=Z.v>>1,Z.F!=null&&(Z.J+=Z.v),Z.ka=yt-Z.j,Z.U=Z.va-Z.v,Z.T=Vt-yt,Ce=Z.put(Z))}ve+1!=X.Ic||Rt||(r(X.sa,X.ta-Re,je,et+16*X.R,Re),r(X.qa,X.ra-He,qe,xe+8*X.B,He),r(X.Ha,X.Ia-He,Mt,qt+8*X.B,He))}if(!Ce)return mn(ee,6,"Output aborted.")}return 1}(l,h)),h.bc!=null&&h.bc(h),m&=1}return m?(l.cb=0,m):0}function vi(l,h,m,v,b){b=l[h+m+32*v]+(b>>3),l[h+m+32*v]=-256&b?0>b?0:255:b}function Qa(l,h,m,v,b,I){vi(l,h,0,m,v+b),vi(l,h,1,m,v+I),vi(l,h,2,m,v-I),vi(l,h,3,m,v-b)}function xr(l){return(20091*l>>16)+l}function Cl(l,h,m,v){var b,I=0,N=s(16);for(b=0;4>b;++b){var C=l[h+0]+l[h+8],L=l[h+0]-l[h+8],M=(35468*l[h+4]>>16)-xr(l[h+12]),Q=xr(l[h+4])+(35468*l[h+12]>>16);N[I+0]=C+Q,N[I+1]=L+M,N[I+2]=L-M,N[I+3]=C-Q,I+=4,h++}for(b=I=0;4>b;++b)C=(l=N[I+0]+4)+N[I+8],L=l-N[I+8],M=(35468*N[I+4]>>16)-xr(N[I+12]),vi(m,v,0,0,C+(Q=xr(N[I+4])+(35468*N[I+12]>>16))),vi(m,v,1,0,L+M),vi(m,v,2,0,L-M),vi(m,v,3,0,C-Q),I++,v+=32}function $h(l,h,m,v){var b=l[h+0]+4,I=35468*l[h+4]>>16,N=xr(l[h+4]),C=35468*l[h+1]>>16;Qa(m,v,0,b+N,l=xr(l[h+1]),C),Qa(m,v,1,b+I,l,C),Qa(m,v,2,b-I,l,C),Qa(m,v,3,b-N,l,C)}function yg(l,h,m,v,b){Cl(l,h,m,v),b&&Cl(l,h+16,m,v+4)}function zh(l,h,m,v){uc(l,h+0,m,v,1),uc(l,h+32,m,v+128,1)}function vg(l,h,m,v){var b;for(l=l[h+0]+4,b=0;4>b;++b)for(h=0;4>h;++h)vi(m,v,h,b,l)}function Hh(l,h,m,v){l[h+0]&&Ei(l,h+0,m,v),l[h+16]&&Ei(l,h+16,m,v+4),l[h+32]&&Ei(l,h+32,m,v+128),l[h+48]&&Ei(l,h+48,m,v+128+4)}function _g(l,h,m,v){var b,I=s(16);for(b=0;4>b;++b){var N=l[h+0+b]+l[h+12+b],C=l[h+4+b]+l[h+8+b],L=l[h+4+b]-l[h+8+b],M=l[h+0+b]-l[h+12+b];I[0+b]=N+C,I[8+b]=N-C,I[4+b]=M+L,I[12+b]=M-L}for(b=0;4>b;++b)N=(l=I[0+4*b]+3)+I[3+4*b],C=I[1+4*b]+I[2+4*b],L=I[1+4*b]-I[2+4*b],M=l-I[3+4*b],m[v+0]=N+C>>3,m[v+16]=M+L>>3,m[v+32]=N-C>>3,m[v+48]=M-L>>3,v+=64}function xl(l,h,m){var v,b=h-32,I=$r,N=255-l[b-1];for(v=0;v<m;++v){var C,L=I,M=N+l[h-1];for(C=0;C<m;++C)l[h+C]=L[M+l[b+C]];h+=32}}function wg(l,h){xl(l,h,4)}function bg(l,h){xl(l,h,8)}function Ag(l,h){xl(l,h,16)}function bs(l,h){var m;for(m=0;16>m;++m)r(l,h+32*m,l,h-32,16)}function Xa(l,h){var m;for(m=16;0<m;--m)i(l,h,l[h-1],16),h+=32}function Ja(l,h,m){var v;for(v=0;16>v;++v)i(h,m+32*v,l,16)}function Wh(l,h){var m,v=16;for(m=0;16>m;++m)v+=l[h-1+32*m]+l[h+m-32];Ja(v>>5,l,h)}function tr(l,h){var m,v=8;for(m=0;16>m;++m)v+=l[h-1+32*m];Ja(v>>4,l,h)}function Sg(l,h){var m,v=8;for(m=0;16>m;++m)v+=l[h+m-32];Ja(v>>4,l,h)}function Gh(l,h){Ja(128,l,h)}function ut(l,h,m){return l+2*h+m+2>>2}function Eg(l,h){var m,v=h-32;for(v=new Uint8Array([ut(l[v-1],l[v+0],l[v+1]),ut(l[v+0],l[v+1],l[v+2]),ut(l[v+1],l[v+2],l[v+3]),ut(l[v+2],l[v+3],l[v+4])]),m=0;4>m;++m)r(l,h+32*m,v,0,v.length)}function Ig(l,h){var m=l[h-1],v=l[h-1+32],b=l[h-1+64],I=l[h-1+96];Le(l,h+0,16843009*ut(l[h-1-32],m,v)),Le(l,h+32,16843009*ut(m,v,b)),Le(l,h+64,16843009*ut(v,b,I)),Le(l,h+96,16843009*ut(b,I,I))}function Yi(l,h){var m,v=4;for(m=0;4>m;++m)v+=l[h+m-32]+l[h-1+32*m];for(v>>=3,m=0;4>m;++m)i(l,h+32*m,v,4)}function Kh(l,h){var m=l[h-1+0],v=l[h-1+32],b=l[h-1+64],I=l[h-1-32],N=l[h+0-32],C=l[h+1-32],L=l[h+2-32],M=l[h+3-32];l[h+0+96]=ut(v,b,l[h-1+96]),l[h+1+96]=l[h+0+64]=ut(m,v,b),l[h+2+96]=l[h+1+64]=l[h+0+32]=ut(I,m,v),l[h+3+96]=l[h+2+64]=l[h+1+32]=l[h+0+0]=ut(N,I,m),l[h+3+64]=l[h+2+32]=l[h+1+0]=ut(C,N,I),l[h+3+32]=l[h+2+0]=ut(L,C,N),l[h+3+0]=ut(M,L,C)}function Yh(l,h){var m=l[h+1-32],v=l[h+2-32],b=l[h+3-32],I=l[h+4-32],N=l[h+5-32],C=l[h+6-32],L=l[h+7-32];l[h+0+0]=ut(l[h+0-32],m,v),l[h+1+0]=l[h+0+32]=ut(m,v,b),l[h+2+0]=l[h+1+32]=l[h+0+64]=ut(v,b,I),l[h+3+0]=l[h+2+32]=l[h+1+64]=l[h+0+96]=ut(b,I,N),l[h+3+32]=l[h+2+64]=l[h+1+96]=ut(I,N,C),l[h+3+64]=l[h+2+96]=ut(N,C,L),l[h+3+96]=ut(C,L,L)}function Za(l,h){var m=l[h-1+0],v=l[h-1+32],b=l[h-1+64],I=l[h-1-32],N=l[h+0-32],C=l[h+1-32],L=l[h+2-32],M=l[h+3-32];l[h+0+0]=l[h+1+64]=I+N+1>>1,l[h+1+0]=l[h+2+64]=N+C+1>>1,l[h+2+0]=l[h+3+64]=C+L+1>>1,l[h+3+0]=L+M+1>>1,l[h+0+96]=ut(b,v,m),l[h+0+64]=ut(v,m,I),l[h+0+32]=l[h+1+96]=ut(m,I,N),l[h+1+32]=l[h+2+96]=ut(I,N,C),l[h+2+32]=l[h+3+96]=ut(N,C,L),l[h+3+32]=ut(C,L,M)}function kl(l,h){var m=l[h+0-32],v=l[h+1-32],b=l[h+2-32],I=l[h+3-32],N=l[h+4-32],C=l[h+5-32],L=l[h+6-32],M=l[h+7-32];l[h+0+0]=m+v+1>>1,l[h+1+0]=l[h+0+64]=v+b+1>>1,l[h+2+0]=l[h+1+64]=b+I+1>>1,l[h+3+0]=l[h+2+64]=I+N+1>>1,l[h+0+32]=ut(m,v,b),l[h+1+32]=l[h+0+96]=ut(v,b,I),l[h+2+32]=l[h+1+96]=ut(b,I,N),l[h+3+32]=l[h+2+96]=ut(I,N,C),l[h+3+64]=ut(N,C,L),l[h+3+96]=ut(C,L,M)}function Ng(l,h){var m=l[h-1+0],v=l[h-1+32],b=l[h-1+64],I=l[h-1+96];l[h+0+0]=m+v+1>>1,l[h+2+0]=l[h+0+32]=v+b+1>>1,l[h+2+32]=l[h+0+64]=b+I+1>>1,l[h+1+0]=ut(m,v,b),l[h+3+0]=l[h+1+32]=ut(v,b,I),l[h+3+32]=l[h+1+64]=ut(b,I,I),l[h+3+64]=l[h+2+64]=l[h+0+96]=l[h+1+96]=l[h+2+96]=l[h+3+96]=I}function Tg(l,h){var m=l[h-1+0],v=l[h-1+32],b=l[h-1+64],I=l[h-1+96],N=l[h-1-32],C=l[h+0-32],L=l[h+1-32],M=l[h+2-32];l[h+0+0]=l[h+2+32]=m+N+1>>1,l[h+0+32]=l[h+2+64]=v+m+1>>1,l[h+0+64]=l[h+2+96]=b+v+1>>1,l[h+0+96]=I+b+1>>1,l[h+3+0]=ut(C,L,M),l[h+2+0]=ut(N,C,L),l[h+1+0]=l[h+3+32]=ut(m,N,C),l[h+1+32]=l[h+3+64]=ut(v,m,N),l[h+1+64]=l[h+3+96]=ut(b,v,m),l[h+1+96]=ut(I,b,v)}function Cg(l,h){var m;for(m=0;8>m;++m)r(l,h+32*m,l,h-32,8)}function Ll(l,h){var m;for(m=0;8>m;++m)i(l,h,l[h-1],8),h+=32}function $o(l,h,m){var v;for(v=0;8>v;++v)i(h,m+32*v,l,8)}function Ys(l,h){var m,v=8;for(m=0;8>m;++m)v+=l[h+m-32]+l[h-1+32*m];$o(v>>4,l,h)}function xg(l,h){var m,v=4;for(m=0;8>m;++m)v+=l[h+m-32];$o(v>>3,l,h)}function zo(l,h){var m,v=4;for(m=0;8>m;++m)v+=l[h-1+32*m];$o(v>>3,l,h)}function Rl(l,h){$o(128,l,h)}function ec(l,h,m){var v=l[h-m],b=l[h+0],I=3*(b-v)+Fg[1020+l[h-2*m]-l[h+m]],N=of[112+(I+4>>3)];l[h-m]=$r[255+v+of[112+(I+3>>3)]],l[h+0]=$r[255+b-N]}function Qh(l,h,m,v){var b=l[h+0],I=l[h+m];return ri[255+l[h-2*m]-l[h-m]]>v||ri[255+I-b]>v}function Xh(l,h,m,v){return 4*ri[255+l[h-m]-l[h+0]]+ri[255+l[h-2*m]-l[h+m]]<=v}function Jh(l,h,m,v,b){var I=l[h-3*m],N=l[h-2*m],C=l[h-m],L=l[h+0],M=l[h+m],Q=l[h+2*m],ue=l[h+3*m];return 4*ri[255+C-L]+ri[255+N-M]>v?0:ri[255+l[h-4*m]-I]<=b&&ri[255+I-N]<=b&&ri[255+N-C]<=b&&ri[255+ue-Q]<=b&&ri[255+Q-M]<=b&&ri[255+M-L]<=b}function Zh(l,h,m,v){var b=2*v+1;for(v=0;16>v;++v)Xh(l,h+v,m,b)&&ec(l,h+v,m)}function As(l,h,m,v){var b=2*v+1;for(v=0;16>v;++v)Xh(l,h+v*m,1,b)&&ec(l,h+v*m,1)}function Qs(l,h,m,v){var b;for(b=3;0<b;--b)Zh(l,h+=4*m,m,v)}function kg(l,h,m,v){var b;for(b=3;0<b;--b)As(l,h+=4,m,v)}function Xs(l,h,m,v,b,I,N,C){for(I=2*I+1;0<b--;){if(Jh(l,h,m,I,N))if(Qh(l,h,m,C))ec(l,h,m);else{var L=l,M=h,Q=m,ue=L[M-2*Q],he=L[M-Q],ee=L[M+0],ke=L[M+Q],ve=L[M+2*Q],X=27*(Ce=Fg[1020+3*(ee-he)+Fg[1020+ue-ke]])+63>>7,Z=18*Ce+63>>7,Ce=9*Ce+63>>7;L[M-3*Q]=$r[255+L[M-3*Q]+Ce],L[M-2*Q]=$r[255+ue+Z],L[M-Q]=$r[255+he+X],L[M+0]=$r[255+ee-X],L[M+Q]=$r[255+ke-Z],L[M+2*Q]=$r[255+ve-Ce]}h+=v}}function _i(l,h,m,v,b,I,N,C){for(I=2*I+1;0<b--;){if(Jh(l,h,m,I,N))if(Qh(l,h,m,C))ec(l,h,m);else{var L=l,M=h,Q=m,ue=L[M-Q],he=L[M+0],ee=L[M+Q],ke=of[112+((ve=3*(he-ue))+4>>3)],ve=of[112+(ve+3>>3)],X=ke+1>>1;L[M-2*Q]=$r[255+L[M-2*Q]+X],L[M-Q]=$r[255+ue+ve],L[M+0]=$r[255+he-ke],L[M+Q]=$r[255+ee-X]}h+=v}}function Pl(l,h,m,v,b,I){Xs(l,h,m,1,16,v,b,I)}function Ho(l,h,m,v,b,I){Xs(l,h,1,m,16,v,b,I)}function Lg(l,h,m,v,b,I){var N;for(N=3;0<N;--N)_i(l,h+=4*m,m,1,16,v,b,I)}function tc(l,h,m,v,b,I){var N;for(N=3;0<N;--N)_i(l,h+=4,1,m,16,v,b,I)}function Rg(l,h,m,v,b,I,N,C){Xs(l,h,b,1,8,I,N,C),Xs(m,v,b,1,8,I,N,C)}function Ol(l,h,m,v,b,I,N,C){Xs(l,h,1,b,8,I,N,C),Xs(m,v,1,b,8,I,N,C)}function Dl(l,h,m,v,b,I,N,C){_i(l,h+4*b,b,1,8,I,N,C),_i(m,v+4*b,b,1,8,I,N,C)}function ef(l,h,m,v,b,I,N,C){_i(l,h+4,1,b,8,I,N,C),_i(m,v+4,1,b,8,I,N,C)}function nc(){this.ba=new di,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new hn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ml(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Fl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function tf(){this.ua=0,this.Wa=new x,this.vb=new x,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new O}function Pg(){this.xb=this.a=0,this.l=new Ya,this.ca=new di,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new tf,this.ab=0,this.gc=o(4,Fl),this.Oc=0}function rc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ya,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Wo(l,h,m,v,b,I,N){for(l=l==null?0:l[h+0],h=0;h<N;++h)b[I+h]=l+m[v+h]&255,l=b[I+h]}function Bl(l,h,m,v,b,I,N){var C;if(l==null)Wo(null,null,m,v,b,I,N);else for(C=0;C<N;++C)b[I+C]=l[h+C]+m[v+C]&255}function Js(l,h,m,v,b,I,N){if(l==null)Wo(null,null,m,v,b,I,N);else{var C,L=l[h+0],M=L,Q=L;for(C=0;C<N;++C)M=Q+(L=l[h+C])-M,Q=m[v+C]+(-256&M?0>M?0:255:M)&255,M=L,b[I+C]=Q}}function jl(l,h,m,v){var b=h.width,I=h.o;if(e(l!=null&&h!=null),0>m||0>=v||m+v>I)return null;if(!l.Cc){if(l.ga==null){var N;if(l.ga=new rc,(N=l.ga==null)||(N=h.width*h.o,e(l.Gb.length==0),l.Gb=s(N),l.Uc=0,l.Gb==null?N=0:(l.mb=l.Gb,l.nb=l.Uc,l.rc=null,N=1),N=!N),!N){N=l.ga;var C=l.Fa,L=l.P,M=l.qc,Q=l.mb,ue=l.nb,he=L+1,ee=M-1,ke=N.l;if(e(C!=null&&Q!=null&&h!=null),so[0]=null,so[1]=Wo,so[2]=Bl,so[3]=Js,N.ca=Q,N.tb=ue,N.c=h.width,N.i=h.height,e(0<N.c&&0<N.i),1>=M)h=0;else if(N.$a=C[L+0]>>0&3,N.Z=C[L+0]>>2&3,N.Lc=C[L+0]>>4&3,L=C[L+0]>>6&3,0>N.$a||1<N.$a||4<=N.Z||1<N.Lc||L)h=0;else if(ke.put=zi,ke.ac=Yn,ke.bc=Hi,ke.ma=N,ke.width=h.width,ke.height=h.height,ke.Da=h.Da,ke.v=h.v,ke.va=h.va,ke.j=h.j,ke.o=h.o,N.$a)e:{e(N.$a==1),h=ei();t:for(;;){if(h==null){h=0;break e}if(e(N!=null),N.mc=h,h.c=N.c,h.i=N.i,h.l=N.l,h.l.ma=N,h.l.width=N.c,h.l.height=N.i,h.a=0,ne(h.m,C,he,ee),!Ki(N.c,N.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&ws(h.s)?(N.ic=1,C=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(C),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(N.ic=0,h=Vo(h,N.c)),!h))break t;h=1;break e}N.mc=null,h=0}else h=ee>=N.c*N.i;N=!h}if(N)return null;l.ga.Lc!=1?l.Ga=0:v=I-m}e(l.ga!=null),e(m+v<=I);e:{if(h=(C=l.ga).c,I=C.l.o,C.$a==0){if(he=l.rc,ee=l.Vc,ke=l.Fa,L=l.P+1+m*h,M=l.mb,Q=l.nb+m*h,e(L<=l.P+l.qc),C.Z!=0)for(e(so[C.Z]!=null),N=0;N<v;++N)so[C.Z](he,ee,ke,L,M,Q,h),he=M,ee=Q,Q+=h,L+=h;else for(N=0;N<v;++N)r(M,Q,ke,L,h),he=M,ee=Q,Q+=h,L+=h;l.rc=he,l.Vc=ee}else{if(e(C.mc!=null),h=m+v,e((N=C.mc)!=null),e(h<=N.i),N.C>=h)h=1;else if(C.ic||ae(),C.ic){C=N.V,he=N.Ba,ee=N.c;var ve=N.i,X=(ke=1,L=N.$/ee,M=N.$%ee,Q=N.m,ue=N.s,N.$),Z=ee*ve,Ce=ee*h,Re=ue.wc,xe=X<Ce?An(ue,M,L):null;e(X<=Z),e(h<=ve),e(ws(ue));t:for(;;){for(;!Q.h&&X<Ce;){if(M&Re||(xe=An(ue,M,L)),e(xe!=null),$(Q),256>(ve=Cr(xe.G[0],xe.H[0],Q)))C[he+X]=ve,++X,++M>=ee&&(M=0,++L<=h&&!(L%16)&&mi(N,L));else{if(!(280>ve)){ke=0;break t}ve=pi(ve-256,Q);var He,je=Cr(xe.G[4],xe.H[4],Q);if($(Q),!(X>=(je=Wi(ee,je=pi(je,Q)))&&Z-X>=ve)){ke=0;break t}for(He=0;He<ve;++He)C[he+X+He]=C[he+X+He-je];for(X+=ve,M+=ve;M>=ee;)M-=ee,++L<=h&&!(L%16)&&mi(N,L);X<Ce&&M&Re&&(xe=An(ue,M,L))}e(Q.h==V(Q))}mi(N,L>h?h:L);break t}!ke||Q.h&&X<Z?(ke=0,N.a=Q.h?5:3):N.$=X,h=ke}else h=yi(N,N.V,N.Ba,N.c,N.i,h,za);if(!h){v=0;break e}}m+v>=I&&(l.Cc=1),v=1}if(!v)return null;if(l.Cc&&((v=l.ga)!=null&&(v.mc=null),l.ga=null,0<l.Ga))return alert("todo:WebPDequantizeLevels"),null}return l.nb+m*b}function p(l,h,m,v,b,I){for(;0<b--;){var N,C=l,L=h+(m?1:0),M=l,Q=h+(m?0:3);for(N=0;N<v;++N){var ue=M[Q+4*N];ue!=255&&(ue*=32897,C[L+4*N+0]=C[L+4*N+0]*ue>>23,C[L+4*N+1]=C[L+4*N+1]*ue>>23,C[L+4*N+2]=C[L+4*N+2]*ue>>23)}h+=I}}function A(l,h,m,v,b){for(;0<v--;){var I;for(I=0;I<m;++I){var N=l[h+2*I+0],C=15&(M=l[h+2*I+1]),L=4369*C,M=(240&M|M>>4)*L>>16;l[h+2*I+0]=(240&N|N>>4)*L>>16&240|(15&N|N<<4)*L>>16>>4&15,l[h+2*I+1]=240&M|C}h+=b}}function q(l,h,m,v,b,I,N,C){var L,M,Q=255;for(M=0;M<b;++M){for(L=0;L<v;++L){var ue=l[h+L];I[N+4*L]=ue,Q&=ue}h+=m,N+=C}return Q!=255}function K(l,h,m,v,b){var I;for(I=0;I<b;++I)m[v+I]=l[h+I]>>8}function ae(){ro=p,fc=A,sf=q,Ly=K}function Se(l,h,m){F[l]=function(v,b,I,N,C,L,M,Q,ue,he,ee,ke,ve,X,Z,Ce,Re){var xe,He=Re-1>>1,je=C[L+0]|M[Q+0]<<16,et=ue[he+0]|ee[ke+0]<<16;e(v!=null);var qe=3*je+et+131074>>2;for(h(v[b+0],255&qe,qe>>16,ve,X),I!=null&&(qe=3*et+je+131074>>2,h(I[N+0],255&qe,qe>>16,Z,Ce)),xe=1;xe<=He;++xe){var Mt=C[L+xe]|M[Q+xe]<<16,qt=ue[he+xe]|ee[ke+xe]<<16,Rt=je+Mt+et+qt+524296,Et=Rt+2*(Mt+et)>>3;qe=Et+je>>1,je=(Rt=Rt+2*(je+qt)>>3)+Mt>>1,h(v[b+2*xe-1],255&qe,qe>>16,ve,X+(2*xe-1)*m),h(v[b+2*xe-0],255&je,je>>16,ve,X+(2*xe-0)*m),I!=null&&(qe=Rt+et>>1,je=Et+qt>>1,h(I[N+2*xe-1],255&qe,qe>>16,Z,Ce+(2*xe-1)*m),h(I[N+2*xe+0],255&je,je>>16,Z,Ce+(2*xe+0)*m)),je=Mt,et=qt}1&Re||(qe=3*je+et+131074>>2,h(v[b+Re-1],255&qe,qe>>16,ve,X+(Re-1)*m),I!=null&&(qe=3*et+je+131074>>2,h(I[N+Re-1],255&qe,qe>>16,Z,Ce+(Re-1)*m)))}}function Oe(){ii[af]=hN,ii[cf]=Vy,ii[Fy]=fN,ii[lf]=$y,ii[uf]=zy,ii[Bg]=Hy,ii[By]=dN,ii[jg]=Vy,ii[Ug]=$y,ii[hf]=zy,ii[qg]=Hy}function ze(l){return l&~pN?0>l?0:255:l>>Wy}function Je(l,h){return ze((19077*l>>8)+(26149*h>>8)-14234)}function gt(l,h,m){return ze((19077*l>>8)-(6419*h>>8)-(13320*m>>8)+8708)}function bt(l,h){return ze((19077*l>>8)+(33050*h>>8)-17685)}function Ct(l,h,m,v,b){v[b+0]=Je(l,m),v[b+1]=gt(l,h,m),v[b+2]=bt(l,h)}function cn(l,h,m,v,b){v[b+0]=bt(l,h),v[b+1]=gt(l,h,m),v[b+2]=Je(l,m)}function fn(l,h,m,v,b){var I=gt(l,h,m);h=I<<3&224|bt(l,h)>>3,v[b+0]=248&Je(l,m)|I>>5,v[b+1]=h}function Sn(l,h,m,v,b){var I=240&bt(l,h)|15;v[b+0]=240&Je(l,m)|gt(l,h,m)>>4,v[b+1]=I}function nr(l,h,m,v,b){v[b+0]=255,Ct(l,h,m,v,b+1)}function Un(l,h,m,v,b){cn(l,h,m,v,b),v[b+3]=255}function wi(l,h,m,v,b){Ct(l,h,m,v,b),v[b+3]=255}function Vr(l,h){return 0>l?0:l>h?h:l}function Ss(l,h,m){F[l]=function(v,b,I,N,C,L,M,Q,ue){for(var he=Q+(-2&ue)*m;Q!=he;)h(v[b+0],I[N+0],C[L+0],M,Q),h(v[b+1],I[N+0],C[L+0],M,Q+m),b+=2,++N,++L,Q+=2*m;1&ue&&h(v[b+0],I[N+0],C[L+0],M,Q)}}function nf(l,h,m){return m==0?l==0?h==0?6:5:h==0?4:0:m}function Ul(l,h,m,v,b){switch(l>>>30){case 3:uc(h,m,v,b,0);break;case 2:Gl(h,m,v,b);break;case 1:Ei(h,m,v,b)}}function ql(l,h){var m,v,b=h.M,I=h.Nb,N=l.oc,C=l.pc+40,L=l.oc,M=l.pc+584,Q=l.oc,ue=l.pc+600;for(m=0;16>m;++m)N[C+32*m-1]=129;for(m=0;8>m;++m)L[M+32*m-1]=129,Q[ue+32*m-1]=129;for(0<b?N[C-1-32]=L[M-1-32]=Q[ue-1-32]=129:(i(N,C-32-1,127,21),i(L,M-32-1,127,9),i(Q,ue-32-1,127,9)),v=0;v<l.za;++v){var he=h.ya[h.aa+v];if(0<v){for(m=-1;16>m;++m)r(N,C+32*m-4,N,C+32*m+12,4);for(m=-1;8>m;++m)r(L,M+32*m-4,L,M+32*m+4,4),r(Q,ue+32*m-4,Q,ue+32*m+4,4)}var ee=l.Gd,ke=l.Hd+v,ve=he.ad,X=he.Hc;if(0<b&&(r(N,C-32,ee[ke].y,0,16),r(L,M-32,ee[ke].f,0,8),r(Q,ue-32,ee[ke].ea,0,8)),he.Za){var Z=N,Ce=C-32+16;for(0<b&&(v>=l.za-1?i(Z,Ce,ee[ke].y[15],4):r(Z,Ce,ee[ke+1].y,0,4)),m=0;4>m;m++)Z[Ce+128+m]=Z[Ce+256+m]=Z[Ce+384+m]=Z[Ce+0+m];for(m=0;16>m;++m,X<<=2)Z=N,Ce=C+Ky[m],Ii[he.Ob[m]](Z,Ce),Ul(X,ve,16*+m,Z,Ce)}else if(Z=nf(v,b,he.Ob[0]),io[Z](N,C),X!=0)for(m=0;16>m;++m,X<<=2)Ul(X,ve,16*+m,N,C+Ky[m]);for(m=he.Gc,Z=nf(v,b,he.Dd),Cs[Z](L,M),Cs[Z](Q,ue),X=ve,Z=L,Ce=M,255&(he=m>>0)&&(170&he?to(X,256,Z,Ce):Is(X,256,Z,Ce)),he=Q,X=ue,255&(m>>=8)&&(170&m?to(ve,320,he,X):Is(ve,320,he,X)),b<l.Ub-1&&(r(ee[ke].y,0,N,C+480,16),r(ee[ke].f,0,L,M+224,8),r(ee[ke].ea,0,Q,ue+224,8)),m=8*I*l.B,ee=l.sa,ke=l.ta+16*v+16*I*l.R,ve=l.qa,he=l.ra+8*v+m,X=l.Ha,Z=l.Ia+8*v+m,m=0;16>m;++m)r(ee,ke+m*l.R,N,C+32*m,16);for(m=0;8>m;++m)r(ve,he+m*l.B,L,M+32*m,8),r(X,Z+m*l.B,Q,ue+32*m,8)}}function ic(l,h,m,v,b,I,N,C,L){var M=[0],Q=[0],ue=0,he=L!=null?L.kd:0,ee=L??new Ml;if(l==null||12>m)return 7;ee.data=l,ee.w=h,ee.ha=m,h=[h],m=[m],ee.gb=[ee.gb];e:{var ke=h,ve=m,X=ee.gb;if(e(l!=null),e(ve!=null),e(X!=null),X[0]=0,12<=ve[0]&&!n(l,ke[0],"RIFF")){if(n(l,ke[0]+8,"WEBP")){X=3;break e}var Z=B(l,ke[0]+4);if(12>Z||4294967286<Z){X=3;break e}if(he&&Z>ve[0]-8){X=7;break e}X[0]=Z,ke[0]+=12,ve[0]-=12}X=0}if(X!=0)return X;for(Z=0<ee.gb[0],m=m[0];;){e:{var Ce=l;ve=h,X=m;var Re=M,xe=Q,He=ke=[0];if((qe=ue=[ue])[0]=0,8>X[0])X=7;else{if(!n(Ce,ve[0],"VP8X")){if(B(Ce,ve[0]+4)!=10){X=3;break e}if(18>X[0]){X=7;break e}var je=B(Ce,ve[0]+8),et=1+R(Ce,ve[0]+12);if(2147483648<=et*(Ce=1+R(Ce,ve[0]+15))){X=3;break e}He!=null&&(He[0]=je),Re!=null&&(Re[0]=et),xe!=null&&(xe[0]=Ce),ve[0]+=18,X[0]-=18,qe[0]=1}X=0}}if(ue=ue[0],ke=ke[0],X!=0)return X;if(ve=!!(2&ke),!Z&&ue)return 3;if(I!=null&&(I[0]=!!(16&ke)),N!=null&&(N[0]=ve),C!=null&&(C[0]=0),N=M[0],ke=Q[0],ue&&ve&&L==null){X=0;break}if(4>m){X=7;break}if(Z&&ue||!Z&&!ue&&!n(l,h[0],"ALPH")){m=[m],ee.na=[ee.na],ee.P=[ee.P],ee.Sa=[ee.Sa];e:{je=l,X=h,Z=m;var qe=ee.gb;Re=ee.na,xe=ee.P,He=ee.Sa,et=22,e(je!=null),e(Z!=null),Ce=X[0];var Mt=Z[0];for(e(Re!=null),e(He!=null),Re[0]=null,xe[0]=null,He[0]=0;;){if(X[0]=Ce,Z[0]=Mt,8>Mt){X=7;break e}var qt=B(je,Ce+4);if(4294967286<qt){X=3;break e}var Rt=8+qt+1&-2;if(et+=Rt,0<qe&&et>qe){X=3;break e}if(!n(je,Ce,"VP8 ")||!n(je,Ce,"VP8L")){X=0;break e}if(Mt[0]<Rt){X=7;break e}n(je,Ce,"ALPH")||(Re[0]=je,xe[0]=Ce+8,He[0]=qt),Ce+=Rt,Mt-=Rt}}if(m=m[0],ee.na=ee.na[0],ee.P=ee.P[0],ee.Sa=ee.Sa[0],X!=0)break}m=[m],ee.Ja=[ee.Ja],ee.xa=[ee.xa];e:if(qe=l,X=h,Z=m,Re=ee.gb[0],xe=ee.Ja,He=ee.xa,je=X[0],Ce=!n(qe,je,"VP8 "),et=!n(qe,je,"VP8L"),e(qe!=null),e(Z!=null),e(xe!=null),e(He!=null),8>Z[0])X=7;else{if(Ce||et){if(qe=B(qe,je+4),12<=Re&&qe>Re-12){X=3;break e}if(he&&qe>Z[0]-8){X=7;break e}xe[0]=qe,X[0]+=8,Z[0]-=8,He[0]=et}else He[0]=5<=Z[0]&&qe[je+0]==47&&!(qe[je+4]>>5),xe[0]=Z[0];X=0}if(m=m[0],ee.Ja=ee.Ja[0],ee.xa=ee.xa[0],h=h[0],X!=0)break;if(4294967286<ee.Ja)return 3;if(C==null||ve||(C[0]=ee.xa?2:1),N=[N],ke=[ke],ee.xa){if(5>m){X=7;break}C=N,he=ke,ve=I,l==null||5>m?l=0:5<=m&&l[h+0]==47&&!(l[h+4]>>5)?(Z=[0],qe=[0],Re=[0],ne(xe=new E,l,h,m),nt(xe,Z,qe,Re)?(C!=null&&(C[0]=Z[0]),he!=null&&(he[0]=qe[0]),ve!=null&&(ve[0]=Re[0]),l=1):l=0):l=0}else{if(10>m){X=7;break}C=ke,l==null||10>m||!Uh(l,h+3,m-3)?l=0:(he=l[h+0]|l[h+1]<<8|l[h+2]<<16,ve=16383&(l[h+7]<<8|l[h+6]),l=16383&(l[h+9]<<8|l[h+8]),1&he||3<(he>>1&7)||!(he>>4&1)||he>>5>=ee.Ja||!ve||!l?l=0:(N&&(N[0]=ve),C&&(C[0]=l),l=1))}if(!l||(N=N[0],ke=ke[0],ue&&(M[0]!=N||Q[0]!=ke)))return 3;L!=null&&(L[0]=ee,L.offset=h-L.w,e(4294967286>h-L.w),e(L.offset==L.ha-m));break}return X==0||X==7&&ue&&L==null?(I!=null&&(I[0]|=ee.na!=null&&0<ee.na.length),v!=null&&(v[0]=N),b!=null&&(b[0]=ke),0):X}function Vl(l,h,m){var v=h.width,b=h.height,I=0,N=0,C=v,L=b;if(h.Da=l!=null&&0<l.Da,h.Da&&(C=l.cd,L=l.bd,I=l.v,N=l.j,11>m||(I&=-2,N&=-2),0>I||0>N||0>=C||0>=L||I+C>v||N+L>b))return 0;if(h.v=I,h.j=N,h.va=I+C,h.o=N+L,h.U=C,h.T=L,h.da=l!=null&&0<l.da,h.da){if(!Ie(C,L,m=[l.ib],I=[l.hb]))return 0;h.ib=m[0],h.hb=I[0]}return h.ob=l!=null&&l.ob,h.Kb=l==null||!l.Sd,h.da&&(h.ob=h.ib<3*v/4&&h.hb<3*b/4,h.Kb=0),1}function $l(l){if(l==null)return 2;if(11>l.S){var h=l.f.RGBA;h.fb+=(l.height-1)*h.A,h.A=-h.A}else h=l.f.kb,l=l.height,h.O+=(l-1)*h.fa,h.fa=-h.fa,h.N+=(l-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(l-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(l-1)*h.lb,h.lb=-h.lb);return 0}function sc(l,h,m,v){if(v==null||0>=l||0>=h)return 2;if(m!=null){if(m.Da){var b=m.cd,I=m.bd,N=-2&m.v,C=-2&m.j;if(0>N||0>C||0>=b||0>=I||N+b>l||C+I>h)return 2;l=b,h=I}if(m.da){if(!Ie(l,h,b=[m.ib],I=[m.hb]))return 2;l=b[0],h=I[0]}}v.width=l,v.height=h;e:{var L=v.width,M=v.height;if(l=v.S,0>=L||0>=M||!(l>=af&&13>l))l=2;else{if(0>=v.Rd&&v.sd==null){N=I=b=h=0;var Q=(C=L*Yy[l])*M;if(11>l||(I=(M+1)/2*(h=(L+1)/2),l==12&&(N=(b=L)*M)),(M=s(Q+2*I+N))==null){l=1;break e}v.sd=M,11>l?((L=v.f.RGBA).eb=M,L.fb=0,L.A=C,L.size=Q):((L=v.f.kb).y=M,L.O=0,L.fa=C,L.Fd=Q,L.f=M,L.N=0+Q,L.Ab=h,L.Cd=I,L.ea=M,L.W=0+Q+I,L.Db=h,L.Ed=I,l==12&&(L.F=M,L.J=0+Q+2*I),L.Tc=N,L.lb=b)}if(h=1,b=v.S,I=v.width,N=v.height,b>=af&&13>b)if(11>b)l=v.f.RGBA,h&=(C=Math.abs(l.A))*(N-1)+I<=l.size,h&=C>=I*Yy[b],h&=l.eb!=null;else{l=v.f.kb,C=(I+1)/2,Q=(N+1)/2,L=Math.abs(l.fa),M=Math.abs(l.Ab);var ue=Math.abs(l.Db),he=Math.abs(l.lb),ee=he*(N-1)+I;h&=L*(N-1)+I<=l.Fd,h&=M*(Q-1)+C<=l.Cd,h=(h&=ue*(Q-1)+C<=l.Ed)&L>=I&M>=C&ue>=C,h&=l.y!=null,h&=l.f!=null,h&=l.ea!=null,b==12&&(h&=he>=I,h&=ee<=l.Tc,h&=l.F!=null)}else h=0;l=h?0:2}}return l!=0||m!=null&&m.fd&&(l=$l(v)),l}var kr=64,oc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ac=24,cc=32,zl=8,Lr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];fe("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(l){return l},F.Predictor2=function(l,h,m){return h[m+0]},F.Predictor3=function(l,h,m){return h[m+1]},F.Predictor4=function(l,h,m){return h[m-1]},F.Predictor5=function(l,h,m){return Ae(Ae(l,h[m+1]),h[m+0])},F.Predictor6=function(l,h,m){return Ae(l,h[m-1])},F.Predictor7=function(l,h,m){return Ae(l,h[m+0])},F.Predictor8=function(l,h,m){return Ae(h[m-1],h[m+0])},F.Predictor9=function(l,h,m){return Ae(h[m+0],h[m+1])},F.Predictor10=function(l,h,m){return Ae(Ae(l,h[m-1]),Ae(h[m+0],h[m+1]))},F.Predictor11=function(l,h,m){var v=h[m+0];return 0>=Me(v>>24&255,l>>24&255,(h=h[m-1])>>24&255)+Me(v>>16&255,l>>16&255,h>>16&255)+Me(v>>8&255,l>>8&255,h>>8&255)+Me(255&v,255&l,255&h)?v:l},F.Predictor12=function(l,h,m){var v=h[m+0];return(Te((l>>24&255)+(v>>24&255)-((h=h[m-1])>>24&255))<<24|Te((l>>16&255)+(v>>16&255)-(h>>16&255))<<16|Te((l>>8&255)+(v>>8&255)-(h>>8&255))<<8|Te((255&l)+(255&v)-(255&h)))>>>0},F.Predictor13=function(l,h,m){var v=h[m-1];return(Pe((l=Ae(l,h[m+0]))>>24&255,v>>24&255)<<24|Pe(l>>16&255,v>>16&255)<<16|Pe(l>>8&255,v>>8&255)<<8|Pe(l>>0&255,v>>0&255))>>>0};var Og=F.PredictorAdd0;F.PredictorAdd1=Ve,fe("Predictor2","PredictorAdd2"),fe("Predictor3","PredictorAdd3"),fe("Predictor4","PredictorAdd4"),fe("Predictor5","PredictorAdd5"),fe("Predictor6","PredictorAdd6"),fe("Predictor7","PredictorAdd7"),fe("Predictor8","PredictorAdd8"),fe("Predictor9","PredictorAdd9"),fe("Predictor10","PredictorAdd10"),fe("Predictor11","PredictorAdd11"),fe("Predictor12","PredictorAdd12"),fe("Predictor13","PredictorAdd13");var Hl=F.PredictorAdd2;st("ColorIndexInverseTransform","MapARGB","32b",function(l){return l>>8&255},function(l){return l}),st("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(l){return l},function(l){return l>>8&255});var rf,bi=F.ColorIndexInverseTransform,Wl=F.MapARGB,Dg=F.VP8LColorIndexInverseTransformAlpha,Mg=F.MapAlpha,Zs=F.VP8LPredictorsAdd=[];Zs.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var ti,Ai,eo,Qi,Es,lc,Si,uc,Gl,to,Ei,Is,Go,hc,Ko,no,Kl,ni,Ns,Qt,Xt,yn,Pn,Ts,ro,fc,sf,Ly,Ry=s(511),Py=s(2041),Oy=s(225),Dy=s(767),My=0,Fg=Py,of=Oy,$r=Dy,ri=Ry,af=0,cf=1,Fy=2,lf=3,uf=4,Bg=5,By=6,jg=7,Ug=8,hf=9,qg=10,XI=[2,3,7],JI=[3,3,11],jy=[280,256,256,256,40],ZI=[0,1,1,1,0],eN=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],tN=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],nN=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],rN=8,Vg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$g=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Yl=null,iN=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sN=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Uy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oN=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],aN=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cN=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],lN=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],io=[],Ii=[],Cs=[],uN=1,qy=2,so=[],ii=[];Se("UpsampleRgbLinePair",Ct,3),Se("UpsampleBgrLinePair",cn,3),Se("UpsampleRgbaLinePair",wi,4),Se("UpsampleBgraLinePair",Un,4),Se("UpsampleArgbLinePair",nr,4),Se("UpsampleRgba4444LinePair",Sn,2),Se("UpsampleRgb565LinePair",fn,2);var hN=F.UpsampleRgbLinePair,fN=F.UpsampleBgrLinePair,Vy=F.UpsampleRgbaLinePair,$y=F.UpsampleBgraLinePair,zy=F.UpsampleArgbLinePair,Hy=F.UpsampleRgba4444LinePair,dN=F.UpsampleRgb565LinePair,ff=16,df=1<<ff-1,Ql=-227,zg=482,Wy=6,pN=(256<<Wy)-1,Gy=0,gN=s(256),mN=s(256),yN=s(256),vN=s(256),_N=s(zg-Ql),wN=s(zg-Ql);Ss("YuvToRgbRow",Ct,3),Ss("YuvToBgrRow",cn,3),Ss("YuvToRgbaRow",wi,4),Ss("YuvToBgraRow",Un,4),Ss("YuvToArgbRow",nr,4),Ss("YuvToRgba4444Row",Sn,2),Ss("YuvToRgb565Row",fn,2);var Ky=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],pf=[0,2,8],bN=[8,7,6,4,4,2,2,2,1,1,1,1],AN=1;this.WebPDecodeRGBA=function(l,h,m,v,b){var I=cf,N=new nc,C=new di;N.ba=C,C.S=I,C.width=[C.width],C.height=[C.height];var L=C.width,M=C.height,Q=new _s;if(Q==null||l==null)var ue=2;else e(Q!=null),ue=ic(l,h,m,Q.width,Q.height,Q.Pd,Q.Qd,Q.format,null);if(ue!=0?L=0:(L!=null&&(L[0]=Q.width[0]),M!=null&&(M[0]=Q.height[0]),L=1),L){C.width=C.width[0],C.height=C.height[0],v!=null&&(v[0]=C.width),b!=null&&(b[0]=C.height);e:{if(v=new Ya,(b=new Ml).data=l,b.w=h,b.ha=m,b.kd=1,h=[0],e(b!=null),((l=ic(b.data,b.w,b.ha,null,null,null,h,null,b))==0||l==7)&&h[0]&&(l=4),(h=l)==0){if(e(N!=null),v.data=b.data,v.w=b.w+b.offset,v.ha=b.ha-b.offset,v.put=zi,v.ac=Yn,v.bc=Hi,v.ma=N,b.xa){if((l=ei())==null){N=1;break e}if(function(he,ee){var ke=[0],ve=[0],X=[0];t:for(;;){if(he==null)return 0;if(ee==null)return he.a=2,0;if(he.l=ee,he.a=0,ne(he.m,ee.data,ee.w,ee.ha),!nt(he.m,ke,ve,X)){he.a=3;break t}if(he.xb=qy,ee.width=ke[0],ee.height=ve[0],!Ki(ke[0],ve[0],1,he,null))break t;return 1}return e(he.a!=0),0}(l,v)){if(v=(h=sc(v.width,v.height,N.Oa,N.ba))==0){t:{v=l;n:for(;;){if(v==null){v=0;break t}if(e(v.s.yc!=null),e(v.s.Ya!=null),e(0<v.s.Wb),e((m=v.l)!=null),e((b=m.ma)!=null),v.xb!=0){if(v.ca=b.ba,v.tb=b.tb,e(v.ca!=null),!Vl(b.Oa,m,lf)){v.a=2;break n}if(!Vo(v,m.width)||m.da)break n;if((m.da||Ft(v.ca.S))&&ae(),11>v.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),v.ca.f.kb.F!=null&&ae()),v.Pb&&0<v.s.ua&&v.s.vb.X==null&&!re(v.s.vb,v.s.Wa.Xa)){v.a=1;break n}v.xb=0}if(!yi(v,v.V,v.Ba,v.c,v.i,m.o,$a))break n;b.Dc=v.Ma,v=1;break t}e(v.a!=0),v=0}v=!v}v&&(h=l.a)}else h=l.a}else{if((l=new gg)==null){N=1;break e}if(l.Fa=b.na,l.P=b.P,l.qc=b.Sa,qh(l,v)){if((h=sc(v.width,v.height,N.Oa,N.ba))==0){if(l.Aa=0,m=N.Oa,e((b=l)!=null),m!=null){if(0<(L=0>(L=m.Md)?0:100<L?255:255*L/100)){for(M=Q=0;4>M;++M)12>(ue=b.pb[M]).lc&&(ue.ia=L*bN[0>ue.lc?0:ue.lc]>>3),Q|=ue.ia;Q&&(alert("todo:VP8InitRandom"),b.ia=1)}b.Ga=m.Id,100<b.Ga?b.Ga=100:0>b.Ga&&(b.Ga=0)}mg(l,v)||(h=l.a)}}else h=l.a}h==0&&N.Oa!=null&&N.Oa.fd&&(h=$l(N.ba))}N=h}I=N!=0?null:11>I?C.f.RGBA.eb:C.f.kb.y}else I=null;return I};var Yy=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(F,ge){for(var pe="",D=0;D<4;D++)pe+=String.fromCharCode(F[ge++]);return pe}function f(F,ge){return(F[ge+0]<<0|F[ge+1]<<8|F[ge+2]<<16)>>>0}function d(F,ge){return(F[ge+0]<<0|F[ge+1]<<8|F[ge+2]<<16|F[ge+3]<<24)>>>0}new c;var y=[0],g=[0],w=[],_=new c,T=t,S=function(F,ge){var pe={},D=0,O=!1,G=0,H=0;if(pe.frames=[],!function(U,V,P,$){for(var W=0;W<$;W++)if(U[V+W]!=P.charCodeAt(W))return!0;return!1}(F,ge,"RIFF",4)){var ye,le;for(d(F,ge+=4),ge+=8;ge<F.length;){var de=u(F,ge),ne=d(F,ge+=4);ge+=4;var _e=ne+(1&ne);switch(de){case"VP8 ":case"VP8L":pe.frames[D]===void 0&&(pe.frames[D]={}),(E=pe.frames[D]).src_off=O?H:ge-8,E.src_size=G+ne+8,D++,O&&(O=!1,G=0,H=0);break;case"VP8X":(E=pe.header={}).feature_flags=F[ge];var we=ge+4;E.canvas_width=1+f(F,we),we+=3,E.canvas_height=1+f(F,we),we+=3;break;case"ALPH":O=!0,G=_e+8,H=ge-8;break;case"ANIM":(E=pe.header).bgcolor=d(F,ge),we=ge+4,E.loop_count=(ye=F)[(le=we)+0]<<0|ye[le+1]<<8,we+=2;break;case"ANMF":var Fe,E;(E=pe.frames[D]={}).offset_x=2*f(F,ge),ge+=3,E.offset_y=2*f(F,ge),ge+=3,E.width=1+f(F,ge),ge+=3,E.height=1+f(F,ge),ge+=3,E.duration=f(F,ge),ge+=3,Fe=F[ge++],E.dispose=1&Fe,E.blend=Fe>>1&1}de!="ANMF"&&(ge+=_e)}return pe}}(T,0);S.response=T,S.rgbaoutput=!0,S.dataurl=!1;var k=S.header?S.header:null,j=S.frames?S.frames:null;if(k){k.loop_counter=k.loop_count,y=[k.canvas_height],g=[k.canvas_width];for(var Y=0;Y<j.length&&j[Y].blend!=0;Y++);}var oe=j[0],me=_.WebPDecodeRGBA(T,oe.src_off,oe.src_size,g,y);oe.rgba=me,oe.imgwidth=g[0],oe.imgheight=y[0];for(var te=0;te<g[0]*y[0]*4;te++)w[te]=me[te];return this.width=g,this.height=y,this.data=w,this}(function(t){var e=function(){return typeof g0=="function"},n=function(y,g,w,_){var T=4,S=o;switch(_){case t.image_compression.FAST:T=1,S=s;break;case t.image_compression.MEDIUM:T=6,S=a;break;case t.image_compression.SLOW:T=9,S=c}y=r(y,g,w,S);var k=g0(y,{level:T});return t.__addimage__.arrayBufferToBinaryString(k)},r=function(y,g,w,_){for(var T,S,k,j=y.length/g,Y=new Uint8Array(y.length+j),oe=f(),me=0;me<j;me+=1){if(k=me*g,T=y.subarray(k,k+g),_)Y.set(_(T,w,S),k+me);else{for(var te,F=oe.length,ge=[];te<F;te+=1)ge[te]=oe[te](T,w,S);var pe=d(ge.concat());Y.set(ge[pe],k+me)}S=T}return Y},i=function(y){var g=Array.apply([],y);return g.unshift(0),g},s=function(y,g){var w,_=[],T=y.length;_[0]=1;for(var S=0;S<T;S+=1)w=y[S-g]||0,_[S+1]=y[S]-w+256&255;return _},o=function(y,g,w){var _,T=[],S=y.length;T[0]=2;for(var k=0;k<S;k+=1)_=w&&w[k]||0,T[k+1]=y[k]-_+256&255;return T},a=function(y,g,w){var _,T,S=[],k=y.length;S[0]=3;for(var j=0;j<k;j+=1)_=y[j-g]||0,T=w&&w[j]||0,S[j+1]=y[j]+256-(_+T>>>1)&255;return S},c=function(y,g,w){var _,T,S,k,j=[],Y=y.length;j[0]=4;for(var oe=0;oe<Y;oe+=1)_=y[oe-g]||0,T=w&&w[oe]||0,S=w&&w[oe-g]||0,k=u(_,T,S),j[oe+1]=y[oe]-k+256&255;return j},u=function(y,g,w){if(y===g&&g===w)return y;var _=Math.abs(g-w),T=Math.abs(y-w),S=Math.abs(y+g-w-w);return _<=T&&_<=S?y:T<=S?g:w},f=function(){return[i,s,o,a,c]},d=function(y){var g=y.map(function(w){return w.reduce(function(_,T){return _+Math.abs(T)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(y,g,w,_){var T,S,k,j,Y,oe,me,te,F,ge,pe,D,O,G,H,ye=this.decode.FLATE_DECODE,le="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(k=new rU(y)).imgData,S=k.bits,T=k.colorSpace,Y=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){F=(te=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,pe=new Uint8Array(F*k.colors),ge=new Uint8Array(F);var de,ne=k.pixelBitlength-k.bits;for(G=0,H=0;G<F;G++){for(O=te[G],de=0;de<ne;)pe[H++]=O>>>de&255,de+=k.bits;ge[G]=O>>>de&255}}if(k.bits===16){F=(te=new Uint32Array(k.decodePixels().buffer)).length,pe=new Uint8Array(F*(32/k.pixelBitlength)*k.colors),ge=new Uint8Array(F*(32/k.pixelBitlength)),D=k.colors>1,G=0,H=0;for(var _e=0;G<F;)O=te[G++],pe[H++]=O>>>0&255,D&&(pe[H++]=O>>>16&255,O=te[G++],pe[H++]=O>>>0&255),ge[_e++]=O>>>16&255;S=8}_!==t.image_compression.NONE&&e()?(y=n(pe,k.width*k.colors,k.colors,_),me=n(ge,k.width,1,_)):(y=pe,me=ge,ye=void 0)}if(k.colorType===3&&(T=this.color_spaces.INDEXED,oe=k.palette,k.transparency.indexed)){var we=k.transparency.indexed,Fe=0;for(G=0,F=we.length;G<F;++G)Fe+=we[G];if((Fe/=255)===F-1&&we.indexOf(0)!==-1)j=[we.indexOf(0)];else if(Fe!==F){for(te=k.decodePixels(),ge=new Uint8Array(te.length),G=0,F=te.length;G<F;G++)ge[G]=we[te[G]];me=n(ge,k.width,1)}}var E=function(U){var V;switch(U){case t.image_compression.FAST:V=11;break;case t.image_compression.MEDIUM:V=13;break;case t.image_compression.SLOW:V=14;break;default:V=12}return V}(_);return ye===this.decode.FLATE_DECODE&&(le="/Predictor "+E+" "),le+="/Colors "+Y+" /BitsPerComponent "+S+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(me&&this.__addimage__.isArrayBuffer(me)||this.__addimage__.isArrayBufferView(me))&&(me=this.__addimage__.arrayBufferToBinaryString(me)),{alias:w,data:y,index:g,filter:ye,decodeParameters:le,transparency:j,palette:oe,sMask:me,predictor:E,width:k.width,height:k.height,bitsPerComponent:S,colorSpace:T}}}})(rt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new iU(e),o=s.width,a=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:a},f=new Vm(100).encode(u,100);return t.processJPEG.call(this,f,n,r,i)},t.processGIF87A=t.processGIF89A}(rt.API),Ci.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ci.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Yt.log("bit decode error:"+n)}},Ci.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var c=this.palette[s>>7-a&1];this.data[o+4*a]=c.blue,this.data[o+4*a+1]=c.green,this.data[o+4*a+2]=c.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Ci.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,c=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Ci.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Ci.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,f=r*this.width*4+4*i;this.data[f]=c,this.data[f+1]=a,this.data[f+2]=o,this.data[f+3]=u}this.pos+=t}},Ci.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,c=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,f=i*this.width*4+4*s;this.data[f]=u,this.data[f+1]=c,this.data[f+2]=a,this.data[f+3]=255}this.pos+=t}},Ci.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Ci.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Ci.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Ci(e,!1),o=s.width,a=s.height,c={data:s.getData(),width:o,height:a},u=new Vm(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)}}(rt.API),dw.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new dw(e),o=s.width,a=s.height,c={data:s.getData(),width:o,height:a},u=new Vm(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)}}(rt.API),rt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,c=0,u=0;u<i;u+=4){var f=r[u],d=r[u+1],y=r[u+2],g=r[u+3];s[a++]=f,s[a++]=d,s[a++]=y,o[c++]=g}var w=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:w,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},rt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},_c=rt.API,Wf=_c.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,c=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=u.fof?u.fof:1,d=e.doKerning!==!1,y=0,g=t.length,w=0,_=a[0]||c,T=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(y=d&&Ht(u[r])==="object"&&!isNaN(parseInt(u[r][w],10))?u[r][w]/f:0,T.push((a[r]||_)/c+y)),w=r;return T},lw=_c.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return _c.processArabic&&(t=_c.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:Wf.apply(this,arguments).reduce(function(s,o){return s+o},0)},uw=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var c=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(c,s)),a=0,c=s),a+=e[s],s++;return c!==s&&i.push(t.slice(c,s)),i},hw=function(t,e,n){n||(n={});var r,i,s,o,a,c,u,f=[],d=[f],y=n.textIndent||0,g=0,w=0,_=t.split(" "),T=Wf.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?_[0].length+2:n.lineIndent||0){var S=Array(c).join(" "),k=[];_.map(function(Y){(Y=Y.split(/\s*\n/)).length>1?k=k.concat(Y.map(function(oe,me){return(me&&oe.length?`
`:"")+oe})):k.push(Y[0])}),_=k,c=lw.apply(this,[S,n])}for(s=0,o=_.length;s<o;s++){var j=0;if(r=_[s],c&&r[0]==`
`&&(r=r.substr(1),j=1),y+g+(w=(i=Wf.apply(this,[r,n])).reduce(function(Y,oe){return Y+oe},0))>e||j){if(w>e){for(a=uw.apply(this,[r,i,e-(y+g),e]),f.push(a.shift()),f=[a.pop()];a.length;)d.push([a.shift()]);w=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(Y,oe){return Y+oe},0)}else f=[r];d.push(f),y=w+c,g=T}else f.push(r),y+=g+w,g=T}return u=c?function(Y,oe){return(oe?S:"")+Y.join(" ")}:function(Y){return Y.join(" ")},d.map(u)},_c.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var d=this.internal.getFont(f.fontName,f.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,c,u=[];for(a=0,c=r.length;a<c;a++)u=u.concat(hw.apply(this,[r[a],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(d){return"0x"+parseInt(d,10).toString(16)},o=t.__fontmetrics__.compress=function(d){var y,g,w,_,T=["{"];for(var S in d){if(y=d[S],isNaN(parseInt(S,10))?g="'"+S+"'":(S=parseInt(S,10),g=(g=s(S).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof y=="number")y<0?(w=s(y).slice(3),_="-"):(w=s(y).slice(2),_=""),w=_+w.slice(0,-1)+r[w.slice(-1)];else{if(Ht(y)!=="object")throw new Error("Don't know what to do with value type "+Ht(y)+".");w=o(y)}T.push(g+w)}return T.push("}"),T.join("")},a=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,g,w,_,T={},S=1,k=T,j=[],Y="",oe="",me=d.length-1,te=1;te<me;te+=1)(_=d[te])=="'"?y?(w=y.join(""),y=void 0):y=[]:y?y.push(_):_=="{"?(j.push([k,w]),k={},w=void 0):_=="}"?((g=j.pop())[0][g[1]]=k,w=void 0,k=g[0]):_=="-"?S=-1:w===void 0?n.hasOwnProperty(_)?(Y+=n[_],w=parseInt(Y,16)*S,S=1,Y=""):Y+=_:n.hasOwnProperty(_)?(oe+=n[_],k[w]=parseInt(oe,16)*S,S=1,w=void 0,oe=""):oe+=_;return T},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var y=d.font,g=f.Unicode[y.postScriptName];g&&(y.metadata.Unicode={},y.metadata.Unicode.widths=g.widths,y.metadata.Unicode.kerning=g.kerning);var w=u.Unicode[y.postScriptName];w&&(y.metadata.Unicode.encoding=w,y.encoding=w.codePages[0])}])}(rt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Ru(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(rt),function(t){function e(){return(ot.canvg?Promise.resolve(ot.canvg):u0(()=>import("./index.es-3467ff8f.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}rt.API.addSvgAsImage=function(n,r,i,s,o,a,c,u){if(isNaN(r)||isNaN(i))throw Yt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Yt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=o;var d=f.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,f.width,f.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(w){return w.fromString(d,n,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(y)}).then(function(){g.addImage(f.toDataURL("image/jpeg",1),r,i,s,o,c,u)})}}(),rt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},rt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),c=[],u=0,f=0,d=0;function y(w,_){var T,S=!1;for(T=0;T<w.length;T+=1)w[T]===_&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=a.length;for(d=0;d<g;d+=1)n[a[d]].value=n[a[d]].defaultValue,n[a[d]].explicitSet=!1}if(Ht(t)==="object"){for(i in t)if(s=t[i],y(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&y(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(f=0;f<s[u].length;f+=1)typeof s[u][f]!="number"&&(r=!1);r===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,_=[];for(w in n)n[w].explicitSet===!0&&(n[w].type==="name"?_.push("/"+w+" /"+n[w].value):_.push("/"+w+" "+n[w].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(rt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],d=0,y=s.length;d<y;++d){if(a=o.metadata.characterToGlyph(s.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(d),c.indexOf(a)==-1&&(c.push(a),c.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return f.join("");a=a.toString(16),f.push(u[4-a.length],a)}return f.join("")},r=function(s){var o,a,c,u,f,d,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],d=0,y=(a=Object.keys(s).sort(function(g,w){return g-w})).length;d<y;d++)o=a[d],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,c=o.out,u=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",w=0;w<y.length;w++)g+=String.fromCharCode(y[w]);var _=u();f({data:g,addLength1:!0,objectId:_}),c("endobj");var T=u();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:T}),c("endobj");var S=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Nc(a.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),c("/Flags "+a.metadata.flags),c("/StemV "+a.metadata.stemV),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c(">>"),c("endobj");var k=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Nc(a.fontName)),c("/FontDescriptor "+S+" 0 R"),c("/W "+t.API.PDFObject.convert(d)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+a.encoding+")"),c(">>"),c(">>"),c("endobj"),a.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+T+" 0 R"),c("/BaseFont /"+Nc(a.fontName)),c("/Encoding /"+a.encoding),c("/DescendantFonts ["+k+" 0 R]"),c(">>"),c("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,c=o.out,u=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,y="",g=0;g<d.length;g++)y+=String.fromCharCode(d[g]);var w=u();f({data:y,addLength1:!0,objectId:w}),c("endobj");var _=u();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var T=u();c("<<"),c("/Descent "+a.metadata.decender),c("/CapHeight "+a.metadata.capHeight),c("/StemV "+a.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+w+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),c("/FontName /"+Nc(a.fontName)),c("/ItalicAngle "+a.metadata.italicAngle),c("/Ascent "+a.metadata.ascender),c(">>"),c("endobj"),a.objectNumber=u();for(var S=0;S<a.metadata.hmtx.widths.length;S++)a.metadata.hmtx.widths[S]=parseInt(a.metadata.hmtx.widths[S]*(1e3/a.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Nc(a.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),c("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",c=s.x,u=s.y,f=s.options||{},d=s.mutex||{},y=d.pdfEscape,g=d.activeFontKey,w=d.fonts,_=g,T="",S=0,k="",j=w[_].encoding;if(w[_].encoding!=="Identity-H")return{text:a,x:c,y:u,options:f,mutex:d};for(k=a,_=g,Array.isArray(a)&&(k=a[0]),S=0;S<k.length;S+=1)w[_].metadata.hasOwnProperty("cmap")&&(o=w[_].metadata.cmap.unicode.codeMap[k[S].charCodeAt(0)]),o||k[S].charCodeAt(0)<256&&w[_].metadata.hasOwnProperty("Unicode")?T+=k[S]:T+="";var Y="";return parseInt(_.slice(1))<14||j==="WinAnsiEncoding"?Y=y(T,_).split("").map(function(oe){return oe.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(Y=n(T,w[_])),d.isHex=!0,{text:Y,x:c,y:u,options:f,mutex:d}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],c={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},c,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},c,{text:o})).text}])}(rt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(rt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,c,u,f,d=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,j=0;this.__bidiEngine__={};var Y=function(D){var O=D.charCodeAt(),G=O>>8,H=_[G];return H!==void 0?d[256*H+(255&O)]:G===252||G===253?"AL":S.test(G)?"L":G===8?"R":"N"},oe=function(D){for(var O,G=0;G<D.length;G++){if((O=Y(D.charAt(G)))==="L")return!1;if(O==="R")return!0}return!1},me=function(D,O,G,H){var ye,le,de,ne,_e=O[H];switch(_e){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(_e="AN");break;case"AL":k=!0,_e="R";break;case"WS":_e="N";break;case"CS":H<1||H+1>=O.length||(ye=G[H-1])!=="EN"&&ye!=="AN"||(le=O[H+1])!=="EN"&&le!=="AN"?_e="N":k&&(le="AN"),_e=le===ye?le:"N";break;case"ES":_e=(ye=H>0?G[H-1]:"B")==="EN"&&H+1<O.length&&O[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&G[H-1]==="EN"){_e="EN";break}if(k){_e="N";break}for(de=H+1,ne=O.length;de<ne&&O[de]==="ET";)de++;_e=de<ne&&O[de]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(ne=O.length,de=H+1;de<ne&&O[de]==="NSM";)de++;if(de<ne){var we=D[H],Fe=we>=1425&&we<=2303||we===64286;if(ye=O[de],Fe&&(ye==="R"||ye==="AL")){_e="R";break}}}_e=H<1||(ye=O[H-1])==="B"?"N":G[H-1];break;case"B":k=!1,i=!0,_e=j;break;case"S":s=!0,_e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":_e="N"}return _e},te=function(D,O,G){var H=D.split("");return G&&F(H,G,{hiLevel:j}),H.reverse(),O&&O.reverse(),H.join("")},F=function(D,O,G){var H,ye,le,de,ne,_e=-1,we=D.length,Fe=0,E=[],U=j?g:y,V=[];for(k=!1,i=!1,s=!1,ye=0;ye<we;ye++)V[ye]=Y(D[ye]);for(le=0;le<we;le++){if(ne=Fe,E[le]=me(D,V,E,le),H=240&(Fe=U[ne][w[E[le]]]),Fe&=15,O[le]=de=U[Fe][5],H>0)if(H===16){for(ye=_e;ye<le;ye++)O[ye]=1;_e=-1}else _e=-1;if(U[Fe][6])_e===-1&&(_e=le);else if(_e>-1){for(ye=_e;ye<le;ye++)O[ye]=de;_e=-1}V[le]==="B"&&(O[le]=0),G.hiLevel|=de}s&&function(P,$,W){for(var J=0;J<W;J++)if(P[J]==="S"){$[J]=j;for(var se=J-1;se>=0&&P[se]==="WS";se--)$[se]=j}}(V,O,we)},ge=function(D,O,G,H,ye){if(!(ye.hiLevel<D)){if(D===1&&j===1&&!i)return O.reverse(),void(G&&G.reverse());for(var le,de,ne,_e,we=O.length,Fe=0;Fe<we;){if(H[Fe]>=D){for(ne=Fe+1;ne<we&&H[ne]>=D;)ne++;for(_e=Fe,de=ne-1;_e<de;_e++,de--)le=O[_e],O[_e]=O[de],O[de]=le,G&&(le=G[_e],G[_e]=G[de],G[de]=le);Fe=ne}Fe++}}},pe=function(D,O,G){var H=D.split(""),ye={hiLevel:j};return G||(G=[]),F(H,G,ye),function(le,de,ne){if(ne.hiLevel!==0&&f)for(var _e,we=0;we<le.length;we++)de[we]===1&&(_e=T.indexOf(le[we]))>=0&&(le[we]=T[_e+1])}(H,G,ye),ge(2,H,O,G,ye),ge(1,H,O,G,ye),H.join("")};return this.__bidiEngine__.doBidiReorder=function(D,O,G){if(function(ye,le){if(le)for(var de=0;de<ye.length;de++)le[de]=de;a===void 0&&(a=oe(ye)),u===void 0&&(u=oe(ye))}(D,O),o||!c||u)if(o&&c&&a^u)j=a?1:0,D=te(D,O,G);else if(!o&&c&&u)j=a?1:0,D=pe(D,O,G),D=te(D,O);else if(!o||a||c||u){if(o&&!c&&a^u)D=te(D,O),a?(j=0,D=pe(D,O,G)):(j=1,D=pe(D,O,G),D=te(D,O));else if(o&&a&&!c&&u)j=1,D=pe(D,O,G),D=te(D,O);else if(!o&&!c&&a^u){var H=f;a?(j=1,D=pe(D,O,G),j=0,f=!1,D=pe(D,O,G),f=H):(j=0,D=pe(D,O,G),D=te(D,O),j=1,f=!1,D=pe(D,O,G),f=H,D=te(D,O))}}else j=0,D=pe(D,O,G);else j=a?1:0,D=pe(D,O,G);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,c=D.isOutputVisual,a=D.isInputRtl,u=D.isOutputRtl,f=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(rt),rt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Fo(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new _U(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new sU(this.contents),this.head=new aU(this),this.name=new fU(this),this.cmap=new MI(this),this.toUnicode={},this.hhea=new cU(this),this.maxp=new dU(this),this.hmtx=new pU(this),this.post=new uU(this),this.os2=new lU(this),this.loca=new vU(this),this.glyf=new gU(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,c,u;for(u=[],o=0,a=(c=this.bbox).length;o<a;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var $i,Fo=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,c;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^c)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+c},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),sU=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,c,u,f,d,y,g,w,_;for(_ in g=Object.keys(n).length,c=Math.log(2),d=16*Math.floor(Math.log(g)/c),o=Math.floor(d/c),f=16*g-d,(i=new Fo).writeInt(this.scalarType),i.writeShort(g),i.writeShort(d),i.writeShort(o),i.writeShort(f),s=16*g,u=i.pos+s,a=null,w=[],n)for(y=n[_],i.writeString(_),i.writeInt(t(y)),i.writeInt(u),i.writeInt(y.length),w=w.concat(y),_==="head"&&(a=u),u+=y.length;u%4;)w.push(0),u++;return i.write(w),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=FI.call(n);n.length%4;)n.push(0);for(s=new Fo(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),oU={}.hasOwnProperty,vs=function(t,e){for(var n in e)oU.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};$i=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var aU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,$i),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Fo).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),pw=function(){function t(e,n){var r,i,s,o,a,c,u,f,d,y,g,w,_,T,S,k,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(g=e.readUInt16(),y=g/2,e.pos+=6,s=function(){var Y,oe;for(oe=[],c=Y=0;0<=y?Y<y:Y>y;c=0<=y?++Y:--Y)oe.push(e.readUInt16());return oe}(),e.pos+=2,_=function(){var Y,oe;for(oe=[],c=Y=0;0<=y?Y<y:Y>y;c=0<=y?++Y:--Y)oe.push(e.readUInt16());return oe}(),u=function(){var Y,oe;for(oe=[],c=Y=0;0<=y?Y<y:Y>y;c=0<=y?++Y:--Y)oe.push(e.readUInt16());return oe}(),f=function(){var Y,oe;for(oe=[],c=Y=0;0<=y?Y<y:Y>y;c=0<=y?++Y:--Y)oe.push(e.readUInt16());return oe}(),i=(this.length-e.pos+this.offset)/2,a=function(){var Y,oe;for(oe=[],c=Y=0;0<=i?Y<i:Y>i;c=0<=i?++Y:--Y)oe.push(e.readUInt16());return oe}(),c=S=0,j=s.length;S<j;c=++S)for(T=s[c],r=k=w=_[c];w<=T?k<=T:k>=T;r=w<=T?++k:--k)f[c]===0?o=r+u[c]:(o=a[f[c]/2+(r-w)-(y-c)]||0)!==0&&(o+=u[c]),this.codeMap[r]=65535&o}e.pos=d}return t.encode=function(e,n){var r,i,s,o,a,c,u,f,d,y,g,w,_,T,S,k,j,Y,oe,me,te,F,ge,pe,D,O,G,H,ye,le,de,ne,_e,we,Fe,E,U,V,P,$,W,J,se,Le,Ee,R;switch(H=new Fo,o=Object.keys(e).sort(function(B,re){return B-re}),n){case"macroman":for(_=0,T=function(){var B=[];for(w=0;w<256;++w)B.push(0);return B}(),k={0:0},s={},ye=0,_e=o.length;ye<_e;ye++)k[se=e[i=o[ye]]]==null&&(k[se]=++_),s[i]={old:e[i],new:k[e[i]]},T[i]=k[e[i]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(T),{charMap:s,subtable:H.data,maxGlyphID:_+1};case"unicode":for(O=[],d=[],j=0,k={},r={},S=u=null,le=0,we=o.length;le<we;le++)k[oe=e[i=o[le]]]==null&&(k[oe]=++j),r[i]={old:oe,new:k[oe]},a=k[oe]-i,S!=null&&a===u||(S&&d.push(S),O.push(i),u=a),S=i;for(S&&d.push(S),d.push(65535),O.push(65535),pe=2*(ge=O.length),F=2*Math.pow(Math.log(ge)/Math.LN2,2),y=Math.log(F/2)/Math.LN2,te=2*ge-F,c=[],me=[],g=[],w=de=0,Fe=O.length;de<Fe;w=++de){if(D=O[w],f=d[w],D===65535){c.push(0),me.push(0);break}if(D-(G=r[D].new)>=32768)for(c.push(0),me.push(2*(g.length+ge-w)),i=ne=D;D<=f?ne<=f:ne>=f;i=D<=f?++ne:--ne)g.push(r[i].new);else c.push(G-D),me.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*ge+2*g.length),H.writeUInt16(0),H.writeUInt16(pe),H.writeUInt16(F),H.writeUInt16(y),H.writeUInt16(te),W=0,E=d.length;W<E;W++)i=d[W],H.writeUInt16(i);for(H.writeUInt16(0),J=0,U=O.length;J<U;J++)i=O[J],H.writeUInt16(i);for(Le=0,V=c.length;Le<V;Le++)a=c[Le],H.writeUInt16(a);for(Ee=0,P=me.length;Ee<P;Ee++)Y=me[Ee],H.writeUInt16(Y);for(R=0,$=g.length;R<$;R++)_=g[R],H.writeUInt16(_);return{charMap:r,subtable:H.data,maxGlyphID:j+1}}},t}(),MI=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,$i),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new pw(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=pw.encode(n,r),(s=new Fo).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),cU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,$i),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),lU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,$i),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),uU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,$i),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=function(){var a,c,u;for(u=[],o=a=0,c=this.file.maxp.numGlyphs;0<=c?a<c:a>c;o=0<=c?++a:--a)u.push(n.readUInt32());return u}.call(this)}},e}(),hU=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},fU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,$i),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,c,u,f,d,y,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(u={},o=d=0,y=i.length;d<y;o=++d)s=i[o],n.pos=s.offset,f=n.readString(s.length),a=new hU(f,s),u[g=s.nameID]==null&&(u[g]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),dU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,$i),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),pU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,$i),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,c,u;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,d;for(d=[],r=f=0;0<=s?f<s:f>s;r=0<=s?++f:--f)d.push(n.readInt16());return d}(),this.widths=function(){var f,d,y,g;for(g=[],f=0,d=(y=this.metrics).length;f<d;f++)o=y[f],g.push(o.advance);return g}.call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),FI=[].slice,gU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,$i),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,c,u,f,d,y;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(c=new Fo(r.read(s))).readShort(),f=c.readShort(),y=c.readShort(),u=c.readShort(),d=c.readShort(),this.cache[n]=a===-1?new yU(c,f,y,u,d):new mU(c,a,f,y,u,d),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,c,u;for(a=[],o=[],c=0,u=r.length;c<u;c++)s=n[r[c]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),mU=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),yU=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Fo(FI.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),vU=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,$i),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}.call(this):function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}.call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var c=this.offsets[a],u=this.offsets[a+1]-c;u>0&&(s+=u)}for(var f=new Array(4*i.length),d=0;d<i.length;++d)f[4*d+3]=255&i[d],f[4*d+2]=(65280&i[d])>>8,f[4*d+1]=(16711680&i[d])>>16,f[4*d]=(4278190080&i[d])>>24;return f},e}(),_U=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,c;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in c=this.glyphsFor(n))r=c[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,c,u,f,d,y,g,w,_,T,S;for(i in r=MI.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},S=r.charMap)g[(c=S[i]).old]=c.new;for(w in y=r.maxGlyphID,o)w in g||(g[w]=y++);return f=function(k){var j,Y;for(j in Y={},k)Y[k[j]]=j;return Y}(g),d=Object.keys(f).sort(function(k,j){return k-j}),_=function(){var k,j,Y;for(Y=[],k=0,j=d.length;k<j;k++)a=d[k],Y.push(f[a]);return Y}(),s=this.font.glyf.encode(o,_,g),u=this.font.loca.encode(s.offsets,_),T={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},t}();rt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,c,u;for(u=[],a=0,c=n.length;a<c;a++)r=n[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const wU=Ne("td",null,"Nombre",-1),bU=Ne("td",null,"Horas",-1),AU=Ne("td",null,"Imagen",-1),SU=Ne("td",null,"Pdf",-1),EU={key:0},IU={key:0},NU=["src"],TU=["onClick"],CU={key:0},xU=Ne("button",null,"Incribirse",-1),kU=[xU],LU={__name:"detallesCurso",setup(t){const e=Il(),n=El(Ta(e,"Cursos"));let r=gr("");Da(Bi,s=>{s&&(s.uid,r.value=s.email)});function i(s,o,a,c){let u=new rt,f=new Image,d="Contenido: Bienvendido a este curso de "+s+`
Espero que te sea de utilidad,buena suerte.`;u.addFont("bromellonavidadregular","bromellonavidadregular","normal"),u.setFont("bromellonavidadregular"),u.setFont(void 0,"bold"),f.src="../src/img/"+a,u.setTextColor(255,0,0),u.text(10,10,"Categoria: "+c),u.setTextColor(0,0,0),u.text(25,25,"Curso: "+s),u.text(25,40,"Horas del curso: "+o),u.addImage(f,"png",20,50,70,70),u.text(25,140,d),u.save(s+".pdf")}return(s,o)=>(Ze(),it("table",null,[Ne("thead",null,[Ne("tr",null,[wU,bU,AU,SU,mt(r)!=""?(Ze(),it("td",EU,"Inscripcin")):ln("",!0)])]),(Ze(!0),it(sn,null,da(mt(n),a=>(Ze(),it("tbody",{key:a.nombre},[a.id==s.$route.params.id?(Ze(),it("tr",IU,[Ne("td",null,cr(a.nombre),1),Ne("td",null,cr(a.horas),1),Ne("td",null,[Ne("img",{src:"/src/img/"+a.imagen,width:"50",height:"50"},null,8,NU)]),Ne("td",null,[Ne("button",{onClick:c=>i(a.nombre,a.horas,a.imagen,a.categoria)},"pdf",8,TU)]),mt(r)!=""?(Ze(),it("td",CU,kU)):ln("",!0)])):ln("",!0)]))),128))]))}};/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Tc=typeof window<"u";function RU(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const $t=Object.assign;function $m(t,e){const n={};for(const r in e){const i=e[r];n[r]=qi(i)?i.map(t):t(i)}return n}const Pu=()=>{},qi=Array.isArray,PU=/\/$/,OU=t=>t.replace(PU,"");function zm(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),s=e.slice(c+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=BU(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function DU(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function gw(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function MU(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&sl(e.matched[r],n.matched[i])&&BI(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function sl(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function BI(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!FU(t[n],e[n]))return!1;return!0}function FU(t,e){return qi(t)?mw(t,e):qi(e)?mw(e,t):t===e}function mw(t,e){return qi(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function BU(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i=n.length-1,s,o;for(s=0;s<r.length;s++)if(o=r[s],o!==".")if(o==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(s-(s===r.length?1:0)).join("/")}var ah;(function(t){t.pop="pop",t.push="push"})(ah||(ah={}));var Ou;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ou||(Ou={}));function jU(t){if(!t)if(Tc){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),OU(t)}const UU=/^[^#]+#/;function qU(t,e){return t.replace(UU,"#")+e}function VU(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const lg=()=>({left:window.pageXOffset,top:window.pageYOffset});function $U(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=VU(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function yw(t,e){return(history.state?history.state.position-e:-1)+t}const A0=new Map;function zU(t,e){A0.set(t,e)}function HU(t){const e=A0.get(t);return A0.delete(t),e}let WU=()=>location.protocol+"//"+location.host;function jI(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),gw(c,"")}return gw(n,t)+r+i}function GU(t,e,n,r){let i=[],s=[],o=null;const a=({state:y})=>{const g=jI(t,location),w=n.value,_=e.value;let T=0;if(y){if(n.value=g,e.value=y,o&&o===w){o=null;return}T=_?y.position-_.position:0}else r(g);i.forEach(S=>{S(n.value,w,{delta:T,type:ah.pop,direction:T?T>0?Ou.forward:Ou.back:Ou.unknown})})};function c(){o=n.value}function u(y){i.push(y);const g=()=>{const w=i.indexOf(y);w>-1&&i.splice(w,1)};return s.push(g),g}function f(){const{history:y}=window;y.state&&y.replaceState($t({},y.state,{scroll:lg()}),"")}function d(){for(const y of s)y();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",f),{pauseListeners:c,listen:u,destroy:d}}function vw(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?lg():null}}function KU(t){const{history:e,location:n}=window,r={value:jI(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(c,u,f){const d=t.indexOf("#"),y=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:WU()+t+c;try{e[f?"replaceState":"pushState"](u,"",y),i.value=u}catch(g){console.error(g),n[f?"replace":"assign"](y)}}function o(c,u){const f=$t({},e.state,vw(i.value.back,c,i.value.forward,!0),u,{position:i.value.position});s(c,f,!0),r.value=c}function a(c,u){const f=$t({},i.value,e.state,{forward:c,scroll:lg()});s(f.current,f,!0);const d=$t({},vw(r.value,c,null),{position:f.position+1},u);s(c,d,!1),r.value=c}return{location:r,state:i,push:a,replace:o}}function YU(t){t=jU(t);const e=KU(t),n=GU(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=$t({location:"",base:t,go:r,createHref:qU.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function QU(t){return typeof t=="string"||t&&typeof t=="object"}function UI(t){return typeof t=="string"||typeof t=="symbol"}const mo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},qI=Symbol("");var _w;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(_w||(_w={}));function ol(t,e){return $t(new Error,{type:t,[qI]:!0},e)}function Rs(t,e){return t instanceof Error&&qI in t&&(e==null||!!(t.type&e))}const ww="[^/]+?",XU={sensitive:!1,strict:!1,start:!0,end:!0},JU=/[.+*?^${}()[\]/\\]/g;function ZU(t,e){const n=$t({},XU,e),r=[];let i=n.start?"^":"";const s=[];for(const u of t){const f=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const y=u[d];let g=40+(n.sensitive?.25:0);if(y.type===0)d||(i+="/"),i+=y.value.replace(JU,"\\$&"),g+=40;else if(y.type===1){const{value:w,repeatable:_,optional:T,regexp:S}=y;s.push({name:w,repeatable:_,optional:T});const k=S||ww;if(k!==ww){g+=10;try{new RegExp(`(${k})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${w}" (${k}): `+Y.message)}}let j=_?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;d||(j=T&&u.length<2?`(?:/${j})`:"/"+j),T&&(j+="?"),i+=j,g+=20,T&&(g+=-8),_&&(g+=-20),k===".*"&&(g+=-50)}f.push(g)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(u){const f=u.match(o),d={};if(!f)return null;for(let y=1;y<f.length;y++){const g=f[y]||"",w=s[y-1];d[w.name]=g&&w.repeatable?g.split("/"):g}return d}function c(u){let f="",d=!1;for(const y of t){(!d||!f.endsWith("/"))&&(f+="/"),d=!1;for(const g of y)if(g.type===0)f+=g.value;else if(g.type===1){const{value:w,repeatable:_,optional:T}=g,S=w in u?u[w]:"";if(qi(S)&&!_)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const k=qi(S)?S.join("/"):S;if(!k)if(T)y.length<2&&(f.endsWith("/")?f=f.slice(0,-1):d=!0);else throw new Error(`Missing required param "${w}"`);f+=k}}return f||"/"}return{re:o,score:r,keys:s,parse:a,stringify:c}}function e9(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function t9(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=e9(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(bw(r))return 1;if(bw(i))return-1}return i.length-r.length}function bw(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const n9={type:0,value:""},r9=/[a-zA-Z0-9_]/;function i9(t){if(!t)return[[]];if(t==="/")return[[n9]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,c,u="",f="";function d(){u&&(n===0?s.push({type:0,value:u}):n===1||n===2||n===3?(s.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function y(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&d(),o()):c===":"?(d(),n=1):y();break;case 4:y(),n=r;break;case 1:c==="("?n=2:r9.test(c)?y():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:n=3:f+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,f="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}function s9(t,e,n){const r=ZU(i9(t.path),n),i=$t(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function o9(t,e){const n=[],r=new Map;e=Ew({strict:!1,end:!0,sensitive:!1},e);function i(f){return r.get(f)}function s(f,d,y){const g=!y,w=a9(f);w.aliasOf=y&&y.record;const _=Ew(e,f),T=[w];if("alias"in f){const j=typeof f.alias=="string"?[f.alias]:f.alias;for(const Y of j)T.push($t({},w,{components:y?y.record.components:w.components,path:Y,aliasOf:y?y.record:w}))}let S,k;for(const j of T){const{path:Y}=j;if(d&&Y[0]!=="/"){const oe=d.record.path,me=oe[oe.length-1]==="/"?"":"/";j.path=d.record.path+(Y&&me+Y)}if(S=s9(j,d,_),y?y.alias.push(S):(k=k||S,k!==S&&k.alias.push(S),g&&f.name&&!Sw(S)&&o(f.name)),w.children){const oe=w.children;for(let me=0;me<oe.length;me++)s(oe[me],S,y&&y.children[me])}y=y||S,(S.record.components&&Object.keys(S.record.components).length||S.record.name||S.record.redirect)&&c(S)}return k?()=>{o(k)}:Pu}function o(f){if(UI(f)){const d=r.get(f);d&&(r.delete(f),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(f);d>-1&&(n.splice(d,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function c(f){let d=0;for(;d<n.length&&t9(f,n[d])>=0&&(f.record.path!==n[d].record.path||!VI(f,n[d]));)d++;n.splice(d,0,f),f.record.name&&!Sw(f)&&r.set(f.record.name,f)}function u(f,d){let y,g={},w,_;if("name"in f&&f.name){if(y=r.get(f.name),!y)throw ol(1,{location:f});_=y.record.name,g=$t(Aw(d.params,y.keys.filter(k=>!k.optional).map(k=>k.name)),f.params&&Aw(f.params,y.keys.map(k=>k.name))),w=y.stringify(g)}else if("path"in f)w=f.path,y=n.find(k=>k.re.test(w)),y&&(g=y.parse(w),_=y.record.name);else{if(y=d.name?r.get(d.name):n.find(k=>k.re.test(d.path)),!y)throw ol(1,{location:f,currentLocation:d});_=y.record.name,g=$t({},d.params,f.params),w=y.stringify(g)}const T=[];let S=y;for(;S;)T.unshift(S.record),S=S.parent;return{name:_,path:w,params:g,matched:T,meta:l9(T)}}return t.forEach(f=>s(f)),{addRoute:s,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function Aw(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function a9(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:c9(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function c9(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function Sw(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function l9(t){return t.reduce((e,n)=>$t(e,n.meta),{})}function Ew(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function VI(t,e){return e.children.some(n=>n===t||VI(t,n))}const $I=/#/g,u9=/&/g,h9=/\//g,f9=/=/g,d9=/\?/g,zI=/\+/g,p9=/%5B/g,g9=/%5D/g,HI=/%5E/g,m9=/%60/g,WI=/%7B/g,y9=/%7C/g,GI=/%7D/g,v9=/%20/g;function xy(t){return encodeURI(""+t).replace(y9,"|").replace(p9,"[").replace(g9,"]")}function _9(t){return xy(t).replace(WI,"{").replace(GI,"}").replace(HI,"^")}function S0(t){return xy(t).replace(zI,"%2B").replace(v9,"+").replace($I,"%23").replace(u9,"%26").replace(m9,"`").replace(WI,"{").replace(GI,"}").replace(HI,"^")}function w9(t){return S0(t).replace(f9,"%3D")}function b9(t){return xy(t).replace($I,"%23").replace(d9,"%3F")}function A9(t){return t==null?"":b9(t).replace(h9,"%2F")}function np(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function S9(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(zI," "),o=s.indexOf("="),a=np(o<0?s:s.slice(0,o)),c=o<0?null:np(s.slice(o+1));if(a in e){let u=e[a];qi(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function Iw(t){let e="";for(let n in t){const r=t[n];if(n=w9(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(qi(r)?r.map(s=>s&&S0(s)):[r&&S0(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function E9(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=qi(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const I9=Symbol(""),Nw=Symbol(""),ky=Symbol(""),KI=Symbol(""),E0=Symbol("");function lu(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function vo(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const c=d=>{d===!1?a(ol(4,{from:n,to:e})):d instanceof Error?a(d):QU(d)?a(ol(2,{from:e,to:d})):(s&&r.enterCallbacks[i]===s&&typeof d=="function"&&s.push(d),o())},u=t.call(r&&r.instances[i],e,n,c);let f=Promise.resolve(u);t.length<3&&(f=f.then(c)),f.catch(d=>a(d))})}function Hm(t,e,n,r){const i=[];for(const s of t)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(N9(a)){const u=(a.__vccOpts||a)[e];u&&i.push(vo(u,n,r,s,o))}else{let c=a();i.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const f=RU(u)?u.default:u;s.components[o]=f;const y=(f.__vccOpts||f)[e];return y&&vo(y,n,r,s,o)()}))}}return i}function N9(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Tw(t){const e=Mi(ky),n=Mi(KI),r=ai(()=>e.resolve(mt(t.to))),i=ai(()=>{const{matched:c}=r.value,{length:u}=c,f=c[u-1],d=n.matched;if(!f||!d.length)return-1;const y=d.findIndex(sl.bind(null,f));if(y>-1)return y;const g=Cw(c[u-2]);return u>1&&Cw(f)===g&&d[d.length-1].path!==g?d.findIndex(sl.bind(null,c[u-2])):y}),s=ai(()=>i.value>-1&&k9(n.params,r.value.params)),o=ai(()=>i.value>-1&&i.value===n.matched.length-1&&BI(n.params,r.value.params));function a(c={}){return x9(c)?e[mt(t.replace)?"replace":"push"](mt(t.to)).catch(Pu):Promise.resolve()}return{route:r,href:ai(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const T9=db({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Tw,setup(t,{slots:e}){const n=ch(Tw(t)),{options:r}=Mi(ky),i=ai(()=>({[xw(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[xw(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:Lb("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),C9=T9;function x9(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function k9(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!qi(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Cw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const xw=(t,e,n)=>t??e??n,L9=db({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Mi(E0),i=ai(()=>t.route||r.value),s=Mi(Nw,0),o=ai(()=>{let u=mt(s);const{matched:f}=i.value;let d;for(;(d=f[u])&&!d.components;)u++;return u}),a=ai(()=>i.value.matched[o.value]);Yf(Nw,ai(()=>o.value+1)),Yf(I9,a),Yf(E0,i);const c=gr();return _u(()=>[c.value,a.value,t.name],([u,f,d],[y,g,w])=>{f&&(f.instances[d]=u,g&&g!==f&&u&&u===y&&(f.leaveGuards.size||(f.leaveGuards=g.leaveGuards),f.updateGuards.size||(f.updateGuards=g.updateGuards))),u&&f&&(!g||!sl(f,g)||!y)&&(f.enterCallbacks[d]||[]).forEach(_=>_(u))},{flush:"post"}),()=>{const u=i.value,f=t.name,d=a.value,y=d&&d.components[f];if(!y)return kw(n.default,{Component:y,route:u});const g=d.props[f],w=g?g===!0?u.params:typeof g=="function"?g(u):g:null,T=Lb(y,$t({},w,e,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(d.instances[f]=null)},ref:c}));return kw(n.default,{Component:T,route:u})||T}}});function kw(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const R9=L9;function P9(t){const e=o9(t.routes,t),n=t.parseQuery||S9,r=t.stringifyQuery||Iw,i=t.history,s=lu(),o=lu(),a=lu(),c=Zw(mo);let u=mo;Tc&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=$m.bind(null,P=>""+P),d=$m.bind(null,A9),y=$m.bind(null,np);function g(P,$){let W,J;return UI(P)?(W=e.getRecordMatcher(P),J=$):J=P,e.addRoute(J,W)}function w(P){const $=e.getRecordMatcher(P);$&&e.removeRoute($)}function _(){return e.getRoutes().map(P=>P.record)}function T(P){return!!e.getRecordMatcher(P)}function S(P,$){if($=$t({},$||c.value),typeof P=="string"){const R=zm(n,P,$.path),B=e.resolve({path:R.path},$),re=i.createHref(R.fullPath);return $t(R,B,{params:y(B.params),hash:np(R.hash),redirectedFrom:void 0,href:re})}let W;if("path"in P)W=$t({},P,{path:zm(n,P.path,$.path).path});else{const R=$t({},P.params);for(const B in R)R[B]==null&&delete R[B];W=$t({},P,{params:d(P.params)}),$.params=d($.params)}const J=e.resolve(W,$),se=P.hash||"";J.params=f(y(J.params));const Le=DU(r,$t({},P,{hash:_9(se),path:J.path})),Ee=i.createHref(Le);return $t({fullPath:Le,hash:se,query:r===Iw?E9(P.query):P.query||{}},J,{redirectedFrom:void 0,href:Ee})}function k(P){return typeof P=="string"?zm(n,P,c.value.path):$t({},P)}function j(P,$){if(u!==P)return ol(8,{from:$,to:P})}function Y(P){return te(P)}function oe(P){return Y($t(k(P),{replace:!0}))}function me(P){const $=P.matched[P.matched.length-1];if($&&$.redirect){const{redirect:W}=$;let J=typeof W=="function"?W(P):W;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=k(J):{path:J},J.params={}),$t({query:P.query,hash:P.hash,params:"path"in J?{}:P.params},J)}}function te(P,$){const W=u=S(P),J=c.value,se=P.state,Le=P.force,Ee=P.replace===!0,R=me(W);if(R)return te($t(k(R),{state:typeof R=="object"?$t({},se,R.state):se,force:Le,replace:Ee}),$||W);const B=W;B.redirectedFrom=$;let re;return!Le&&MU(r,J,W)&&(re=ol(16,{to:B,from:J}),we(J,J,!0,!1)),(re?Promise.resolve(re):ge(B,J)).catch(z=>Rs(z)?Rs(z,2)?z:_e(z):de(z,B,J)).then(z=>{if(z){if(Rs(z,2))return te($t({replace:Ee},k(z.to),{state:typeof z.to=="object"?$t({},se,z.to.state):se,force:Le}),$||B)}else z=D(B,J,!0,Ee,se);return pe(B,J,z),z})}function F(P,$){const W=j(P,$);return W?Promise.reject(W):Promise.resolve()}function ge(P,$){let W;const[J,se,Le]=O9(P,$);W=Hm(J.reverse(),"beforeRouteLeave",P,$);for(const R of J)R.leaveGuards.forEach(B=>{W.push(vo(B,P,$))});const Ee=F.bind(null,P,$);return W.push(Ee),wc(W).then(()=>{W=[];for(const R of s.list())W.push(vo(R,P,$));return W.push(Ee),wc(W)}).then(()=>{W=Hm(se,"beforeRouteUpdate",P,$);for(const R of se)R.updateGuards.forEach(B=>{W.push(vo(B,P,$))});return W.push(Ee),wc(W)}).then(()=>{W=[];for(const R of P.matched)if(R.beforeEnter&&!$.matched.includes(R))if(qi(R.beforeEnter))for(const B of R.beforeEnter)W.push(vo(B,P,$));else W.push(vo(R.beforeEnter,P,$));return W.push(Ee),wc(W)}).then(()=>(P.matched.forEach(R=>R.enterCallbacks={}),W=Hm(Le,"beforeRouteEnter",P,$),W.push(Ee),wc(W))).then(()=>{W=[];for(const R of o.list())W.push(vo(R,P,$));return W.push(Ee),wc(W)}).catch(R=>Rs(R,8)?R:Promise.reject(R))}function pe(P,$,W){for(const J of a.list())J(P,$,W)}function D(P,$,W,J,se){const Le=j(P,$);if(Le)return Le;const Ee=$===mo,R=Tc?history.state:{};W&&(J||Ee?i.replace(P.fullPath,$t({scroll:Ee&&R&&R.scroll},se)):i.push(P.fullPath,se)),c.value=P,we(P,$,W,Ee),_e()}let O;function G(){O||(O=i.listen((P,$,W)=>{if(!V.listening)return;const J=S(P),se=me(J);if(se){te($t(se,{replace:!0}),J).catch(Pu);return}u=J;const Le=c.value;Tc&&zU(yw(Le.fullPath,W.delta),lg()),ge(J,Le).catch(Ee=>Rs(Ee,12)?Ee:Rs(Ee,2)?(te(Ee.to,J).then(R=>{Rs(R,20)&&!W.delta&&W.type===ah.pop&&i.go(-1,!1)}).catch(Pu),Promise.reject()):(W.delta&&i.go(-W.delta,!1),de(Ee,J,Le))).then(Ee=>{Ee=Ee||D(J,Le,!1),Ee&&(W.delta&&!Rs(Ee,8)?i.go(-W.delta,!1):W.type===ah.pop&&Rs(Ee,20)&&i.go(-1,!1)),pe(J,Le,Ee)}).catch(Pu)}))}let H=lu(),ye=lu(),le;function de(P,$,W){_e(P);const J=ye.list();return J.length?J.forEach(se=>se(P,$,W)):console.error(P),Promise.reject(P)}function ne(){return le&&c.value!==mo?Promise.resolve():new Promise((P,$)=>{H.add([P,$])})}function _e(P){return le||(le=!P,G(),H.list().forEach(([$,W])=>P?W(P):$()),H.reset()),P}function we(P,$,W,J){const{scrollBehavior:se}=t;if(!Tc||!se)return Promise.resolve();const Le=!W&&HU(yw(P.fullPath,0))||(J||!W)&&history.state&&history.state.scroll||null;return ib().then(()=>se(P,$,Le)).then(Ee=>Ee&&$U(Ee)).catch(Ee=>de(Ee,P,$))}const Fe=P=>i.go(P);let E;const U=new Set,V={currentRoute:c,listening:!0,addRoute:g,removeRoute:w,hasRoute:T,getRoutes:_,resolve:S,options:t,push:Y,replace:oe,go:Fe,back:()=>Fe(-1),forward:()=>Fe(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:ye.add,isReady:ne,install(P){const $=this;P.component("RouterLink",C9),P.component("RouterView",R9),P.config.globalProperties.$router=$,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>mt(c)}),Tc&&!E&&c.value===mo&&(E=!0,Y(i.location).catch(se=>{}));const W={};for(const se in mo)W[se]=ai(()=>c.value[se]);P.provide(ky,$),P.provide(KI,ch(W)),P.provide(E0,c);const J=P.unmount;U.add(P),P.unmount=function(){U.delete(P),U.size<1&&(u=mo,O&&O(),O=null,c.value=mo,E=!1,le=!1),J()}}};return V}function wc(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function O9(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(u=>sl(u,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(u=>sl(u,c))||i.push(c))}return[n,r,i]}let I0=!1;Da(Bi,t=>{t?(t.uid,I0=!0):(I0=!1,YI.push("/"))});const D9=[{path:"/",component:fD},{path:"/registro",component:SD},{path:"/ofimatica",component:JB},{path:"/programacion",component:lj},{path:"/SOs",component:wj},{path:"/privado",component:qB,beforeEnter:(t,e)=>I0},{path:"/detallesCurso/:id",component:LU}],YI=P9({history:YU(),routes:D9}),QI=tC(sD);QI.use(YI);QI.mount("#app");export{Ht as _};
